"use strict";function MainService($http,$q){var mainService={};return mainService.currentValue="",mainService.sortedArray=[],mainService.getCurrentUsers=function(username){var deferred=$q.defer();return $http({method:"POST",url:"/admins/currentuser",data:{currentUserData:username}}).success(function(data){deferred.resolve(data)}).error(function(err){deferred.reject(err)}),deferred.promise},mainService.getShopList=function(){var deferred=$q.defer();return $http({method:"GET",url:"/shops/list"}).success(function(data){deferred.resolve(data.length)}).error(function(err){deferred.reject(err)}),deferred.promise},mainService.getTaskerPendingList=function(){var deferred=$q.defer();return $http({method:"GET",url:"/taskers/plist"}).success(function(data){deferred.resolve([data,data.length])}).error(function(err){deferred.reject(err)}),deferred.promise},mainService.getmailtemplate=function(){var deferred=$q.defer();return $http({method:"GET",url:"/notification/email-template/getmailtemplate"}).success(function(data){deferred.resolve(data)}).error(function(err){deferred.reject(err)}),deferred.promise},mainService.getmessagetemplate=function(){var deferred=$q.defer();return $http({method:"GET",url:"/notification/email-template/getmessagetemplate"}).success(function(data){deferred.resolve(data)}).error(function(err){deferred.reject(err)}),deferred.promise},mainService.getCurrentUserValue=function(){return mainService.currentValue},mainService.setCurrentUserValue=function(value){mainService.currentValue=value},mainService.setMenu=function(menus){mainService.menus=menus},mainService.getMenu=function(){return mainService.menus},mainService.getSortedArray=function(){return mainService.sortedArray},mainService.setSortedArray=function(value){mainService.sortedArray=value},mainService.deleteDataCall=function(url,value){var deferred=$q.defer();return $http({method:"POST",url:url,data:{delData:value}}).success(function(data){deferred.resolve(data)}).error(function(err){deferred.reject(err)}),deferred.promise},mainService.menu=function(){var deferred=$q.defer();return $http.get("app/admin/public/asserts/json/menu.json").success(function(data){deferred.resolve(data)}).error(function(err){deferred.reject(err)}),deferred.promise},mainService.settings=function(){var deferred=$q.defer();return $http({method:"GET",url:"/settings/general"}).success(function(data){deferred.resolve(data)}).error(function(err){deferred.reject(err)}),deferred.promise},mainService.themecolor=function(){var deferred=$q.defer();return $http({method:"GET",url:"/settings/themecolor"}).success(function(data){deferred.resolve(data)}).error(function(err){deferred.reject(err)}),deferred.promise},mainService.language=function(){var deferred=$q.defer();return $http({method:"POST",url:"/settings/language/default"}).success(function(data){deferred.resolve(data)}).error(function(err){deferred.reject(err)}),deferred.promise},mainService.currency=function(){var deferred=$q.defer();return $http({method:"POST",url:"/settings/currency/default"}).success(function(data){deferred.resolve(data)}).error(function(err){deferred.reject(err)}),deferred.promise},mainService.sendbulkmail=function(delvalue,template){var deferred=$q.defer();return $http({method:"POST",url:"/newsletter/sendbulkmail",data:{delvalue:delvalue,template:template}}).success(function(data){deferred.resolve(data)}).error(function(err){deferred.reject(err)}),deferred.promise},mainService.sendmessage=function(delvalue,template,type){var deferred=$q.defer();return $http({method:"POST",url:"/newsletter/sendmessage",data:{delvalue:delvalue,template:template,type:type}}).success(function(data){deferred.resolve(data)}).error(function(err){deferred.reject(err)}),deferred.promise},mainService.sendmessagemail=function(delvalue,template,type){var deferred=$q.defer();return $http({method:"POST",url:"/newsletter/sendmessagemail",data:{delvalue:delvalue,template:template,type:type}}).success(function(data){deferred.resolve(data)}).error(function(err){deferred.reject(err)}),deferred.promise},mainService.getImage=function(){var deferred=$q.defer();return $http({method:"POST",url:"/images/admin-Image"}).success(function(data){deferred.resolve(data)}).error(function(err){deferred.reject(err)}),deferred.promise},mainService}function userAddCtrl(usersEditServiceResolve,$scope,toastr,UsersService,$state,$stateParams,$modal,$location){var usac=this;usac.editUserData=usersEditServiceResolve[0],usersEditServiceResolve[0]&&(usac.addressList=usersEditServiceResolve[0].addressList),$scope.location={},$scope.visibleValue=!1,usac.checked=!1,$stateParams.id?(usac.checked=!0,usac.action="edit",usac.breadcrumb="SubMenu.EDIT_USER",usac.user_id=$stateParams.id):(usac.action="add",usac.breadcrumb="SubMenu.ADD_USER"),usac.addressStatus=function(id){UsersService.addressStatus(id,usac.editUserData._id).then(function(response){UsersService.UserAddress(usac.editUserData._id).then(function(refdata){usac.addressList=refdata[0].addressList,toastr.success("Preferred Address Added Successfully")})})},usac.deleteAddress=function(id){UsersService.deleteUserAddress(id,usac.editUserData._id).then(function(response){UsersService.UserAddress(usac.editUserData._id).then(function(refdata){usac.addressList=refdata[0].addressList})})},usac.Editaddress=function(index){if(index>=0){var modalInstance=$modal.open({animation:!0,templateUrl:"app/admin/modules/users/views/addaddressmodel.html",controller:"AddAddress",controllerAs:"ATA",resolve:{user:function(){if(usac.addressList)return usac.addressList[index]}}});modalInstance.result.then(function(data){UsersService.AddAddress(usac.editUserData._id,data).then(function(response){toastr.success("User Adddress Added Successfully"),UsersService.UserAddress(usac.editUserData._id).then(function(refdata){usac.addressList=refdata[0].addressList})})})}else UsersService.UserAddress(usac.editUserData._id).then(function(datalen){if(datalen[0].addressList.length<5){var modalInstance=$modal.open({animation:!0,templateUrl:"app/admin/modules/users/views/addaddressmodel.html",controller:"AddAddress",controllerAs:"ATA",resolve:{user:function(){if(usac.addressList)return usac.addressList[index]}}});modalInstance.result.then(function(data){UsersService.AddAddress(usac.editUserData._id,data).then(function(response){toastr.success("User Adddress Added Successfully"),UsersService.UserAddress(usac.editUserData._id).then(function(refdata){usac.addressList=refdata[0].addressList})})})}else toastr.error(" Added Only 5 Adddress ")})},usac.placeChanged=function(){usac.editUserData.address.line1="",usac.editUserData.address.line2="",usac.editUserData.address.country="",usac.editUserData.address.zipcode="",usac.editUserData.address.state="",usac.place=this.getPlace();var locationa=usac.place;locationa.name&&(usac.editUserData.address.line1=locationa.name);for(var i=0;i<locationa.address_components.length;i++)for(var j=0;j<locationa.address_components[i].types.length;j++)"neighborhood"==locationa.address_components[i].types[j]&&usac.editUserData.address.line1!=locationa.address_components[i].long_name&&(""!=usac.editUserData.address.line1?usac.editUserData.address.line1=usac.editUserData.address.line1+","+locationa.address_components[i].long_name:usac.editUserData.address.line1=locationa.address_components[i].long_name),"route"==locationa.address_components[i].types[j]&&usac.editUserData.address.line1!=locationa.address_components[i].long_name&&(""!=usac.editUserData.address.line2?usac.editUserData.address.line2=usac.editUserData.address.line2+","+locationa.address_components[i].long_name:usac.editUserData.address.line2=locationa.address_components[i].long_name),"street_number"==locationa.address_components[i].types[j]&&(""!=usac.editUserData.address.line2?usac.editUserData.address.line2=usac.editUserData.address.line2+","+locationa.address_components[i].long_name:usac.editUserData.address.line2=locationa.address_components[i].long_name),"sublocality_level_1"==locationa.address_components[i].types[j]&&(""!=usac.editUserData.address.line2?usac.editUserData.address.line2=usac.editUserData.address.line2+","+locationa.address_components[i].long_name:usac.editUserData.address.line2=locationa.address_components[i].long_name),"locality"==locationa.address_components[i].types[j]&&(usac.editUserData.address.city=locationa.address_components[i].long_name),"country"==locationa.address_components[i].types[j]&&(usac.editUserData.address.country=locationa.address_components[i].long_name),"postal_code"==locationa.address_components[i].types[j]&&(usac.editUserData.address.zipcode=locationa.address_components[i].long_name),"administrative_area_level_1"!=locationa.address_components[i].types[j]&&"administrative_area_level_2"!=locationa.address_components[i].types[j]||(usac.editUserData.address.state=locationa.address_components[i].long_name)},usac.submitUserEditData=function(isValid,data){isValid?(data.role="user",data.loacation=$scope.location,isValid?(1==$scope.visibleValue&&(usac.editUserData.avatarBase64=usac.myCroppedImage),UsersService.editUserCall(usac.editUserData).then(function(response){11e3==response.data.code?toastr.error("Username or Email already exists"):(toastr.success("User Added Successfully"),$state.go("app.users.list"))},function(err){for(var i=0;i<err.data.length;i++)toastr.error("Server Down")})):toastr.error("Form is Invalid")):toastr.error("Form is Invalid")},$stateParams.id&&UsersService.walletAmount(usac.editUserData._id).then(function(respo){usac.wallet=respo[0]}),$scope.myImage="",usac.myCroppedImage="",$scope.handleFileSelect=function(evt){$scope.visibleValue=!0;var file=evt.currentTarget.files[0],reader=new FileReader,image=new Image;reader.onload=function(evt){var uri=event.target.result;image.src=uri,image.onload=function(){if(this.width>=750)var resultImageSize=Math.round(this.width/this.height*320);else var resultImageSize=250;$scope.$apply(function($scope){$scope.myImage=evt.target.result,$scope.resultImageSize=resultImageSize})}},reader.readAsDataURL(file)}}function usersListCtrl(usersServiceResolve,UsersService,$scope,MainService,toastr){var tlc=this;tlc.permission=$scope.privileges.filter(function(menu){return"users"===menu.alias}).map(function(menu){return menu.status})[0],usersServiceResolve[2]&&(tlc.allValue=usersServiceResolve[2].allValue||0,tlc.activeValue=usersServiceResolve[2].activeValue||0,tlc.deactivateValue=usersServiceResolve[2].deactivateValue||0),$scope.statusValue=0,tlc.statusPass=function(status,limit,skip){$scope.statusValue=status,1!=status&&2!=status&&0!=status||UsersService.getAllUsers(status,limit,skip).then(function(respo){tlc.table.data=respo[0],tlc.table.count=respo[1]||0,respo[2]&&(tlc.allValue=respo[2].allValue||0,tlc.activeValue=respo[2].activeValue||0,tlc.deactivateValue=respo[2].deactivateValue||0)})},UsersService.getSettings().then(function(response){tlc.getsetting=response}),tlc.exportuser=function(){UsersService.exportuserData("User").then(function(response){response.error?toastr.error("No data found to export"):window.location.href=tlc.getsetting.site_url+"tools/exportuser"},function(err){toastr.error(err)})};var layout=[{name:"Username",template:"{{content.username}}",sort:1,variable:"username"},{name:"Email",template:"{{content.email}}",sort:1,variable:"email"},{name:"Status ",template:'<span  ng-switch="content.status"><span  ng-switch-when="1">Active</span><span  ng-switch-when="2">In-Active</span></span>'},{name:"Last Login Date",template:"{{content.updatedAt | clock : options.date}}",sort:1,variable:"updatedAt"},{name:"Actions",template:'<button class="btn btn-info btn-rounded btn-ef btn-ef-5 btn-ef-5b"  ng-if="options.permission.edit != false"  ui-sref="app.users.add({id:content._id})"><i class="fa fa-edit"></i> <span>Edit</span></button><button class="btn btn-danger btn-rounded btn-ef btn-ef-5 btn-ef-5b" ng-if="options.permission.delete != false"  ng-click="CCC.openDeleteModal(small, content, options)" ><i class="fa fa-trash"></i> <span>Delete</span></button>'}];tlc.table={},tlc.table.layout=layout,tlc.table.data=usersServiceResolve[0],tlc.table.count=usersServiceResolve[1]||0,tlc.table["delete"]={permission:tlc.permission,date:$scope.date,service:"/users/delete",getData:function(currentPage,itemsPerPage,sort,status,search){if(currentPage>=1){var skip=(parseInt(currentPage)-1)*itemsPerPage;UsersService.getAllUsers($scope.statusValue,itemsPerPage,skip,sort,status,search).then(function(respo){tlc.table.data=respo[0],tlc.table.count=respo[1]})}}}}function trashUserListCtrl(trashUserServiceResolve,$scope,UsersService){var tulc=this;tulc.permission=$scope.privileges.filter(function(menu){return"users"===menu.alias}).map(function(menu){return menu.status})[0],console.log("data",trashUserServiceResolve[0]),console.log("data",trashUserServiceResolve[1]);var layout=[{name:"Username",template:"{{content.username}}",sort:1,variable:"username"},{name:"Email",template:"{{content.email}}",sort:1,variable:"email"},{name:"Status ",template:'<span  ng-switch="content.status"><span  ng-switch-when="0">Deleted</span></span>'},{name:"Deleted Date",template:"{{content.updatedAt | clock : options.date}}",sort:1,variable:"updatedAt"},{name:"Actions",template:'<button class="btn btn-info btn-rounded btn-ef btn-ef-5 btn-ef-5b"  ng-if="options.permission.edit != false"  ui-sref="app.users.add({id:content._id})"><i class="fa fa-edit"></i> <span>Edit</span></button>'}];tulc.table={},tulc.table.layout=layout,tulc.table.data=trashUserServiceResolve[0],tulc.table.count=trashUserServiceResolve[1]||0,tulc.table["delete"]={permission:tulc.permission,date:$scope.date,service:"/users/getdeletedusers33",getData:function(currentPage,itemsPerPage,sort,status,search){if(currentPage>=1){var skip=(parseInt(currentPage)-1)*itemsPerPage;UsersService.deleteuserList($scope.statusValue,itemsPerPage,skip,sort,status,search).then(function(respo){tulc.table.data=respo[0],tulc.table.count=respo[1]})}}}}function usersExportCtrl(usersExport,UsersService,$scope,MainService){}function transactionListCtrl(usersTransactionServiceResolve,UsersService,$scope,MainService,$stateParams){var tlc=this;tlc.permission=$scope.privileges.filter(function(menu){return"users"===menu.alias}).map(function(menu){return menu.status})[0],tlc.id=$stateParams.id,tlc.name="Transaction List",tlc.table={},0==usersTransactionServiceResolve.status?tlc.table.count=0:(tlc.table.data=usersTransactionServiceResolve.response.trans,tlc.table.count=usersTransactionServiceResolve.response.count||0);var layout=[{name:"Title",template:"{{content.title}}",sort:1},{name:"Transaction Amount",template:"{{content.trans_amount  | currency}}"},{name:"Balance Amount",template:"{{content.balance_amount  | currency}}"},{name:"Transaction Type",template:"{{content.type}}",sort:1,variable:"type"},{name:"Transaction Date",template:"{{content.trans_date | clock : options.date}}",variable:"trans_date"},{name:"Actions",template:'<button class="btn btn-danger btn-rounded btn-ef btn-ef-5 btn-ef-5b" ng-if="options.permission.delete != false"  ng-click="CCC.openDeleteModal(small, content, options)" ><i class="fa fa-trash"></i> <span>Delete</span></button>'}];tlc.table.layout=layout,tlc.table.module="earnings",tlc.table.search="hide",tlc.table["delete"]={permission:tlc.permission,date:$scope.date,service:"/users/transaction/delete",getData:function(currentPage,itemsPerPage,sort,search,status){if(console.log("currentPage, itemsPerPage, sort, search,status",currentPage,itemsPerPage,sort,search,status),currentPage>=1){var skip=(parseInt(currentPage)-1)*itemsPerPage;UsersService.transactionsList($stateParams.id,itemsPerPage,skip,sort,search,status).then(function(respo){console.log(respo),tlc.table.data=respo.response.trans,tlc.table.count=respo.response.count})}}}}function adminsforgtCtrl($scope,UsersService,toastr){var afc=this;afc.forgotpass=function(isValid,formData){isValid?UsersService.forgotpass(formData).then(function(response){toastr.success("Mail has been sent to you")},function(err){toastr.error("Invalid Mail id")}):toastr.error("Invalid Mail id")}}function adminsmailforgtCtrl($scope,toastr,$stateParams,UsersService){var userid=$stateParams.userid,afmc=this;afmc.forgotpassmail=function(isValid,formData){isValid?UsersService.forgotpasssave({formData:formData,userid:userid}).then(function(response){toastr.success("Password Changed Successfully!")},function(err){toastr.error("Error in saving your password")}):toastr.error("Error in saving your password")}}function UsersService($http,$q,Upload){function forgotpasssave(data){var deferred=$q.defer();return $http({method:"POST",url:"/dashboard/forgotsave",data:{data:data}}).success(function(data){deferred.resolve(data)}).error(function(err){deferred.reject(err)}),deferred.promise}function forgotpass(data){var deferred=$q.defer();return $http({method:"POST",url:"/dashboard/forgotpass",data:{data:data}}).success(function(data){deferred.resolve(data)}).error(function(err){deferred.reject(err)}),deferred.promise}function exportuserData(){var deferred=$q.defer();return $http({method:"POST",url:"/tools/exportuser"}).success(function(data){deferred.resolve(data)}).error(function(err){deferred.reject(err)}),deferred.promise}function getAllUsers(status,limit,skip,sort,search){var deferred=$q.defer(),data={};return data.status=status,data.sort=sort,data.search=search,data.limit=limit,data.skip=skip,$http({method:"POST",url:"/users/getusers",data:data}).success(function(data){deferred.resolve(data)}).error(function(err){deferred.reject(err)}),deferred.promise}function addUser(value){var deferred=$q.defer();return $http({method:"POST",url:"/users/adduser",data:value}).success(function(data){deferred.resolve(data)}).error(function(err){deferred.reject(err)}),deferred.promise}function changePassword(currentPwdData,pwdConfirmData,value){var deferred=$q.defer();return $http({method:"POST",url:"/users/changePassword",data:{pwdConfirmCheck:pwdConfirmData,currentPwdCheck:currentPwdData,changeData:value}}).success(function(data){deferred.resolve(data)}).error(function(err){deferred.reject(err)}),deferred.promise}function editUserCall(data){var deferred=$q.defer();return $http({method:"POST",url:"/users/save",data:data}).then(function(data){deferred.resolve(data)},function(err){deferred.reject(err)}),deferred.promise}function edit(id){var data={id:id},deferred=$q.defer();return $http({method:"POST",url:"/users/edit",data:data}).success(function(data){deferred.resolve(data)}).error(function(err){deferred.reject(err)}),deferred.promise}function transactionsList(id,limit,skip,sort,search){console.log("id, limit, skip, sort, search",id,limit,skip,sort,search);var data={};data.id=id,data.sort=sort,data.search=search,data.limit=limit,data.skip=skip;var deferred=$q.defer();return $http({method:"POST",url:"/users/transactionsList",data:data}).success(function(data){deferred.resolve(data)}).error(function(err){deferred.reject(err)}),deferred.promise}function walletAmount(data){var deferred=$q.defer();return $http({method:"POST",url:"/users/walletAmount",data:{data:data}}).success(function(data){deferred.resolve(data)}).error(function(err){deferred.reject(err)}),deferred.promise}function AddAddress(userid,data){var deferred=$q.defer();return $http({method:"POST",url:"/user/addaddress",data:{userid:userid,data:data}}).success(function(data){deferred.resolve(data)}).error(function(err){deferred.reject(err)}),deferred.promise}function UserAddress(id){var deferred=$q.defer();return $http({method:"POST",url:"/users/UserAddress",data:{id:id}}).success(function(data){deferred.resolve(data)}).error(function(err){deferred.reject(err)}),deferred.promise}function addressStatus(add_id,userid){var deferred=$q.defer();return $http({method:"POST",url:"/user/addressStatus",data:{add_id:add_id,userid:userid}}).success(function(data){deferred.resolve(data)}).error(function(err){deferred.reject(err)}),deferred.promise}function deleteUserAddress(add_id,userid){var deferred=$q.defer();return $http({method:"POST",url:"/user/deleteUserAddress",data:{add_id:add_id,userid:userid}}).success(function(data){deferred.resolve(data)}).error(function(err){deferred.reject(err)}),deferred.promise}function getSettings(){var deferred=$q.defer();return $http({method:"GET",url:"/settings/general"}).success(function(data){deferred.resolve(data)}).error(function(err){deferred.reject(err)}),deferred.promise}function deleteuserList(status,limit,skip,sort,search){var deferred=$q.defer(),data={};return data.status=status,data.sort=sort,data.search=search,data.limit=limit,data.skip=skip,$http({method:"POST",url:"/users/getdeletedusers",data:data}).success(function(data){deferred.resolve(data)}).error(function(err){deferred.reject(err)}),deferred.promise}var UsersService={getAllUsers:getAllUsers,addUser:addUser,changePassword:changePassword,editUserCall:editUserCall,edit:edit,walletAmount:walletAmount,AddAddress:AddAddress,UserAddress:UserAddress,addressStatus:addressStatus,exportuserData:exportuserData,deleteUserAddress:deleteUserAddress,forgotpass:forgotpass,forgotpasssave:forgotpasssave,getSettings:getSettings,transactionsList:transactionsList,deleteuserList:deleteuserList};return UsersService}function DashboardCtrl(UsersService,toastr,TasksService,TaskersService,userCountServiceResolve,getRecentUsersResolve,getRecentTaskersResolve,getRecentTasksResolve,DashboardService,$scope,$modal,$state,$stateParams,TasksServiceResolve,earningsServiceResolve,$filter,$rootScope){var dlc=this;dlc.tasks=getRecentTasksResolve[0],dlc.users=userCountServiceResolve[0],dlc.taskers=getRecentTaskersResolve[0];var layout=[{name:"Booking ID",variable:"booking_id",template:"{{content.booking_id}}",sort:1},{name:"Task Date",variable:"task_date",template:"{{content.task_date}}",sort:1},{name:"Username",variable:"username",template:"{{content.user[0].username}}",sort:1},{name:"Status ",template:'<span ng-switch="content.status"><span  ng-switch-when="0">Delete</span><span  ng-switch-when="1">Onprogress</span><span  ng-switch-when="3">Accepted</span><span  ng-switch-when="4">StartOff</span><span  ng-switch-when="5">Arrived</span><span  ng-switch-when="6">Completed</span><span  ng-switch-when="7">Completed</span><span  ng-switch-when="8">Cancelled</span><span  ng-switch-when="9">Dispute</span><span  ng-switch-when="10">Search</span></span>'}];dlc.table={},dlc.table.layout=layout,dlc.table.data=getRecentTasksResolve[0],dlc.table.count=getRecentTasksResolve[1]||0,dlc.table["delete"]={service:"/slider/deletebanner",getData:function(currentPage,itemsPerPage,sort,status,search){var skip=(parseInt(currentPage)-1)*itemsPerPage;DashboardService.getRecentTasks(itemsPerPage,skip,sort,status,search).then(function(respo){dlc.table.data=respo[0],dlc.table.count=respo[1]})}},$scope.refMonth=["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"],$scope.monthArrayObj=[[1,"JAN"],[2,"FEB"],[3,"MAR"],[4,"APR"],[5,"MAY"],[6,"JUN"],[7,"JUL"],[8,"AUG"],[9,"SEP"],[10,"OCT"],[11,"NOV"],[12,"DEC"]],$scope.currentMonth=(new Date).getMonth()+1,$scope.newMonthArray=[];for(var i=0,k=$scope.currentMonth;i<$scope.monthArrayObj.length;i++,k++)k>=$scope.refMonth.length?$scope.monthArrayObj[i][1]=$scope.refMonth[i-($scope.refMonth.length-$scope.currentMonth)]:$scope.monthArrayObj[i][1]=$scope.refMonth[k];$scope.convertedData={orderCount:[[1,0],[2,0],[3,0],[4,0],[5,0],[6,0],[7,0],[8,0],[9,0],[10,0],[11,0],[12,0]],orderAmount:[[1,0],[2,0],[3,0],[4,0],[5,0],[6,0],[7,0],[8,0],[9,0],[10,0],[11,0],[12,0]],monthArray:[]},UsersService.getAllUsers(0,10,0).then(function(data){data[2]?$scope.userlist=data[2].allValue||0:$scope.userlist=0}),DashboardService.getRecentUsers().then(function(data){$scope.RecentUsers=data}),DashboardService.getTaskDetails().then(function(data){$scope.taskDetails=data}),DashboardService.getTaskerDetails().then(function(data){$scope.taskersDetails=data}),DashboardService.getverifiedTaskerDetails().then(function(data){$scope.verifiedtaskersDetails=data}),DashboardService.getTaskers().then(function(data){$scope.taskers=data[1]}),TasksServiceResolve&&($scope.tasks=TasksServiceResolve[0].length||0),DashboardService.getCategoryList().then(function(data){$scope.categorylist=data[1]}),DashboardService.getAllearnings().then(function(data){$scope.earnings=data.data[0].toFixed(2)}),DashboardService.getAllearnings().then(function(data){$scope.earningsadmin=data.data[1].toFixed(2)}),DashboardService.getAllearnings().then(function(data){$scope.coupons=data.data[2].toFixed(2)}),DashboardService.getAllearnings().then(function(data){$scope.subscriber=data.data[3]}),dlc.updateuser=function(){DashboardService.getRecentUsers().then(function(data){$scope.RecentUsers=data})},dlc.approvtaskerss=function(){DashboardService.getTaskerDetails().then(function(data){$scope.taskersDetails=data})},DashboardService.getdefaultcurrency().then(function(data){$scope.getdefaultcurrency=data,$scope.datasetStat=[{data:$scope.convertedData.orderAmount,label:"Order Sale Amount",bars:{show:!0,barWidth:.6,lineWidth:0,fillColor:{colors:[{opacity:.3},{opacity:.8}]}}},{data:$scope.convertedData.orderCount,label:"Dispute Amount",points:{show:!0,radius:6},splines:{show:!0,tension:.45,lineWidth:5,fill:0}}],$scope.optionsStat={colors:["#e05d6f","#61c8b8"],series:{shadowSize:0},legend:{backgroundOpacity:0,margin:-7,position:"ne",noColumns:2},xaxis:{tickLength:0,font:{color:"#fff"},position:"bottom",ticks:$scope.monthArrayObj},yaxis:{tickLength:0,font:{color:"#fff"},position:"left",ticks:[1e3,2e3,3e3,4e3,5e3]},grid:{borderWidth:{top:0,right:0,bottom:1,left:1},borderColor:"rgba(255,255,255,.3)",margin:0,minBorderMargin:0,labelMargin:20,hoverable:!0,clickable:!0,mouseActiveRadius:6},tooltip:!0,tooltipOpts:{content:"%s: %y",defaultTheme:!0,shifts:{x:0,y:20}}},$scope.dataset=[],$scope.options={series:{pie:{show:!0,innerRadius:0,stroke:{width:0},label:{show:!0,threshold:.05}}},colors:["#428bca","#5cb85c","#f0ad4e","#d9534f","#5bc0de","#616f77"],grid:{hoverable:!0,clickable:!0,borderWidth:0,color:"#ccc"},tooltip:!0,tooltipOpts:{content:"%s: %p.0%"}},dlc.deleteuser=function(id){var modalInstance=$modal.open({animation:!0,templateUrl:"app/admin/modules/dashboard/views/deleteuser.modal.tab.html",controller:"DeleteUserModalInstanceCtrl",controllerAs:"DCMIC",resolve:{user:function(){return id}}});modalInstance.result.then(function(id){DashboardService.deleteUser(id).then(function(response){11e3==response.code?toastr.error("Error"):(dlc.updateuser(),toastr.success("success","Deleted Successfully"))})})},dlc.approvtasker=function(id,status){DashboardService.approvTasker(id,status).then(function(response){11e3==response.code?toastr.error("Error"):1==response.data.status?(dlc.approvtaskerss(),toastr.success("success","Approved Successfully")):2==response.data.status&&(dlc.approvtaskerss(),toastr.success("success","UnPublish Successfully"))})},dlc.edit=function(taskerid){$state.go("app.taskers.edit",{id:taskerid})},dlc.edituser=function(userid){$state.go("app.users.add",{id:userid})},dlc.viewtask=function(taskid){$state.go("app.tasks.add",{id:taskid})},$scope.earningsDetails=earningsServiceResolve,$scope.adminlist=[],$scope.taskslist=[],$scope.xaxis_list=[];var i=12;$scope.earningsDetails.response.earnings.filter(function(admin){return $scope.adminlist.push([i,admin.admin_earnings]),$scope.taskslist.push([i,admin.amount]),$scope.xaxis_list.push([i,admin.month]),i--,admin});$scope.dataset=[{data:$scope.adminlist,label:"Admin Earnings",points:{show:!0,radius:6},splines:{show:!0,lineWidth:3,tension:.001,fill:0}},{data:$scope.taskslist,label:"Total task Amount",points:{show:!0,radius:6},splines:{show:!0,tension:.001,lineWidth:3,fill:0}},{visible:$rootScope.earningsVisiblevalue}],$scope.options={colors:["#004687","#BCCF02"],series:{shadowSize:0},xaxis:{font:{color:"#ccc"},position:"bottom",ticks:$scope.xaxis_list},yaxis:{font:{color:"#ccc"},tickFormatter:function(v,axis){return v%10==0?$scope.getdefaultcurrency.symbol+v:""}},grid:{hoverable:!0,clickable:!0,borderWidth:0,color:"#ccc"},tooltip:!0,tooltipOpts:{content:"%s.: %y.4",defaultTheme:!1,shifts:{x:0,y:20}}}})}function DashboardService($http,$q){function getAllearnings(data,status){var deferred=$q.defer();return $http({method:"GET",url:"/dashboard/getAllearnings"}).then(function(data){deferred.resolve(data)},function(err){deferred.reject(err)}),deferred.promise}function approvTasker(data,status){var deferred=$q.defer();return $http({method:"POST",url:"/dashboard/approvtasker",data:{data:data,status:status}}).then(function(data){deferred.resolve(data)},function(err){deferred.reject(err)}),deferred.promise}function deleteUser(data){var deferred=$q.defer();return $http({method:"POST",url:"/dashboard/deleteUser",data:{data:data}}).success(function(data){deferred.resolve(data)}).error(function(err){deferred.reject(err)}),deferred.promise}function getRecentUsers(limit,skip,sort,status,search){var deferred=$q.defer();return $http({method:"GET",url:"/dashboard/userlist"}).success(function(data){deferred.resolve(data)}).error(function(err){deferred.reject(err)}),deferred.promise}function getRecentTasks(limit,skip,sort,status,search){var deferred=$q.defer();return $http({method:"GET",url:"/tasks/recenttasklist/?sort="+sort+"&status="+status+"&search="+search+"&limit="+limit+"&skip="+skip}).success(function(data){deferred.resolve(data)}).error(function(err){deferred.reject(err)}),deferred.promise}function getStatisticsGraph(){var deferred=$q.defer();return $http({method:"GET",url:"/dashboard/getstatistics"}).success(function(data){deferred.resolve(data)}).error(function(err){deferred.reject(err)}),deferred.promise}function getPieChartShops(){var deferred=$q.defer();return $http({method:"GET",url:"/dashboard/getpiechartshops"}).success(function(data){deferred.resolve(data[0])}).error(function(err){deferred.reject(err)}),deferred.promise}function getAllUsers(){var deferred=$q.defer();return $http({method:"POST",url:"/users/getusers"}).success(function(data){deferred.resolve(data)}).error(function(err){deferred.reject(err)}),deferred.promise}function getRecentTaskers(limit,skip,sort,status,search){var deferred=$q.defer();return $http({method:"GET",url:"/taskers/getrecenttasker/?sort="+sort+"&status="+status+"&search="+search+"&limit="+limit+"&skip="+skip}).success(function(data){deferred.resolve(data)}).error(function(err){deferred.reject(err)}),deferred.promise}function getTaskers(){var deferred=$q.defer();return $http({method:"GET",url:"/taskers/gettaskers"}).success(function(data){deferred.resolve(data)}).error(function(err){deferred.reject(err)}),deferred.promise}function getTasks(seller){var deferred=$q.defer();return $http({method:"POST",url:"/tasks/list"}).success(function(data){deferred.resolve(data)}).error(function(err){deferred.reject(err)}),deferred.promise}function getCategoryList(){var deferred=$q.defer();return $http({method:"GET",url:"/categories/list"}).success(function(data){deferred.resolve(data)}).error(function(err){deferred.reject(err)}),deferred.promise}function getTaskDetails(limit,skip,sort,status,search){var deferred=$q.defer();return $http({method:"GET",url:"/dashboard/tasklist"}).success(function(data){deferred.resolve(data)}).error(function(err){deferred.reject(err)}),deferred.promise}function getTaskerDetails(limit,skip,sort,status,search){var deferred=$q.defer();return $http({method:"GET",url:"/dashboard/taskerlist"}).success(function(data){deferred.resolve(data)}).error(function(err){deferred.reject(err)}),deferred.promise}function getverifiedTaskerDetails(limit,skip,sort,status,search){var deferred=$q.defer();return $http({method:"GET",url:"/dashboard/verified/taskerlist"}).success(function(data){deferred.resolve(data)}).error(function(err){deferred.reject(err)}),deferred.promise}function earningsDetails(){var deferred=$q.defer();return $http({method:"POST",url:"/dashboard/earningsDetails"}).success(function(data){deferred.resolve(data)}).error(function(err){deferred.reject(err)}),deferred.promise}function getdefaultcurrency(){var deferred=$q.defer();
return $http({method:"POST",url:"/settings/currency/default"}).success(function(data){deferred.resolve(data)}).error(function(err){deferred.reject(err)}),deferred.promise}var DashboardService={getAllUsers:getAllUsers,getTaskers:getTaskers,getTasks:getTasks,getdefaultcurrency:getdefaultcurrency,getCategoryList:getCategoryList,getStatisticsGraph:getStatisticsGraph,getPieChartShops:getPieChartShops,getRecentTaskers:getRecentTaskers,getRecentTasks:getRecentTasks,getRecentUsers:getRecentUsers,getTaskDetails:getTaskDetails,getTaskerDetails:getTaskerDetails,deleteUser:deleteUser,approvTasker:approvTasker,earningsDetails:earningsDetails,getAllearnings:getAllearnings,getverifiedTaskerDetails:getverifiedTaskerDetails};return DashboardService}function taskersListCtrl(taskersServiceResolve,TaskersService,$scope,toastr){var tlc=this;tlc.permission=$scope.privileges.filter(function(menu){return"tasker"===menu.alias}).map(function(menu){return menu.status})[0],taskersServiceResolve[2]&&(tlc.allValue=taskersServiceResolve[2].allValue||0,tlc.verifiedValue=taskersServiceResolve[2].verifiedValue||0,tlc.unverifiedValue=taskersServiceResolve[2].unverifiedValue||0,tlc.pendingValue=taskersServiceResolve[2].pendingValue||0),$scope.statusValue=0,tlc.statusPass=function(status,limit,skip){$scope.statusValue=status,1!=status&&2!=status&&3!=status&&0!=status||TaskersService.getAllTaskers(status,limit,skip).then(function(respo){tlc.table.data=respo[0],tlc.table.count=respo[1]||0,respo[2]&&(tlc.allValue=respo[2].allValue||0,tlc.verifiedValue=respo[2].verifiedValue||0,tlc.unverifiedValue=respo[2].unverifiedValue||0,tlc.pendingValue=respo[2].pendingValue||0)})},TaskersService.getSettings().then(function(response){tlc.getsetting=response}),tlc.exporttasker=function(){TaskersService.exporttaskerData("Taskers").then(function(response){response.error?toastr.error("No data found to export"):window.location.href=tlc.getsetting.site_url+"tools/exporttasker"},function(err){toastr.error(err)})};var layout=[{name:"Username",variable:"username",sort:1,template:"{{content.username}}"},{name:"Email",template:"{{content.email}}",sort:1,variable:"email"},{name:"Status ",template:'<span  ng-switch="content.status"><span  ng-switch-when="1">Verified</span><span  ng-switch-when="2">Unverified</span><span  ng-switch-when="3">Pending</span></span>'},{name:"Last Login Date",variable:"updatedAt",sort:1,template:"{{content.updatedAt | clock : options.date}}"},{name:"Actions",template:'<button class="btn btn-info btn-rounded btn-ef btn-ef-5 btn-ef-5b" ng-if="options.permission.edit != false" ui-sref=app.taskers.edit({action:"edit",id:content._id})><i class="fa fa-edit"></i> <span>Edit</span></button><button class="btn btn-danger btn-rounded btn-ef btn-ef-5 btn-ef-5b" ng-if="options.permission.delete != false" ng-click="CCC.openDeleteModal(small, content, options)" ><i class="fa fa-trash"></i> <span>Delete</span></button>'}];tlc.table={},tlc.table.layout=layout,tlc.table.data=taskersServiceResolve[0],tlc.table.count=taskersServiceResolve[1]||0,tlc.table["delete"]={date:$scope.date,permission:tlc.permission,service:"/taskers/delete",getData:function(currentPage,itemsPerPage,sort,status,search){if(currentPage>=1){var skip=(parseInt(currentPage)-1)*itemsPerPage;TaskersService.getAllTaskers($scope.statusValue,itemsPerPage,skip,sort,status,search).then(function(respo){tlc.table.data=respo[0],tlc.table.count=respo[1]})}}}}function deletedTaskerCtrl(deletedtaskersServiceResolve,TaskersService,$scope){var tlc=this;tlc.permission=$scope.privileges.filter(function(menu){return"tasker"===menu.alias}).map(function(menu){return menu.status})[0];var layout=[{name:"Username",variable:"username",sort:1,template:"{{content.username}}"},{name:"Email",template:"{{content.email}}",sort:1,variable:"email"},{name:"Status ",template:'<span  ng-switch="content.status"><span  ng-switch-when="0">Deleted</span></span>'},{name:"Deleted Date",variable:"updatedAt",sort:1,template:"{{content.updatedAt | clock : options.date}}"},{name:"Actions",template:'<button class="btn btn-info btn-rounded btn-ef btn-ef-5 btn-ef-5b" ng-if="options.permission.edit != false" ui-sref=app.taskers.edit({action:"edit",id:content._id})><i class="fa fa-edit"></i> <span>Edit</span></button>'}];tlc.table={},tlc.table.layout=layout,tlc.table.data=deletedtaskersServiceResolve[0],tlc.table.count=deletedtaskersServiceResolve[1]||0,tlc.table["delete"]={date:$scope.date,permission:tlc.permission,service:"/taskers/delete",getData:function(currentPage,itemsPerPage,sort,status,search){if(currentPage>=1){var skip=(parseInt(currentPage)-1)*itemsPerPage;TaskersService.getDeletedTaskers($scope.statusValue,itemsPerPage,skip,sort,status,search).then(function(respo){tlc.table.data=respo[0],tlc.table.count=respo[1]})}}}}function addNewTaskerCtrl($filter,$state,$scope,$modal,toastr,$timeout,TaskersService,taskerAddServiceResolve,CategoryServiceResolve,NgMap){function calculate_age(birth_month,birth_day,birth_year){var today_date=new Date,today_year=today_date.getFullYear(),age=(today_date.getMonth(),today_date.getDate(),today_year-birth_year);return parseInt(age)}$scope.render=!1;var antsc=this;"undefined"===antsc.tasker&&(antsc.tasker=taskerAddServiceResolve[0]),antsc.tasker={birthdate:{year:"",month:"",date:""},location:"",working_area:[]},antsc.tasker.imageFile=[],antsc.dateChange=function(){antsc.tasker.birthdate.year=antsc.dob.getFullYear(),antsc.tasker.birthdate.month=antsc.dob.getMonth()+1,antsc.tasker.birthdate.date=antsc.dob.getDate(),calculate_age(antsc.tasker.birthdate.month,antsc.tasker.birthdate.date,antsc.tasker.birthdate.year)>18?(antsc.tasker.birthdate.year=antsc.dob.getFullYear(),antsc.tasker.birthdate.month=antsc.dob.getMonth()+1,antsc.tasker.birthdate.date=antsc.dob.getDate()):toastr.error("Your age should be 18+")},antsc.tasker.location={},$scope.maps=[],$scope.$on("mapInitialized",function(evt,evtMap){$scope.maps.push(evtMap)}),$scope.visibleValue=!1,$scope.showImage=!1,$scope.myImage="",antsc.myCroppedImage="",$scope.handleFileSelect=function(evt){$scope.visibleValue=!0;var file=evt.currentTarget.files[0],reader=new FileReader;reader.onload=function(evt){$scope.$apply(function($scope){$scope.myImage=evt.target.result})},reader.readAsDataURL(file)},antsc.addNewCategory=function(steps){$scope.steps.step5=!0,antsc.tasker.radius=50,antsc.taskerareaaddress||navigator.geolocation.getCurrentPosition(function(pos){var latlng=new google.maps.LatLng(pos.coords.latitude,pos.coords.longitude),geocoder=geocoder=new google.maps.Geocoder;geocoder.geocode({latLng:latlng},function(results,status){status==google.maps.GeocoderStatus.OK&&results[1]&&(antsc.tasker.availability_address=results[1].formatted_address,antsc.taskerareaaddress=results[1].formatted_address)}),antsc.tasker.location.lat=pos.coords.latitude,antsc.tasker.location.lng=pos.coords.longitude}),$timeout(function(){google.maps.event.trigger($scope.maps[0],"resize"),$scope.maps[0].setCenter(new google.maps.LatLng(antsc.tasker.location.lat,antsc.tasker.location.lng))},100)},$scope.today=function(){antsc.dob=new Date,antsc.tasker.birthdate.year=antsc.dob.getFullYear(),antsc.tasker.birthdate.month=antsc.dob.getMonth()+1,antsc.tasker.birthdate.date=antsc.dob.getDate()},$scope.today=function(){$scope.dt=new Date},$scope.today(),$scope.toggleMin=function(){$scope.minDate=$scope.minDate?null:new Date},$scope.toggleMin(),$scope.status={opened:!1},$scope.open=function($event){$scope.status.opened=!0},$scope.dateOptions={formatYear:"yy",startingDay:1,"class":"datepicker"},$scope.formats=["dd-MMMM-yyyy","yyyy/MM/dd","dd.MM.yyyy","shortDate"],$scope.format=$scope.formats[0],TaskersService.getQuestion().then(function(respo){antsc.getQuestion=respo}),antsc.availability={},antsc.availability.days=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],antsc.workingDays=[{day:"Sunday",hour:{morning:!1,afternoon:!1,evening:!1},not_working:!0},{day:"Monday",hour:{morning:!1,afternoon:!1,evening:!1},not_working:!0},{day:"Tuesday",hour:{morning:!1,afternoon:!1,evening:!1},not_working:!0},{day:"Wednesday",hour:{morning:!1,afternoon:!1,evening:!1},not_working:!0},{day:"Thursday",hour:{morning:!1,afternoon:!1,evening:!1},not_working:!0},{day:"Friday",hour:{morning:!1,afternoon:!1,evening:!1},not_working:!0},{day:"Saturday",hour:{morning:!1,afternoon:!1,evening:!1},not_working:!0}],angular.forEach(antsc.workingDays,function(workingDays,key){angular.forEach(antsc.tasker.working_days,function(UserWorkingdays){UserWorkingdays.day==workingDays.day&&(antsc.workingDays[key]=UserWorkingdays)})}),antsc.taskerareaChanged=function(){antsc.place=this.getPlace(),antsc.tasker.location.lng=antsc.place.geometry.location.lng(),antsc.tasker.location.lat=antsc.place.geometry.location.lat();var locationa=antsc.place,dummy=locationa.address_components.filter(function(value){return"sublocality_level_1"==value.types[0]}).map(function(data){return data});antsc.dummyAddress=dummy.length},antsc.mapToInput=function(event){if($scope.maps[0]){antsc.tasker.radius=parseInt($scope.maps[0].shapes.circle.radius/1e3);var lat=$scope.maps[0].shapes.circle.center.lat(),lng=$scope.maps[0].shapes.circle.center.lng(),latlng=new google.maps.LatLng(lat,lng),geocoder=geocoder=new google.maps.Geocoder;geocoder.geocode({latLng:latlng},function(results,status){"OK"==status&&$scope.$apply(function(){antsc.tasker.availability_address=results[0].formatted_address,antsc.taskerareaaddress=results[0].formatted_address,antsc.tasker.location.lng=lng,antsc.tasker.location.lat=lat})})}},$scope.today(),antsc.availabilityModal=function(day){var modalInstance=$modal.open({animation:!0,templateUrl:"app/admin/modules/taskers/views//availability.modal.tab.html",controller:"AvailabilityModalInstanceCtrl",controllerAs:"AAM",resolve:{data:function(){return{day:day,days:antsc.availability.days}},workingDays:function(){return antsc.workingDays}}});modalInstance.result.then(function(data){antsc.workingDays[data.index]=data.working_day,antsc.tasker.working_days=$filter("filter")(antsc.workingDays,{not_working:!1})},function(){})},antsc.placeChanged=function(){antsc.place=this.getPlace(),antsc.tasker.location.lng=antsc.place.geometry.location.lng(),antsc.tasker.location.lat=antsc.place.geometry.location.lat(),antsc.tasker.availability_address=antsc.place.formatted_address;var locationa=antsc.place;antsc.tasker.address.line1=antsc.place.formatted_address,antsc.tasker.address.line2="",locationa.name&&(antsc.tasker.address.line1=locationa.name);for(var i=0;i<locationa.address_components.length;i++)for(var j=0;j<locationa.address_components[i].types.length;j++)"neighborhood"==locationa.address_components[i].types[j]&&antsc.tasker.address.line1!=locationa.address_components[i].long_name&&(""!=antsc.tasker.address.line1?antsc.tasker.address.line1=antsc.tasker.address.line1+","+locationa.address_components[i].long_name:antsc.tasker.address.line1=locationa.address_components[i].long_name),"route"==locationa.address_components[i].types[j]&&antsc.tasker.address.line1!=locationa.address_components[i].long_name&&(""!=antsc.tasker.address.line2?antsc.tasker.address.line2=antsc.tasker.address.line2+","+locationa.address_components[i].long_name:antsc.tasker.address.line2=locationa.address_components[i].long_name),"street_number"==locationa.address_components[i].types[j]&&(""!=antsc.tasker.address.line2?antsc.tasker.address.line2=antsc.tasker.address.line2+","+locationa.address_components[i].long_name:antsc.tasker.address.line2=locationa.address_components[i].long_name),"sublocality_level_1"==locationa.address_components[i].types[j]&&(""!=antsc.tasker.address.line2?antsc.tasker.address.line2=antsc.tasker.address.line2+","+locationa.address_components[i].long_name:antsc.tasker.address.line2=locationa.address_components[i].long_name),"locality"==locationa.address_components[i].types[j]&&(antsc.tasker.address.city=locationa.address_components[i].long_name),"country"==locationa.address_components[i].types[j]&&(antsc.tasker.address.country=locationa.address_components[i].long_name),"postal_code"==locationa.address_components[i].types[j]&&(antsc.tasker.address.zipcode=locationa.address_components[i].long_name),"administrative_area_level_1"!=locationa.address_components[i].types[j]&&"administrative_area_level_2"!=locationa.address_components[i].types[j]||(antsc.tasker.address.state=locationa.address_components[i].long_name)},antsc.tasker.working_area.coordinates&&(antsc.onMapOverlayCompleted=function(e){var arr=[];antsc.tasker.working_area={},antsc.tasker.working_area.coordinates=[],e.getPath().forEach(function(latLng){arr.push(latLng.toString())});for(var i=0;i<arr.length;i++){var latlang=arr[i].replace(/[()]/g,""),latlng=latlang.split(", ");antsc.tasker.working_area.coordinates[0].push(latlng)}}),antsc.availabilitiesModelOpen=function(size,index){var modalInstance=$modal.open({animation:!0,template:'<div class="availabilities-day-form adminweekmodal" ><div class=""><div class=""><div class="modal-header modal-header-success"><button class="close" type="button" ng-click="cancel()">Ã—</button><h1 class="day-text">{{WorkingDays.day}}</h1></div><div class="modal-body"><ul class="radio-contr"><li><input ng-model ="WorkingDays.hour.morning" id="morning" class="u-hidden" type="checkbox" value="morning" name="windowFields"><label class="switch" for="morning"></label><label for="morning">Morning (8am - 12pm)</label></li><li><input ng-model ="WorkingDays.hour.afternoon" id="evenig" class="u-hidden" type="checkbox" value="morning" name="windowFields"><label class="switch" for="evenig"></label><label for="evenig">Afternoon (12pm - 4pm)</label></li><li><input id="afternoon" ng-model ="WorkingDays.hour.evening" class="u-hidden" type="checkbox" value="morning" name="windowFields"><label class="switch" for="afternoon"></label><label for="afternoon">Evening (4pm - 8pm)</label></li></ul></div><div class="modal-footer"><button type="button" class="btn btn-default pull-left" ng-click="ok()" >Save</button></div></div></div></div>',controller:"ModalInstanceWorkingDayCtrl",size:size,resolve:{WorkingDays:function(){return antsc.tasker.working_days},selectedIndex:function(){return index}}});modalInstance.result.then(function(WorkingDays){antsc.tasker.working_days[WorkingDays.selectedIndex]=WorkingDays.WorkingDays},function(dasd){})},antsc.working_areas=[],antsc.working_areas[0]=[],antsc.tasker.working_area.coordinates&&angular.forEach(antsc.tasker.working_area.coordinates[0],function(value,key){antsc.working_areas[0][key]=[],antsc.working_areas[0][key][0]=antsc.tasker.working_area.coordinates[0][key][1],antsc.working_areas[0][key][1]=antsc.tasker.working_area.coordinates[0][key][0]}),TaskersService.gettaskercategory(antsc.tasker._id).then(function(respo){antsc.taskercategory=respo}),TaskersService.getCategories().then(function(respo){antsc.categories=respo}),TaskersService.getExperience().then(function(respo){antsc.experiences=respo}),antsc.addnewcat=function(){TaskersService.gettaskercategory(antsc.tasker._id).then(function(respo){antsc.taskercategory=respo})},TaskersService.defaultCurrency().then(function(respo){antsc.defaultCurrency=respo}),antsc.tasker.taskerskills=[],antsc.addnewcategories=[],antsc.categoryModal=function(category){var modalInstance=$modal.open({animation:!0,templateUrl:"app/admin/modules/taskers/views/editcategory.modal.tab.html",controller:"NewCategoriesModalInstanceCtrl",controllerAs:"ACM",resolve:{experiences:function(){return antsc.experiences},user:function(){return antsc.tasker},categories:function(){return antsc.categories},category:function(){return category},defaultCurrency:function(){return antsc.defaultCurrency}}});modalInstance.result.then(function(selectedCategoryData){antsc.tasker.taskerskills.push(selectedCategoryData),antsc.tasker.imageFile.push(selectedCategoryData.file),antsc.addnewcategories=antsc.categories.filter(function(data){return antsc.tasker.taskerskills.some(function(data2){return data2.childid==data._id})}).map(function(mapdata){return mapdata})},function(){})},antsc.deletecategoryitem=function(data){angular.forEach(antsc.addnewcategories,function(value,key){value._id==data&&(antsc.addnewcategories.splice(key,1),toastr.success("Category removed from the selected list"))}),angular.forEach(antsc.tasker.taskerskills,function(value,key){value.childid==data&&antsc.tasker.taskerskills.splice(key,1)})},antsc.deletecategory=function(category){var modalInstance=$modal.open({animation:!0,templateUrl:"app/admin/modules/taskers/views/deletecategory.modal.tab.html",controller:"DeleteCategoriesModalInstanceCtrl",controllerAs:"DCMIC",resolve:{user:function(){return antsc.tasker},category:function(){return category}}});modalInstance.result.then(function(deletecategorydata){TaskersService.deleteCategory(deletecategorydata).then(function(response){toastr.success("success","Updated Successfully")},function(){})})},antsc.submitTaskertData=function(valid,data,steps){antsc.tasker.role="tasker",antsc.tasker.avatar=antsc.myCroppedImage,calculate_age(antsc.tasker.birthdate.month,antsc.tasker.birthdate.date,antsc.tasker.birthdate.year)>18?valid?$scope.steps.step2=!0:(console.log("age error"),toastr.error("form is invalid")):toastr.error("Your age should be 18+")},antsc.saveNewTaskerPassword=function(valid,data,steps){antsc.tasker.role="tasker",valid?$scope.steps.step3=!0:toastr.error("form is invalid")},TaskersService.getQuestion().then(function(respo){antsc.getQuestion=respo}),antsc.tasker.profile_details?antsc.profileDetails=antsc.tasker.profile_details.reduce(function(total,current){return total[current.question]=current.answer,total},{}):(antsc.profileDetails=[],antsc.tasker.profile_details=[]),antsc.saveProf=function(valid,data,steps){if(valid){$scope.steps.step3=!0;var i=0;for(var key in antsc.profileDetails)antsc.profileDetails.filter(function(obj){return obj.question===key})[0]?antsc.tasker.profile_details[i].answer=antsc.profileDetails[key]:antsc.tasker.profile_details.push({question:key,answer:antsc.profileDetails[key]}),i++;steps.step4=!0}else toastr.error("form is invalid")},antsc.tasker1={},antsc.newsaveAvail=function(){antsc.tasker.working_days?(antsc.tasker1=angular.copy(antsc.tasker),TaskersService.addTasker(antsc.tasker,antsc.tasker1).then(function(response){var _id="";_id=response._id,antsc.tasker._id=response._id,11e3==response.code?(response.errmsg&&toastr.error("Email or Phone Number Already Exists"),toastr.error("Tasker Not Added Successfully")):"wrong"==response.tasker?toastr.error("Your Credentials are gone please login again....."):(toastr.success("Tasker Added Successfully"),$state.go("app.taskers.list"))},function(err){toastr.error("Your credentials are gone")})):toastr.error("Please Select The Working days")}}function addTaskerCtrl(taskerAddServiceResolve,$filter,$state,TaskersService,$scope,$modal,toastr,CategoryServiceResolve,$timeout,$http,$stateParams,NgMap){function calculate_age(birth_month,birth_day,birth_year){var today_date=new Date,today_year=today_date.getFullYear(),today_month=today_date.getMonth(),today_day=today_date.getDate(),age=today_year-birth_year;return today_month<birth_month-1&&age--,birth_month-1==today_month&&today_day<birth_day&&age--,age}$scope.render=!1;var atsc=this;$stateParams.id?atsc.stateDummyVariable="Updated":atsc.stateDummyVariable="Added";var workingDays=[{day:"Sunday",hour:{morning:!1,afternoon:!1,evening:!1},not_working:!0},{day:"Monday",hour:{morning:!1,afternoon:!1,evening:!1},not_working:!0},{day:"Tuesday",hour:{morning:!1,afternoon:!1,evening:!1},not_working:!0},{day:"Wednesday",hour:{morning:!1,afternoon:!1,evening:!1},not_working:!0},{day:"Thursday",hour:{morning:!1,afternoon:!1,evening:!1},not_working:!0},{day:"Friday",hour:{morning:!1,afternoon:!1,evening:!1},not_working:!0},{day:"Saturday",hour:{morning:!1,afternoon:!1,evening:!1},not_working:!0}];if($scope.visibleValue=!1,$scope.myImage="",atsc.myCroppedImage="",$scope.handleFileSelect=function(evt){$scope.visibleValue=!0;var file=evt.currentTarget.files[0],reader=new FileReader;reader.onload=function(evt){$scope.$apply(function($scope){$scope.myImage=evt.target.result})},reader.readAsDataURL(file)},taskerAddServiceResolve){if(atsc.tasker=taskerAddServiceResolve||{},1==atsc.tasker.availability?atsc.availabilityvalue=!0:atsc.availabilityvalue=!1,$scope.maps=[],$scope.$on("mapInitialized",function(evt,evtMap){$scope.maps.push(evtMap)}),atsc.AvailabilityMap=function(){$timeout(function(){google.maps.event.trigger($scope.maps[0],"resize"),$scope.maps[0].setCenter(new google.maps.LatLng(atsc.tasker.location.lat,atsc.tasker.location.lng))},100)},atsc.mapToInput=function(event){if($scope.maps[0]){atsc.tasker.radius=parseInt($scope.maps[0].shapes.circle.radius/1e3);var lat=$scope.maps[0].shapes.circle.center.lat(),lng=$scope.maps[0].shapes.circle.center.lng(),latlng=new google.maps.LatLng(lat,lng),geocoder=geocoder=new google.maps.Geocoder;atsc.tasker.availability_address="",geocoder.geocode({latLng:latlng},function(results,status){"OK"==status&&(atsc.tasker.availability_address=results[0].formatted_address,atsc.tasker.location.lng=lng,atsc.tasker.location.lat=lat)})}},atsc.tasker.location){var latlng=new google.maps.LatLng(atsc.tasker.location.lat,atsc.tasker.location.lng),geocoder=geocoder=new google.maps.Geocoder;geocoder.geocode({latLng:latlng},function(results,status){status==google.maps.GeocoderStatus.OK&&results[1]&&(atsc.tasker.availability_address?atsc.tasker.availability_address=atsc.tasker.availability_address:atsc.tasker.availability_address=results[1].formatted_address,atsc.dummyAddress=1)})}taskerAddServiceResolve.birthdate&&(atsc.dob=new Date(taskerAddServiceResolve.birthdate.year,taskerAddServiceResolve.birthdate.month-1,taskerAddServiceResolve.birthdate.date))}else atsc.tasker={name:{},phone:{},gender:"",userName:"",password:"",newpassword:"",new_confirmed:"",birthdate:{year:"",month:"",date:""},address:{line1:"",line2:"",city:"",country:""},working_days:workingDays,location:"",working_area:[],profile_details:{about:"",experience:"",job:""},vechile_access:"",vechile_type:{v_bike:!1,v_car:!1,v_van:!1,v_truck:!1},avatar:"",next:"step2",taskerskills:[]},$scope.today=function(){atsc.dob=new Date,atsc.tasker.birthdate.year=atsc.dob.getFullYear(),atsc.tasker.birthdate.month=atsc.dob.getMonth()+1,atsc.tasker.birthdate.date=atsc.dob.getDate()},$scope.today();atsc.dateChange=function(){atsc.tasker.birthdate.year=atsc.dob.getFullYear(),atsc.tasker.birthdate.month=atsc.dob.getMonth()+1,atsc.tasker.birthdate.date=atsc.dob.getDate(),calculate_age(atsc.tasker.birthdate.month,atsc.tasker.birthdate.date,atsc.tasker.birthdate.year)>18?(atsc.tasker.birthdate.year=atsc.dob.getFullYear(),atsc.tasker.birthdate.month=atsc.dob.getMonth()+1,atsc.tasker.birthdate.date=atsc.dob.getDate()):toastr.error("Yours age should be 18+")},atsc.placeChanged=function(){atsc.tasker.address.line2="",atsc.tasker.address.country="",atsc.tasker.address.zipcode="",atsc.tasker.address.state="",atsc.place=this.getPlace(),atsc.tasker.location.lng=atsc.place.geometry.location.lng(),atsc.tasker.location.lat=atsc.place.geometry.location.lat();var locationa=atsc.place;atsc.tasker.address.line1=atsc.place.formatted_address,atsc.tasker.address.line2="",locationa.name&&(atsc.tasker.address.line1=locationa.name);for(var i=0;i<locationa.address_components.length;i++)for(var j=0;j<locationa.address_components[i].types.length;j++)"neighborhood"==locationa.address_components[i].types[j]&&atsc.tasker.address.line1!=locationa.address_components[i].long_name&&(""!=atsc.tasker.address.line1?atsc.tasker.address.line1=atsc.tasker.address.line1+","+locationa.address_components[i].long_name:atsc.tasker.address.line1=locationa.address_components[i].long_name),"route"==locationa.address_components[i].types[j]&&atsc.tasker.address.line1!=locationa.address_components[i].long_name&&(""!=atsc.tasker.address.line2?atsc.tasker.address.line2=atsc.tasker.address.line2+","+locationa.address_components[i].long_name:atsc.tasker.address.line2=locationa.address_components[i].long_name),"street_number"==locationa.address_components[i].types[j]&&(""!=atsc.tasker.address.line2?atsc.tasker.address.line2=atsc.tasker.address.line2+","+locationa.address_components[i].long_name:atsc.tasker.address.line2=locationa.address_components[i].long_name),"sublocality_level_1"==locationa.address_components[i].types[j]&&(""!=atsc.tasker.address.line2?atsc.tasker.address.line2=atsc.tasker.address.line2+","+locationa.address_components[i].long_name:atsc.tasker.address.line2=locationa.address_components[i].long_name),"locality"==locationa.address_components[i].types[j]&&(atsc.tasker.address.city=locationa.address_components[i].long_name),"country"==locationa.address_components[i].types[j]&&(atsc.tasker.address.country=locationa.address_components[i].long_name),"postal_code"==locationa.address_components[i].types[j]&&(atsc.tasker.address.zipcode=locationa.address_components[i].long_name),"administrative_area_level_1"!=locationa.address_components[i].types[j]&&"administrative_area_level_2"!=locationa.address_components[i].types[j]||(atsc.tasker.address.state=locationa.address_components[i].long_name)},atsc.submitTaskerEditData=function(isValid){atsc.tasker.role="tasker",calculate_age(atsc.tasker.birthdate.month,atsc.tasker.birthdate.date,atsc.tasker.birthdate.year)>18?atsc.tasker.avatar?isValid?(atsc.tasker.avatarBase64=atsc.myCroppedImage,TaskersService.addTaskergeneral(atsc.tasker).then(function(response){11e3==response.code?toastr.error("Username Already Exist"):"wrong"==response.tasker?toastr.error("Your Credentials are gone please login again....."):(toastr.success("Tasker "+atsc.stateDummyVariable+" Successfully"),$state.go("app.taskers.list"))},function(err){for(var i=0;i<err.length;i++)toastr.error("Your credentials are gone"+err[i].msg+"--"+err[i].param)})):toastr.error("form is invalid"):toastr.error("Form is Invalid"):toastr.error("Yours age should be 18+")},atsc.savepassword=function(valid){atsc.tasker.role="tasker",valid?TaskersService.savetaskerpassword(atsc.tasker).then(function(response){11e3==response.code?toastr.error("Password Not Saved"):"wrong"==response.tasker?toastr.error("Your Credentials are gone please login again....."):(toastr.success("Password Saved Successfully"),$state.go("app.taskers.list"))},function(err){toastr.error(err.message)}):toastr.error("form is invalid")},$scope.today=function(){$scope.dt=new Date},$scope.today(),$scope.toggleMin=function(){$scope.minDate=$scope.minDate?null:new Date},$scope.toggleMin(),$scope.status={opened:!1},$scope.open=function($event){$scope.status.opened=!0},$scope.dateOptions={formatYear:"yy",startingDay:1,"class":"datepicker"},$scope.formats=["dd-MMMM-yyyy","yyyy/MM/dd","dd.MM.yyyy","shortDate"],$scope.format=$scope.formats[0],atsc.selectedCategory=function(index){atsc.selectedcategory=$filter("filter")(atsc.categoryList,{active:!0}),atsc.selectedcategory[0].active=!1,atsc.categoryList[index].active=!0,atsc.selectedcategory=atsc.categoryList[index],atsc.flag=!1},atsc.categoryList=CategoryServiceResolve[0],angular.forEach(atsc.categoryList,function(value){value.active=!1,value.terms=!1,value.quick_pitch="",value.hour_rate="",value.experience="",value.file="",angular.forEach(value.skills,function(skills){skills.selected=!1})}),atsc.categoryList[0].active=!0,atsc.selectedcategory=[],atsc.selectedcategory=atsc.categoryList[0],angular.forEach(atsc.tasker.taskerskills,function(taskerskills){angular.forEach(atsc.categoryList,function(categoryList){taskerskills.categoryid==categoryList._id&&(categoryList.terms=taskerskills.terms,categoryList.quick_pitch=taskerskills.quick_pitch,categoryList.hour_rate=taskerskills.hour_rate,categoryList.experience=taskerskills.experience,angular.forEach(taskerskills.skills,function(taskerskillArr){angular.forEach(categoryList.skills,function(categoryskillArr){categoryskillArr.tags==taskerskillArr.tags&&(categoryskillArr.selected=!0)})}))})}),atsc.selectedCategory=function(index){atsc.selectedcategory=$filter("filter")(atsc.categoryList,{active:!0}),atsc.selectedcategory[0].active=!1,atsc.categoryList[index].active=!0,atsc.selectedcategory=atsc.categoryList[index],atsc.flag=!1},atsc.availabilitiesModelOpen=function(size,index){var modalInstance=$modal.open({animation:!0,template:'<div class="availabilities-day-form adminweekmodal" ><div class=""><div class=""><div class="modal-header modal-header-success"><button class="close" type="button" ng-click="cancel()">Ã—</button><h1 class="day-text">{{WorkingDays.day}}</h1></div><div class="modal-body"><ul class="radio-contr"><li><input ng-model ="WorkingDays.hour.morning" id="morning" class="u-hidden" type="checkbox" value="morning" name="windowFields"><label class="switch" for="morning"></label><label for="morning">Morning (8am - 12pm)</label></li><li><input ng-model ="WorkingDays.hour.afternoon" id="evenig" class="u-hidden" type="checkbox" value="morning" name="windowFields"><label class="switch" for="evenig"></label><label for="evenig">Afternoon (12pm - 4pm)</label></li><li><input id="afternoon" ng-model ="WorkingDays.hour.evening" class="u-hidden" type="checkbox" value="morning" name="windowFields"><label class="switch" for="afternoon"></label><label for="afternoon">Evening (4pm - 8pm)</label></li></ul></div><div class="modal-footer"><button type="button" class="btn btn-default pull-left" ng-click="ok()" >Save</button></div></div></div></div>',controller:"ModalInstanceWorkingDayCtrl",size:size,resolve:{WorkingDays:function(){return atsc.tasker.working_days},selectedIndex:function(){return index}}});modalInstance.result.then(function(WorkingDays){atsc.tasker.working_days[WorkingDays.selectedIndex]=WorkingDays.WorkingDays},function(dasd){})},atsc.taskerareaChanged=function(){atsc.place=this.getPlace(),atsc.tasker.location={},atsc.tasker.location.lng=atsc.place.geometry.location.lng(),atsc.tasker.location.lat=atsc.place.geometry.location.lat();var locationa=atsc.place;atsc.tasker.availability_address=atsc.place.formatted_address;var dummy=locationa.address_components.filter(function(value){return"sublocality_level_1"==value.types[0]}).map(function(data){return data});atsc.dummyAddress=dummy.length},$scope.maps=[],$scope.$on("mapInitialized",function(evt,evtMap){$scope.maps.push(evtMap)}),atsc.saveAvailability=function(){atsc.workingVariable&&(atsc.tasker.working_days=atsc.workingVariable),TaskersService.saveAvailability(atsc.tasker).then(function(response){console.log(atsc.tasker),toastr.success("Updated Successfully"),$state.go("app.taskers.list")},function(err){err.msg?toastr.error("danger",err.msg):toastr.error("Unable to save your data")})},TaskersService.getQuestion().then(function(respo){atsc.getQuestion=respo}),atsc.tasker.profile_details[0]?atsc.profileDetails=atsc.tasker.profile_details.reduce(function(total,current){return total[current.question]=current.answer,total},{}):atsc.profileDetails=[],atsc.saveProfile=function(){var i=0;for(var key in atsc.profileDetails)atsc.tasker.profile_details.filter(function(obj){return obj.question===key})[0]?atsc.tasker.profile_details[i].answer=atsc.profileDetails[key]:atsc.tasker.profile_details.push({question:key,answer:atsc.profileDetails[key]}),i++;TaskersService.saveProfile(atsc.tasker).then(function(response){toastr.success("Updated Successfully"),$state.go("app.taskers.list")},function(err){err.msg?toastr.error("danger",err.msg):toastr.error("Unable to save your data")})},TaskersService.gettaskercategory(atsc.tasker._id).then(function(respo){atsc.taskercategory=respo}),TaskersService.getCategories().then(function(respo){atsc.categories=respo}),TaskersService.defaultCurrency().then(function(respo){atsc.defaultCurrency=respo}),TaskersService.getExperience().then(function(respo){atsc.experiences=respo}),atsc.addcat=function(){TaskersService.gettaskercategory(atsc.tasker._id).then(function(respo){atsc.taskercategory=respo})},atsc.approvtaskercat=function(){TaskersService.gettaskercategory(atsc.tasker._id).then(function(respo){
atsc.taskercategory=respo})},atsc.categoryModal=function(category){var modalInstance=$modal.open({animation:!0,templateUrl:"app/admin/modules/taskers/views/editcategory.modal.tab.html",controller:"CategoriesModalInstanceCtrl",controllerAs:"ACM",resolve:{experiences:function(){return atsc.experiences},user:function(TaskersService,$stateParams){return category?TaskersService.edit(atsc.tasker._id):atsc.tasker},categories:function(){return atsc.categories},category:function(){return category},defaultCurrency:function(){return atsc.defaultCurrency}}});modalInstance.result.then(function(selectedCategoryData){TaskersService.addCategory(selectedCategoryData).then(function(response){toastr.success("Updated Successfully"),$state.go("app.taskers.list"),atsc.addcat()},function(){err.msg?$scope.addAlert("danger",err.msg):$scope.addAlert("Unable to save your data")})},function(){})},atsc.deletecategory=function(category){var modalInstance=$modal.open({animation:!0,templateUrl:"app/admin/modules/taskers/views/deletecategory.modal.tab.html",controller:"DeleteCategoriesModalInstanceCtrl",controllerAs:"DCMIC",resolve:{user:function(){return atsc.tasker},category:function(){return category}}});modalInstance.result.then(function(deletecategorydata){TaskersService.deleteCategory(deletecategorydata).then(function(response){TaskersService.gettaskercategory(atsc.tasker._id).then(function(respo){atsc.taskercategory=respo})},function(){})})},atsc.approvtaskercategory=function(category,status){var data={};data.tasker=atsc.tasker._id,data.category=category,TaskersService.approvtaskercategory(data,status).then(function(response){11e3==response.code?toastr.error("Error"):1==response.data.status?(atsc.approvtaskercat(),toastr.success("Category Verified Successfully")):2==response.data.status&&(atsc.approvtaskercat(),toastr.success("Category UnVerified Successfully"))})},atsc.availability={},atsc.availability.days=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],atsc.workingDays=[{day:"Sunday",hour:{morning:!1,afternoon:!1,evening:!1},not_working:!0},{day:"Monday",hour:{morning:!1,afternoon:!1,evening:!1},not_working:!0},{day:"Tuesday",hour:{morning:!1,afternoon:!1,evening:!1},not_working:!0},{day:"Wednesday",hour:{morning:!1,afternoon:!1,evening:!1},not_working:!0},{day:"Thursday",hour:{morning:!1,afternoon:!1,evening:!1},not_working:!0},{day:"Friday",hour:{morning:!1,afternoon:!1,evening:!1},not_working:!0},{day:"Saturday",hour:{morning:!1,afternoon:!1,evening:!1},not_working:!0}],angular.forEach(atsc.workingDays,function(workingDays,key){angular.forEach(atsc.tasker.working_days,function(UserWorkingdays){UserWorkingdays.day==workingDays.day&&(UserWorkingdays.not_working=!1,atsc.workingDays[key]=UserWorkingdays)})}),atsc.availabilityChange=function(value){atsc.data={},0==value?atsc.data.availability=0:atsc.data.availability=1,atsc.data._id=atsc.tasker._id,TaskersService.updateAvailability(atsc.data).then(function(response){toastr.success("Tasker Availability Updated Successfully"),$state.go("app.taskers.list")},function(err){err.msg?$scope.addAlert("danger",err.msg):toastr.error("Unable to save your Availability")})},atsc.banking=taskerAddServiceResolve.banking,atsc.saveaccountinfo=function(isvalid,data){atsc.banking.userId=$stateParams.id,isvalid?TaskersService.saveaccountinfo(data).then(function(response){toastr.success("Tasker Account Info Updated Successfully"),$state.go("app.taskers.list")},function(err){err.message?toastr.error(err.message):toastr.error("Unable to save your Account Info")}):$translate("please fill all mandatory fileds").then(function(headline){toastr.error(headline)},function(translationId){toastr.error(headline)})},atsc.availabilityModal=function(day){var modalInstance=$modal.open({animation:!0,templateUrl:"app/admin/modules/taskers/views//availability.modal.tab.html",controller:"AvailabilityModalCtrl",controllerAs:"AAM",resolve:{data:function(){return{day:day,days:atsc.availability.days}},workingDays:function(){return atsc.workingDays}}});modalInstance.result.then(function(data){atsc.workingDays[data.index]=data.working_day,atsc.workingVariable=$filter("filter")(atsc.workingDays,{not_working:!1})},function(){})}}function TaskersService($http,$q,Upload){function defaultCurrency(value){var deferred=$q.defer();return $http({method:"POST",url:"/settings/currency/default",data:value}).success(function(data){deferred.resolve(data)}).error(function(err){deferred.reject(err)}),deferred.promise}function getAllTaskers(status,limit,skip,sort,search){var deferred=$q.defer(),data={};return data.status=status,data.sort=sort,data.search=search,data.limit=limit,data.skip=skip,$http({method:"POST",url:"/taskers/getrecenttasker",data:data}).success(function(data){deferred.resolve(data)}).error(function(err){deferred.reject(err)}),deferred.promise}function addUser(value){var deferred=$q.defer();return $http({method:"POST",url:"/taskers/adduser",data:value}).success(function(data){deferred.resolve(data)}).error(function(err){deferred.reject(err)}),deferred.promise}function addTaskergeneral(data){var deferred=$q.defer();return $http({method:"POST",url:"/taskers/addtaskergeneral",data:data}).success(function(data){deferred.resolve(data)}).error(function(err){deferred.reject(err)}),deferred.promise}function addTasker(data){var tasker={};tasker.data=data,tasker.profile=data.profile_details,tasker.days=data.working_days;var deferred=$q.defer();return $http({method:"POST",url:"/taskers/addtasker",data:data}).success(function(data){var id="";id=data._id,deferred.resolve(data)}).error(function(err){deferred.reject(err)}),deferred.promise}function approvtaskercategory(data,status){var deferred=$q.defer();return $http({method:"POST",url:"/taskers/approvtaskercategory",data:{data:data,status:status}}).then(function(data){deferred.resolve(data)},function(err){deferred.reject(err)}),deferred.promise}function savetaskerpassword(value){var deferred=$q.defer();return $http({method:"POST",url:"/taskers/savetaskerpassword",data:value}).success(function(data){deferred.resolve(data)}).error(function(err){deferred.reject(err)}),deferred.promise}function saveNewTaskerPassword(value){var deferred=$q.defer();return $http({method:"POST",url:"/taskers/saveNewTaskerPassword",data:value}).success(function(data){deferred.resolve(data)}).error(function(err){deferred.reject(err)}),deferred.promise}function saveaccountinfo(data){var deferred=$q.defer();return $http({method:"POST",url:"/taskers/saveaccountinfo",data:data}).success(function(data){deferred.resolve(data)}).error(function(err){deferred.reject(err)}),deferred.promise}function saveProfile(data){var deferred=$q.defer();return $http({method:"POST",url:"/taskers/savetaskerprofile",data:data}).success(function(data){deferred.resolve(data)}).error(function(err){deferred.reject(err)}),deferred.promise}function saveProf(data){var deferred=$q.defer();return $http({method:"POST",url:"/taskers/saveprof",data:data}).success(function(data){deferred.resolve(data)}).error(function(err){deferred.reject(err)}),deferred.promise}function changePassword(currentPwdData,pwdConfirmData,value){var deferred=$q.defer();return $http({method:"POST",url:"/users/changePassword",data:{pwdConfirmCheck:pwdConfirmData,currentPwdCheck:currentPwdData,changeData:value}}).success(function(data){deferred.resolve(data)}).error(function(err){deferred.reject(err)}),deferred.promise}function editUserCall(data){var deferred=$q.defer();return Upload.upload({url:"/users/save",arrayKey:"",data:data}).then(function(data){deferred.resolve(data)},function(err){deferred.reject(err)}),deferred.promise}function edit(id){var data={id:id},deferred=$q.defer();return $http({method:"POST",url:"/taskers/edit",data:data}).success(function(data){deferred.resolve(data[0])}).error(function(err){deferred.reject(err)}),deferred.promise}function getQuestion(){var deferred=$q.defer();return $http({method:"POST",url:"/taskers/get-question"}).success(function(data){deferred.resolve(data)}).error(function(err){deferred.reject(err)}),deferred.promise}function getExperience(){var deferred=$q.defer();return $http({method:"POST",url:"/site/account/categories/get-experience"}).success(function(data){deferred.resolve(data)}).error(function(err){deferred.reject(err)}),deferred.promise}function gettaskercategory(id){var deferred=$q.defer();return $http({method:"POST",url:"/taskers/gettaskercategory",data:{_id:id}}).success(function(data){deferred.resolve(data)}).error(function(err){deferred.reject(err)}),deferred.promise}function getCategories(){var deferred=$q.defer();return $http({method:"POST",url:"/taskers/getcategories"}).success(function(data){deferred.resolve(data)}).error(function(err){deferred.reject(err)}),deferred.promise}function addCategory(data){var deferred=$q.defer();return $http({method:"POST",url:"/taskers/addcategory",data:data}).success(function(data){deferred.resolve(data)}).error(function(err){deferred.reject(err)}),deferred.promise}function addNewCategory(data){var deferred=$q.defer();return $http({method:"POST",url:"/taskers/addNewCategory",data:data}).success(function(data){deferred.resolve(data)}).error(function(err){deferred.reject(err)}),deferred.promise}function deleteCategory(data){var deferred=$q.defer();return $http({method:"POST",url:"/taskers/deletecategory",data:data}).then(function(data){deferred.resolve(data)},function(err){deferred.reject(err)}),deferred.promise}function getExperience(){var deferred=$q.defer();return $http({method:"POST",url:"/taskers/getexperience"}).success(function(data){deferred.resolve(data)}).error(function(err){deferred.reject(err)}),deferred.promise}function saveAvailability(data){var deferred=$q.defer();return $http({method:"POST",url:"/taskers/availability/save",data:data}).success(function(data){deferred.resolve(data)}).error(function(err){deferred.reject(err)}),deferred.promise}function newsaveAvail(data){var deferred=$q.defer();return $http({method:"POST",url:"/taskers/newavailability/mapsave",data:data}).success(function(data){deferred.resolve(data)}).error(function(err){deferred.reject(err)}),deferred.promise}function updateAvailability(data){var deferred=$q.defer();return $http({method:"POST",url:"/taskers/updateAvailability",data:data}).success(function(data){deferred.resolve(data)}).error(function(err){deferred.reject(err)}),deferred.promise}function getChild(id){var deferred=$q.defer();return $http({method:"POST",url:"/taskers/getChild",data:{id:id}}).success(function(data){deferred.resolve(data)}).error(function(err){deferred.reject(err)}),deferred.promise}function getSettings(){var deferred=$q.defer();return $http({method:"GET",url:"/settings/general"}).success(function(data){deferred.resolve(data)}).error(function(err){deferred.reject(err)}),deferred.promise}function exporttaskerData(){var deferred=$q.defer();return $http({method:"POST",url:"/tools/exporttasker"}).success(function(data){deferred.resolve(data)}).error(function(err){deferred.reject(err)}),deferred.promise}function getDeletedTaskers(status,limit,skip,sort,search){var deferred=$q.defer(),data={};return data.status=status,data.sort=sort,data.search=search,data.limit=limit,data.skip=skip,$http({method:"POST",url:"/taskers/getDeletedTaskers",data:data}).success(function(data){deferred.resolve(data)}).error(function(err){deferred.reject(err)}),deferred.promise}var TaskersService={getAllTaskers:getAllTaskers,addTaskergeneral:addTaskergeneral,savetaskerpassword:savetaskerpassword,saveNewTaskerPassword:saveNewTaskerPassword,saveProfile:saveProfile,saveaccountinfo:saveaccountinfo,addUser:addUser,changePassword:changePassword,editUserCall:editUserCall,edit:edit,getQuestion:getQuestion,exporttaskerData:exporttaskerData,getCategories:getCategories,getExperience:getExperience,gettaskercategory:gettaskercategory,addCategory:addCategory,addNewCategory:addNewCategory,saveAvailability:saveAvailability,addTasker:addTasker,saveProf:saveProf,approvtaskercategory:approvtaskercategory,newsaveAvail:newsaveAvail,deleteCategory:deleteCategory,updateAvailability:updateAvailability,getChild:getChild,getSettings:getSettings,defaultCurrency:defaultCurrency,getDeletedTaskers:getDeletedTaskers};return TaskersService}function adminsListCtrl(adminsServiceResolve,AdminsService,$scope){var tlc=this;tlc.permission=$scope.privileges.filter(function(menu){return"administrators"===menu.alias}).map(function(menu){return menu.status})[0];var layout=[{name:"Username",variable:"username",template:"{{content.username}}",sort:1},{name:"Email",template:"{{content.email}}",sort:1},{name:"Last Login Date",template:"{{content.activity.last_login}}",sort:1,variable:"updatedAt"},{name:"Actions",template:'<button class="btn btn-info btn-rounded btn-ef btn-ef-5 btn-ef-5b" ng-if="options.permission.edit != false" ui-sref="app.admins.add({id:content._id})"><i class="fa fa-edit"></i> <span>Edit</span></button><button class="btn btn-danger btn-rounded btn-ef btn-ef-5 btn-ef-5b" ng-if="options.permission.delete != false" ng-click="CCC.openDeleteModal(small, content, options)" ><i class="fa fa-trash"></i> <span>Delete</span></button>'}];tlc.table={},tlc.table.layout=layout,tlc.table.data=adminsServiceResolve[0],tlc.table.count=adminsServiceResolve[1]||0,tlc.table["delete"]={permission:tlc.permission,date:$scope.date,service:"/admins/delete",getData:function(currentPage,itemsPerPage,sort,status,search){if(currentPage>=1){var skip=(parseInt(currentPage)-1)*itemsPerPage;AdminsService.getAllAdmins(itemsPerPage,skip,sort,status,search).then(function(respo){tlc.table.data=respo[0],tlc.table.count=respo[1]})}}}}function adminAddCtrl(adminsEditServiceResolve,$scope,toastr,AdminsService,$state,$stateParams){var adac=this;adac.editAdminData=adminsEditServiceResolve[0],$scope.location={},$stateParams.id?(adac.action="edit",adac.breadcrumb="SubMenu.ADMIN_LIST",adac.msg="Edited"):(adac.action="add",adac.breadcrumb="SubMenu.ADMIN_LIST",adac.msg="Added"),adac.submitUserEditData=function(isValid,data){data.loacation=$scope.location,isValid?AdminsService.editUserCall(adac.editAdminData).then(function(response){toastr.success("Admin "+adac.msg+" Successfully"),$state.go("app.admins.list")},function(err){err&&toastr.error(err.data.message)}):toastr.error("form is invalid")}}function subAdminsListCtrl(subAdminsServiceResolve,AdminsService,$scope){var tlc=this;tlc.permission=$scope.privileges.filter(function(menu){return"administrators"===menu.alias}).map(function(menu){return menu.status})[0];var layout=[{name:"Username",template:"{{content.username}}",sort:1,variable:"username"},{template:"{{content.email}}",name:"Email",sort:1,variable:"email"},{name:"Last Login Date",template:"{{content.activity.last_login | clock : options.date}}"},{name:"Actions",template:'<button class="btn btn-info btn-rounded btn-ef btn-ef-5 btn-ef-5b" ng-if="options.permission.edit != false" ui-sref="app.admins.subadd({id:content._id})"><i class="fa fa-edit"></i> <span>Edit</span></button><button class="btn btn-danger btn-rounded btn-ef btn-ef-5 btn-ef-5b" ng-if="options.permission.delete != false" ng-click="CCC.openDeleteModal(small, content, options)" ><i class="fa fa-trash"></i> <span>Delete</span></button>'}];tlc.table={},tlc.table.layout=layout,tlc.table.data=subAdminsServiceResolve[0],tlc.table.count=subAdminsServiceResolve[1]||0,tlc.table["delete"]={permission:tlc.permission,date:$scope.date,service:"/admins/delete",getData:function(currentPage,itemsPerPage,sort,status,search){if(currentPage>=1){var skip=(parseInt(currentPage)-1)*itemsPerPage;AdminsService.getAllSubAdmins(itemsPerPage,skip,sort,status,search).then(function(respo){tlc.table.data=respo[0],tlc.table.count=respo[1]})}}}}function subAdminCtrl(roleManagerResolve,RoleManagerService,userRoleResolve,toastr,$stateParams,$state){var romc=this;$stateParams.id?(romc.action="Edit",romc.breadcrumb="SubMenu.SUB_ADMIN",romc.msg="Edited"):(romc.action="Add",romc.breadcrumb="SubMenu.SUB_ADMIN",romc.msg="Added"),romc.privileges=[],romc.privileges=roleManagerResolve,userRoleResolve[0]&&(romc.editSubAdminData=userRoleResolve[0],userRoleResolve[0].privileges.length>0&&(romc.privileges=userRoleResolve[0].privileges));for(var checking=!0,i=0;i<romc.privileges.length;i++)romc.privileges[i].status?0!=romc.privileges[i].status.view&&0!=romc.privileges[i].status.add&&0!=romc.privileges[i].status.edit&&0!=romc.privileges[i].status["delete"]||(checking=!1):checking=!1;0==checking?romc.checkAll=!1:romc.checkAll=!0,romc.submitRoleManagerData=function(isValid,data){isValid&&0!=data.length?RoleManagerService.RoleManagerActionCall(data).then(function(response){toastr.success("Sub Admin "+romc.msg+" Successfully"),$state.go("app.admins.sub")},function(err){err&&toastr.error(err.message)}):toastr.error("form is invalid")},romc.selectAllRoles=function(value){if(value)for(var j=0;j<romc.privileges.length;j++)romc.privileges[j].status={},romc.privileges[j].status.view=!0,romc.privileges[j].status.add=!0,romc.privileges[j].status.edit=!0,romc.privileges[j].status["delete"]=!0;else for(var j=0;j<romc.privileges.length;j++)romc.privileges[j].status={},romc.privileges[j].status.view=!1,romc.privileges[j].status.add=!1,romc.privileges[j].status.edit=!1,romc.privileges[j].status["delete"]=!1},romc.mainMenuChange=function(menu,index){for(var checking=!0,i=0;i<romc.privileges.length;i++)romc.privileges[i].status?0!=romc.privileges[i].status.view&&0!=romc.privileges[i].status.add&&0!=romc.privileges[i].status.edit&&0!=romc.privileges[i].status["delete"]||(checking=!1):checking=!1;0==checking?romc.checkAll=!1:romc.checkAll=!0}}function AdminsService($http,$q,Upload){function getAllAdmins(limit,skip,sort,search){var deferred=$q.defer(),data={};return data.sort=sort,data.search=search,data.limit=limit,data.skip=skip,$http({method:"POST",url:"/admins/getadmins",data:data}).success(function(data){deferred.resolve(data)}).error(function(err){deferred.reject(err)}),deferred.promise}function addUser(value){var deferred=$q.defer();return $http({method:"POST",url:"/admins/adduser",data:value}).success(function(data){deferred.resolve(data)}).error(function(err){deferred.reject(err)}),deferred.promise}function changePassword(currentPwdData,pwdConfirmData,value){var deferred=$q.defer();return $http({method:"POST",url:"/users/changePassword",data:{pwdConfirmCheck:pwdConfirmData,currentPwdCheck:currentPwdData,changeData:value}}).success(function(data){deferred.resolve(data)}).error(function(err){deferred.reject(err)}),deferred.promise}function editUserCall(data){var deferred=$q.defer();return Upload.upload({url:"/admins/save",arrayKey:"",data:data}).then(function(data){deferred.resolve(data)},function(err){deferred.reject(err)}),deferred.promise}function edit(id){var data={id:id},deferred=$q.defer();return $http({method:"POST",url:"/admins/edit",data:data}).success(function(data){deferred.resolve(data)}).error(function(err){deferred.reject(err)}),deferred.promise}function getAllSubAdmins(limit,skip,sort,search){var deferred=$q.defer(),data={};return data.sort=sort,data.search=search,data.limit=limit,data.skip=skip,$http({method:"POST",url:"/admins/getsubadmins",data:data}).success(function(data){deferred.resolve(data)}).error(function(err){deferred.reject(err)}),deferred.promise}var AdminsService={getAllAdmins:getAllAdmins,addUser:addUser,changePassword:changePassword,editUserCall:editUserCall,edit:edit,getAllSubAdmins:getAllSubAdmins};return AdminsService}function RoleManagerService($http,$q){function getMenuList(){var deferred=$q.defer();return $http.get("app/admin/public/asserts/json/privilages.json").success(function(data){deferred.resolve(data)}).error(function(err){deferred.reject(err)}),deferred.promise}function getAllUsersRole(data){var deferred=$q.defer();return $http({method:"POST",url:"/admins/getusersrole",data:{data:data}}).success(function(data){deferred.resolve(data,data.length)}).error(function(err){deferred.reject(err)}),deferred.promise}function RoleManagerActionCall(data){var deferred=$q.defer();return $http({method:"POST",url:"/admins/rolemanager",data:data}).success(function(data){deferred.resolve(data)}).error(function(err){deferred.reject(err)}),deferred.promise}var RoleManagerService={getMenuList:getMenuList,getAllUsersRole:getAllUsersRole,RoleManagerActionCall:RoleManagerActionCall};return RoleManagerService}function editSliderCtrl(sliderEditReslove,SliderService,toastr,$state,$stateParams){var edsc=this;edsc.editSliderData=sliderEditReslove[0],edsc.requiredValue=!0,$stateParams.id?(edsc.action="edit",edsc.breadcrumb="SubMenu.EDIT_SLIDER",edsc.requiredValue=!1):(edsc.action="add",edsc.requiredValue=!0,edsc.breadcrumb="SubMenu.ADD_SLIDER"),SliderService.getSliderList().then(function(respo){edsc.sliderListCount=respo[1],$stateParams.id?edsc.submit=function(isValid){isValid?SliderService.save(edsc.editSliderData).then(function(response){11e3==response.code?toastr.error("Slider Not Added Successfully"):"wrong"==response.data?toastr.error("Your Credentials are gone please login again....."):(toastr.success("Slider Added Successfully"),$state.go("app.sliders.viewsSlider"))},function(err){for(var i=0;i<err.length;i++)toastr.error("Your credentials are gone"+err[i].msg+"--"+err[i].param)}):toastr.error("form is invalid")}:edsc.submit=function(isValid){isValid?SliderService.save(edsc.editSliderData).then(function(response){11e3==response.code?toastr.error("Slider Not Added Successfully"):"wrong"==response.data?toastr.error("Your Credentials are gone please login again....."):(toastr.success("Slider Added Successfully"),$state.go("app.sliders.viewsSlider"))},function(err){toastr.error("Your credentials are gone");for(var i=0;i<err.length;i++)toastr.error("Your credentials are gone"+err[i].msg+"--"+err[i].param)}):toastr.error("form is invalid")}})}function viewSliderCtrl(SliderServiceResolve,SliderService,$scope){var tlc=this;tlc.permission=$scope.privileges.filter(function(menu){return"slider"===menu.alias}).map(function(menu){return menu.status})[0];var layout=[{name:"Banner Name",variable:"name",template:"{{content.name}}",sort:1},{name:"Banner Image",template:'<img ng-src="{{content.image}}" alt="" class="size-50x50" style="border-radius: 0%;">'},{name:"Status ",template:'<span ng-switch="content.status"><span  ng-switch-when="1">Publish</span><span  ng-switch-when="2">UnPublish</span></span>'},{name:"Actions",template:'<button class="btn btn-info btn-rounded btn-ef btn-ef-5 btn-ef-5b" ng-if="options.permission.edit != false" ui-sref=app.sliders.add({action:"edit",id:content._id})><i class="fa fa-edit"></i> <span>Edit</span></button><button class="btn btn-danger btn-rounded btn-ef btn-ef-5 btn-ef-5b" ng-if="options.permission.delete != false" ng-click="CCC.openDeleteModal(small, content, options)" ><i class="fa fa-trash"></i> <span>Delete</span></button>'}];tlc.table={},tlc.table.layout=layout,tlc.table.data=SliderServiceResolve[0],tlc.table.count=SliderServiceResolve[1]||0,tlc.table["delete"]={permission:tlc.permission,service:"/slider/deletebanner",getData:function(currentPage,itemsPerPage,sort,status,search){var skip=(parseInt(currentPage)-1)*itemsPerPage;SliderService.getSliderList(itemsPerPage,skip,sort,status,search).then(function(respo){tlc.table.data=respo[0],tlc.table.count=respo[1]})}}}function SliderService($http,$q,Upload){function getSliderList(limit,skip,sort,search){var deferred=$q.defer(),data={};return data.sort=sort,data.search=search,data.limit=limit,data.skip=skip,$http({method:"POST",url:"/admin/slider/list",data:data}).success(function(data){deferred.resolve(data)}).error(function(err){deferred.reject(err)}),deferred.promise}function getSlider(id){var data={id:id},deferred=$q.defer();return $http({method:"POST",url:"/slider/edit",data:data}).success(function(data){deferred.resolve(data)}).error(function(err){deferred.reject(err)}),deferred.promise}function save(data){var deferred=$q.defer();return Upload.upload({url:"/slider/save",data:data}).then(function(data){deferred.resolve(data)},function(err){deferred.reject(err)}),deferred.promise}var SliderService={getSliderList:getSliderList,getSlider:getSlider,save:save};return SliderService}function editContactCtrl(contactEditReslove,ContactService,toastr,$state,$filter){var edcc=this;edcc.editContactData=contactEditReslove[0],edcc.Sendmail=function(data){data&&ContactService.sendMail(edcc.editContactData).then(function(response){response&&(toastr.success("Mail Sended Successfully"),$state.go("app.contact.view"))})}}function viewContactCtrl(ContactServiceResolve,ContactService,$scope){var tlc=this;tlc.permission=$scope.privileges.filter(function(menu){return"contact"===menu.alias}).map(function(menu){return menu.status})[0];var layout=[{name:"Name",variable:"name",template:"{{content.name}}",sort:1},{name:"Email",template:"{{content.email}}"},{name:"Mobile",template:"{{content.mobile}}"},{name:"Subject",template:"{{content.subject}}"},{name:"Actions",template:'<button class="btn btn-info btn-rounded btn-ef btn-ef-5 btn-ef-5b" ng-if="options.permission.edit != false" ui-sref=app.contact.add({action:"edit",id:content._id})><i class="fa fa-edit"></i> <span>View</span></button><button class="btn btn-danger btn-rounded btn-ef btn-ef-5 btn-ef-5b" ng-if="options.permission.delete != false" ng-click="CCC.openDeleteModal(small, content, options)" ><i class="fa fa-trash"></i> <span>Delete</span></button>'}];tlc.table={},tlc.table.layout=layout,tlc.table.data=ContactServiceResolve[0],tlc.table.count=ContactServiceResolve[1]||0,tlc.table["delete"]={permission:tlc.permission,date:$scope.date,service:"/contact/deletecontact",getData:function(currentPage,itemsPerPage,sort,status,search){var skip=(parseInt(currentPage)-1)*itemsPerPage;ContactService.getContactList(itemsPerPage,skip,sort,status,search).then(function(respo){tlc.table.data=respo[0],tlc.table.count=respo[1]})}}}function ContactService($http,$q,Upload){function getContactList(limit,skip,sort,search){var deferred=$q.defer(),data={};return data.sort=sort,data.search=search,data.limit=limit,data.skip=skip,$http({method:"POST",url:"/contact/list/",data:data}).success(function(data){deferred.resolve(data)}).error(function(err){deferred.reject(err)}),deferred.promise}function getContact(id){var data={id:id},deferred=$q.defer();return $http({method:"POST",url:"/contact/edit",data:data}).success(function(data){deferred.resolve(data)}).error(function(err){deferred.reject(err)}),deferred.promise}function sendMail(data){var deferred=$q.defer();return Upload.upload({url:"/contact/sendMail",data:data}).then(function(data){deferred.resolve(data)},function(err){deferred.reject(err)}),deferred.promise}var ContactService={getContactList:getContactList,getContact:getContact,sendMail:sendMail};return ContactService}function viewImagesCtrl(ImagesServiceResolve,ImagesService,$scope,toastr){var tlc=this;tlc.data=ImagesServiceResolve[0],tlc.images={};for(var i=0;i<tlc.data.length;i++)"taskersignup"==tlc.data[i].imagefor&&(tlc.images.taskersignup=tlc.data[i].image),"backgroundimage"==tlc.data[i].imagefor&&(tlc.images.backgroundimage=tlc.data[i].image),"adminlogin"==tlc.data[i].imagefor&&(tlc.images.adminlogin=tlc.data[i].image),"loginpage"==tlc.data[i].imagefor&&(tlc.images.loginpage=tlc.data[i].image),"taskerprofile"==tlc.data[i].imagefor&&(tlc.images.taskerprofile=tlc.data[i].image);tlc.submit=function(isValid,header,branding,sidebar,active,fixedheader,fixedaside){isValid?(tlc.images.header=header,tlc.images.branding=branding,tlc.images.sidebar=sidebar,tlc.images.active=active,tlc.images.fixedheader=fixedheader,tlc.images.fixedaside=fixedaside,ImagesService.save(tlc.images).then(function(response){11e3==response.code?toastr.error("Appearance Settings Not Added Successfully"):toastr.success("Appearance Settings Updated Successfully")},function(err){toastr.error("Your credentials are gone")})):toastr.error("form is invalid")},tlc.test=function(value){1==value?$scope.main.settings.headerFixed=!0:$scope.main.settings.headerFixed=!1},tlc.fixedHeaderChange=function(value){if(1==value||0==value){var data={};data.checkedvalue=value,ImagesService.fixedHeaderSave(data).then(function(response){11e3==response.code?toastr.error("Fixed header Not Added Successfully"):toastr.success("Fixed header Updated Successfully")},function(err){toastr.error("Your credentials are gone")})}},tlc.fixedasideChange=function(value){if(1==value||0==value){var data={};data.checkedvalue=value,ImagesService.fixedAsideSave(data).then(function(response){11e3==response.code?toastr.error("Fixed aside Not Added Successfully"):toastr.success("Fixed aside Updated Successfully")},function(err){toastr.error("Your credentials are gone")})}}}function ImagesService($http,$q,Upload){function getImagesList(limit,skip,sort,status,search){var deferred=$q.defer();return $http({method:"GET",url:"/images/list/?sort="+sort+"&status="+status+"&search="+search+"&limit="+limit+"&skip="+skip}).success(function(data){deferred.resolve(data)}).error(function(err){deferred.reject(err)}),deferred.promise}function getImage(id){var data={id:id},deferred=$q.defer();return $http({method:"POST",url:"/images/edit",data:data}).success(function(data){deferred.resolve(data)}).error(function(err){deferred.reject(err)}),deferred.promise}function save(data){var deferred=$q.defer();return Upload.upload({url:"/images/save",arrayKey:"",data:data}).then(function(data){deferred.resolve(data)},function(err){deferred.reject(err)}),deferred.promise}function fixedHeaderSave(data){var deferred=$q.defer();return $http({method:"POST",url:"/images/fixedHeaderSave",data:data}).then(function(data){deferred.resolve(data)},function(err){deferred.reject(err)}),deferred.promise}function fixedAsideSave(data){var deferred=$q.defer();return $http({method:"POST",url:"/images/fixedAsideSave",data:data}).then(function(data){deferred.resolve(data)},function(err){deferred.reject(err)}),deferred.promise}function themecolor(){var deferred=$q.defer();return $http({method:"GET",url:"/settings/themecolor"}).success(function(data){deferred.resolve(data)}).error(function(err){deferred.reject(err)}),deferred.promise}var ImagesService={getImagesList:getImagesList,getImage:getImage,save:save,fixedHeaderSave:fixedHeaderSave,fixedAsideSave:fixedAsideSave,themecolor:themecolor};return ImagesService}function editPageCtrl(PageServiceResolve,toastr,PageService,Slug,$state,$stateParams,PageCategoryResolve){var edpc=this;edpc.mainPagesList=PageServiceResolve[0],edpc.editPageData={},$stateParams.id?(edpc.action="edit",edpc.breadcrumb="SubMenu.EDIT_PAGE"):(edpc.action="add",edpc.breadcrumb="SubMenu.ADD_PAGE"),PageService.getSetting().then(function(response){edpc.editsettingData=response[0].settings.site_url}),edpc.categoryapge=PageCategoryResolve.settings,console.log("edpc.categoryapge=============",edpc.categoryapge),edpc.editPageData=PageServiceResolve[1][0],edpc.submitEditPageData=function(isValid,data){isValid?(data.slug=Slug.slugify(data.slug),PageService.submitPage(data).then(function(response){11e3==response.code?toastr.error("Page Slug already exists"):"wrong"==response.data?toastr.error("Your Credentials are gone please login again....."):(toastr.success(response.message),$state.go("app.pages.list"))},function(err){for(var i=0;i<err.length;i++)toastr.error("Your credentials are gone"+err[i].msg+"--"+err[i].param)})):toastr.error("form is invalid")}}function pagesListCtrl(PageListServiceResolve,PageService,$modal,$scope){var plc=this;plc.permission=$scope.privileges.filter(function(menu){return"page"===menu.alias}).map(function(menu){return menu.status})[0];var layout=[{name:"Page Name",variable:"name",template:"{{content.name}}",sort:1},{name:"Published On",template:"{{ content.createdAt | clock : options.date }}"},{name:"Status ",template:'<div ng-if="content.status==1">Publish</div><div ng-if="content.status==2">Unpublish</div>'},{name:"Actions",template:'<button class="btn btn-info btn-rounded btn-ef btn-ef-5 btn-ef-5b" ng-if="options.permission.edit != false" ui-sref=app.pages.action({action:"edit",id:content._id})><i class="fa fa-edit"></i> <span>Edit</span></button><button class="btn btn-danger btn-rounded btn-ef btn-ef-5 btn-ef-5b" ng-if="options.permission.delete != false" ng-click="CCC.openDeleteModal(small, content, options)" ><i class="fa fa-trash"></i> <span>Delete</span></button><button class="btn btn-info btn-rounded btn-ef btn-ef-5 btn-ef-5b" ng-if="options.permission.edit != false" ui-sref=app.pages.subpageslist({action:"edit",id:content._id})><i class="fa fa-eye"></i> <span>Languages</span></button>'
}];plc.table={},plc.table.layout=layout,plc.table.data=PageListServiceResolve[0],plc.table.count=PageListServiceResolve[1]||0,plc.table["delete"]={permission:plc.permission,date:$scope.date,service:"/pages/deletepage",getData:function(currentPage,itemsPerPage,sort,status,search){var skip=(parseInt(currentPage)-1)*itemsPerPage;PageService.getPageList(itemsPerPage,skip,sort,status,search).then(function(respo){plc.table.data=respo[0],plc.table.count=respo[1]})}}}function subPagesListCtrl(SubPageListServiceResolve,PageService,$modal,$scope){var plc=this;plc.permission=$scope.privileges.filter(function(menu){return"page"===menu.alias}).map(function(menu){return menu.status})[0];var layout=[{name:"Page Name",variable:"name",template:"{{content.name}}",sort:1},{name:"Published On",template:"{{ content.createdAt | clock : options.date }}"},{name:"Status ",template:'<div ng-if="content.status==1">Publish</div><div ng-if="content.status==2">Unpublish</div>'},{name:"Actions",template:'<button class="btn btn-info btn-rounded btn-ef btn-ef-5 btn-ef-5b" ng-if="options.permission.edit != false" ui-sref=app.pages.edittranslate({action:"edit",id:content._id})><i class="fa fa-edit"></i> <span>Edit</span></button><button class="btn btn-danger btn-rounded btn-ef btn-ef-5 btn-ef-5b" ng-if="options.permission.delete != false" ng-click="CCC.openDeleteModal(small, content, options)" ><i class="fa fa-trash"></i> <span>Delete</span></button>'}];plc.table={},plc.table.layout=layout,plc.table.data=SubPageListServiceResolve[0],plc.table.count=SubPageListServiceResolve[1]||0,plc.table["delete"]={permission:plc.permission,date:$scope.date,service:"/pages/deletepage",getData:function(currentPage,itemsPerPage,sort,status,search){var skip=(parseInt(currentPage)-1)*itemsPerPage;PageService.getPageList(itemsPerPage,skip,sort,status,search).then(function(respo){plc.table.data=respo[0],plc.table.count=respo[1]})}}}function editPageLanguageCtrl(SubPageServiceResolve,PageTranslateServiceResolve,toastr,PageService,Slug,$state,$stateParams){var edplc=this;edplc.mainPagesList=SubPageServiceResolve[0],edplc.editPageData={},$stateParams.id?(edplc.action="edit",edplc.breadcrumb="SubMenu.EDIT_PAGE"):(edplc.action="add",edplc.breadcrumb="SubMenu.ADD_PAGE"),edplc.languagedata=PageTranslateServiceResolve.languagedata,edplc.pageCollectionData=PageTranslateServiceResolve.pagesdata,PageService.getSetting().then(function(response){edplc.editsettingData=response[0].settings.site_url}),edplc.editPageData=SubPageServiceResolve[1][0],edplc.submitEditPageData=function(isValid,data){isValid?(data.slug=Slug.slugify(data.slug),PageService.submitPage(data).then(function(response){console.log("response",response),"Assigned"==response?toastr.error("This Page already assigned to this language check again!!!"):11e3==response.code?toastr.error("Page Slug already exists"):"wrong"==response.data?toastr.error("Your Credentials are gone please login again....."):(toastr.success(response.message),$state.go("app.pages.list"))},function(err){for(var i=0;i<err.length;i++)toastr.error("Your credentials are gone"+err[i].msg+"--"+err[i].param)})):toastr.error("form is invalid")}}function PageService($http,$q){function getPageList(limit,skip,sort,search){var deferred=$q.defer(),data={};return data.sort=sort,data.search=search,data.limit=limit,data.skip=skip,$http({method:"POST",url:"/pages/getlist",data:data}).success(function(data){deferred.resolve(data)}).error(function(err){deferred.reject(err)}),deferred.promise}function getPageSetting(){var deferred=$q.defer();return $http({method:"GET",url:"/pages/getPageSetting"}).success(function(data){deferred.resolve(data)}).error(function(err){deferred.reject(err)}),deferred.promise}function getEditPageData(data){var deferred=$q.defer();return $http({method:"POST",url:"/pages/geteditpagedata",data:{data:data}}).success(function(data){deferred.resolve(data)}).error(function(err){deferred.reject(err)}),deferred.promise}function submitsubcategoryPage(data){var deferred=$q.defer();return $http({method:"POST",url:"/pages/submitcategoryPage",data:{data:data}}).success(function(data){deferred.resolve(data)}).error(function(err){deferred.reject(err)}),deferred.promise}function getSubPageList(id,limit,skip,sort,search){var deferred=$q.defer(),data={};return data.id=id,data.sort=sort,data.search=search,data.limit=limit,data.skip=skip,$http({method:"POST",url:"/pages/getsublist",data:data}).success(function(data){deferred.resolve(data)}).error(function(err){deferred.reject(err)}),deferred.promise}function submitPage(data){var deferred=$q.defer();return $http({method:"POST",url:"/pages/submitmainpage",data:{data:data}}).success(function(data){deferred.resolve(data)}).error(function(err){deferred.reject(err)}),deferred.promise}function editPageCall(id){var data={id:id},deferred1=$q.defer();$http({method:"GET",url:"/pages/getlistdropdown"}).success(function(data){deferred1.resolve(data)}).error(function(err){deferred1.reject(err)});var promise1=deferred1.promise,deferred2=$q.defer();$http({method:"POST",url:"/pages/editpage",data:data}).success(function(data){deferred2.resolve(data)}).error(function(err){deferred2.reject(err)});var promise2=deferred2.promise;return $q.all([promise1,promise2])}function getSetting(){var deferred=$q.defer();return $http({method:"GET",url:"/subcategories/getSetting"}).success(function(data){deferred.resolve(data)}).error(function(err){deferred.reject(err)}),deferred.promise}function translatelanguage(){var deferred=$q.defer();return $http({method:"GET",url:"/pages/translatelanguage"}).success(function(data){deferred.resolve(data)}).error(function(err){deferred.reject(err)}),deferred.promise}var PageService={getPageList:getPageList,submitPage:submitPage,editPageCall:editPageCall,getSetting:getSetting,getPageSetting:getPageSetting,getEditPageData:getEditPageData,getSubPageList:getSubPageList,submitsubcategoryPage:submitsubcategoryPage,translatelanguage:translatelanguage};return PageService}function editCouponCtrl(toastr,CouponService,CouponEditServiceResolve,$state,$stateParams,CouponAvailableUserServiceResolve){var ecc=this;ecc.requiredValue=!0,ecc.availableUsers=CouponAvailableUserServiceResolve,$stateParams.id?ecc.action="edit":ecc.action="add",ecc.Date=new Date,ecc.editData=CouponEditServiceResolve,ecc.editData.valid_from&&(ecc.editData.valid_from=new Date(ecc.editData.valid_from)),ecc.editData.expiry_date&&(ecc.editData.expiry_date=new Date(ecc.editData.expiry_date)),ecc.discount_type={Flat:"Flat Discount",Percentage:"Percentage Discount"},ecc.disbledValue=!1,ecc.submitData=function(isValid,data){var today=(data.expiry_date.getDate(),data.expiry_date.getMonth()+1,data.expiry_date.getYear(),new Date);today.getDate(),today.getMonth()+1,today.getYear();isValid&&CouponService.submit(data).then(function(response){toastr.success("Coupon added successfully","Success"),$state.go("app.coupons.list")},function(err){toastr.error("Coupon code already exists")})}}function couponsListCtrl(CouponService,CouponServiceResolve,$scope){var tlc=this;tlc.permission=$scope.privileges.filter(function(menu){return"coupons"===menu.alias}).map(function(menu){return menu.status})[0];var layout=[{name:"Name",variable:"name",template:"{{content.name}}",sort:1},{name:"Amount",template:"{{content.amount_percentage}}"},{name:" Discount Type",template:"{{content.discount_type}}"},{name:"Coupon Code",template:"{{content.code}}"},{name:"Status ",template:'<span  ng-switch="content.status"><span  ng-switch-when="1">Publish</span><span  ng-switch-when="2">UnPublish</span><span  ng-switch-when="3">Pending</span></span>'},{name:"Actions",template:'<button class="btn btn-info btn-rounded btn-ef btn-ef-5 btn-ef-5b" ng-if="options.permission.edit != false" ui-sref=app.coupons.action({action:"edit",id:content._id})><i class="fa fa-edit"></i> <span>Edit</span></button><button class="btn btn-danger btn-rounded btn-ef btn-ef-5 btn-ef-5b" ng-if="options.permission.delete != false" ng-click="CCC.openDeleteModal(small, content, options)" ><i class="fa fa-trash"></i> <span>Delete</span></button>'}];tlc.table={},tlc.table.layout=layout,tlc.table.data=CouponServiceResolve[0],tlc.table.count=CouponServiceResolve[1]||0,tlc.table["delete"]={permission:tlc.permission,service:"/coupons/deletecoupon",getData:function(currentPage,itemsPerPage,sort,status,search){var skip=(parseInt(currentPage)-1)*itemsPerPage;CouponService.list(itemsPerPage,skip,sort,status,search).then(function(respo){tlc.table.data=respo[0],tlc.table.count=respo[1]})}}}function CouponService($http,$q){function list(limit,skip,sort,search){var deferred=$q.defer(),data={};return data.sort=sort,data.search=search,data.limit=limit,data.skip=skip,$http({method:"POST",url:"/coupons/list",data:data}).success(function(data){deferred.resolve(data)}).error(function(err){deferred.reject(err)}),deferred.promise}function submit(data){var deferred=$q.defer();return $http({method:"POST",url:"/coupons/save",data:data}).success(function(data){deferred.resolve(data)}).error(function(err){deferred.reject(err)}),deferred.promise}function edit(id){var data={id:id},deferred=$q.defer();return $http({method:"POST",url:"/coupons/edit",data:data}).success(function(data){deferred.resolve(data)}).error(function(err){deferred.reject(err)}),deferred.promise}function userGet(){var deferred=$q.defer();return $http({method:"GET",url:"/coupons/userGet"}).success(function(data){deferred.resolve(data)}).error(function(err){deferred.reject(err)}),deferred.promise}var CouponService={list:list,edit:edit,submit:submit,userGet:userGet};return CouponService}function emailTemplateSaveCtrl(emailTemplateEditResolve,toastr,EmailTemplateService,$state,$stateParams){var eetc=this;eetc.templateData=emailTemplateEditResolve[0],eetc.templateData&&(1==eetc.templateData.subscription?eetc.templateData.subscription=!0:eetc.templateData.subscription=!1),eetc.checked=!1,$stateParams.id?(eetc.checked=!0,eetc.action="edit",eetc.breadcrumb="SubMenu.EMAILTEMPLATE_EDIT"):(eetc.action="add",eetc.breadcrumb="SubMenu.EMAILTEMPLATE_ADD"),eetc.submitTemplateEditData=function(isValid,data){isValid&&(1==data.subscription||1==data.subscription?data.subscription=1:data.subscription=0,EmailTemplateService.editTemplate(data).then(function(response){if("wrong"==response.data)toastr.error("Your Credentials are gone please login again.....");else{if("edit"==eetc.action)var action="edited";else var action="added";toastr.success("Template "+action+" successfully"),$state.go("app.emailtemplate.list")}},function(error){toastr.error(error,"Error")}))}}function emailTemplateListCtrl(emailTemplateListResolve,EmailTemplateService,$modal,$scope){var tlc=this;tlc.permission=$scope.privileges.filter(function(menu){return"etemplate"===menu.alias}).map(function(menu){return menu.status})[0];var layout=[{name:"Template Name",variable:"name",template:"{{content.name}}",sort:1},{name:"Email Subject",template:"{{content.email_subject}}"},{name:"Sender Email ",template:"{{content.sender_email}}"},{name:"Actions",template:'<button class="btn btn-info btn-rounded btn-ef btn-ef-5 btn-ef-5b" ng-if="options.permission.edit != false" ui-sref=app.emailtemplate.action({action:"edit",id:content._id})><i class="fa fa-edit"></i> <span>Edit</span></button><button class="btn btn-danger btn-rounded btn-ef btn-ef-5 btn-ef-5b" ng-if="options.permission.delete != false" ng-click="CCC.openDeleteModal(small, content, options)" ><i class="fa fa-trash"></i> <span>Delete</span></button>'}];tlc.table={},tlc.table.layout=layout,tlc.table.data=emailTemplateListResolve[0],tlc.table.count=emailTemplateListResolve[1]||0,tlc.table["delete"]={permission:tlc.permission,service:"/email-template/delete",getData:function(currentPage,itemsPerPage,sort,status,search){if(currentPage>=1){var skip=(parseInt(currentPage)-1)*itemsPerPage;EmailTemplateService.getTemplateList(itemsPerPage,skip,sort,status,search).then(function(respo){tlc.table.data=respo[0],tlc.table.count=respo[1]})}}}}function EmailTemplateService($http,$q){function getTemplateList(limit,skip,sort,search){var deferred=$q.defer(),data={};return data.sort=sort,data.search=search,data.limit=limit,data.skip=skip,$http({method:"POST",url:"/email-template/list",data:data}).success(function(data){deferred.resolve(data)}).error(function(err){deferred.reject(err)}),deferred.promise}function getTemplate(id){var data={id:id},deferred=$q.defer();return $http({method:"POST",url:"/email-template/edit",data:data}).success(function(data){deferred.resolve([data])}).error(function(err){deferred.reject(err)}),deferred.promise}function editTemplate(data){var deferred=$q.defer();return $http({method:"POST",url:"/email-template/save",data:data}).success(function(data){deferred.resolve(data)}).error(function(err){deferred.reject(err)}),deferred.promise}var EmailTemplateService={getTemplateList:getTemplateList,getTemplate:getTemplate,editTemplate:editTemplate};return EmailTemplateService}function editCategoryCtrl(categoryEditReslove,CategoryService,toastr,$state,$stateParams,Slug){var ecatc=this;ecatc.mainPagesList=categoryEditReslove[0],ecatc.editCategoryData={},ecatc.editCategoryData=categoryEditReslove[1],$stateParams.id?(ecatc.action="edit",ecatc.breadcrumb="SubMenu.EDIT_CATEGORY"):(ecatc.action="add",ecatc.breadcrumb="SubMenu.ADD_CATEGORY"),CategoryService.getSetting().then(function(response){ecatc.editsettingData=response[0].settings.site_url}),ecatc.disbledValue=!1,ecatc.submit=function(isValid,data){console.log(">>>>>>>>>>>>>>>>ctrler>>>>>>>>>>>>>>>"),console.log(data),console.log(">>>>>>>>>>>>>>>>ctrler>>>>>>>>>>>>>>>"),isValid?(ecatc.disbledValue=!0,data.slug=Slug.slugify(data.slug),CategoryService.savecategory(data).then(function(response){11e3==response.code?toastr.error("Category Not Added Successfully"):"wrong"==response.data?toastr.error("Your Credentials are gone please login again....."):(toastr.success("Category Added Successfully"),$state.go("app.categories.list"))},function(err){toastr.error("Your credentials are gone")})):toastr.error("form is invalid")}}function editsubCategoryCtrl(categoryEditReslove,CategoryService,toastr,$state,$stateParams,$location,Slug){var escatc=this;escatc.mainPagesList=categoryEditReslove[0],escatc.editCategoryData={},escatc.editCategoryData=categoryEditReslove[1],CategoryService.getSetting().then(function(response){escatc.editsettingData=response[0].settings.site_url}),$stateParams.id?(escatc.action="edit",escatc.breadcrumb="SubMenu.EDIT_SUBCATEGORY"):(escatc.action="add",escatc.breadcrumb="SubMenu.ADD_SUBCATEGORY"),escatc.disbledValue=!1,escatc.submit=function(isValid,data){isValid?(escatc.disbledValue=!0,data.slug=Slug.slugify(data.slug),CategoryService.savesubcategory(data).then(function(response){11e3==response.code?toastr.error("Category Not Added Successfully"):"wrong"==response.data?toastr.error("Your Credentials are gone please login again....."):(toastr.success("Category Added Successfully"),$state.go("app.categories.subcategorylist"))},function(err){toastr.error("Your credentials are gone")})):toastr.error("form is invalid")}}function categoryListCtrl(CategoryServiceResolve,CategoryService,$scope){var tlc=this;tlc.permission=$scope.privileges.filter(function(menu){return"categories"===menu.alias}).map(function(menu){return menu.status})[0];var layout=[{name:"Category Name",variable:"name",template:"{{content.name}}",sort:1},{name:"Category Image",template:'<img ng-src="{{content.image}}" alt="" class="size-50x50" style="border-radius: 0%;">'},{name:"Status",template:'<span ng-switch="content.status"><span  ng-switch-when="1">Publish</span><span  ng-switch-when="2">UnPublish</span></span>'},{name:"Actions",template:'<button class="btn btn-info btn-rounded btn-ef btn-ef-5 btn-ef-5b" ng-if="options.permission.edit != false" ui-sref="app.categories.edit({id:content._id})"><i class="fa fa-edit"></i> <span>Edit</span></button><button class="btn btn-danger btn-rounded btn-ef btn-ef-5 btn-ef-5b" ng-if="options.permission.delete != false" ng-click="CCC.openDeleteModal(small, content, options)" ><i class="fa fa-trash"></i> <span>Delete</span></button>'}];tlc.table={},tlc.table.layout=layout,tlc.table.data=CategoryServiceResolve[0],tlc.table.count=CategoryServiceResolve[1]||0,tlc.table["delete"]={permission:tlc.permission,service:"/category/deleteMaincategory",getData:function(currentPage,itemsPerPage,sort,status,search){if(currentPage>=1){var skip=(parseInt(currentPage)-1)*itemsPerPage;CategoryService.CategoryList(itemsPerPage,skip,sort,status,search).then(function(respo){tlc.table.data=respo[0],tlc.table.count=respo[1]})}}}}function subcategoryListCtrl(CategoryServiceResolve,CategoryService,$scope){var tlc=this;tlc.permission=$scope.privileges.filter(function(menu){return"categories"===menu.alias}).map(function(menu){return menu.status})[0];var layout=[{name:"Category Name",variable:"name",template:"{{content.name}}",sort:1},{name:"Category Image",template:'<img ng-src="{{content.image}}" alt="" class="size-50x50" style="border-radius: 0%;">'},{name:"Parent",variable:"parentName",template:"{{content.categoryName[0].name}}"},{name:"Status",template:'<span ng-switch="content.status"><span  ng-switch-when="1">Publish</span><span  ng-switch-when="2">UnPublish</span></span>'},{name:"Actions",template:'<button class="btn btn-info btn-rounded btn-ef btn-ef-5 btn-ef-5b" ng-if="options.permission.edit != false" ui-sref="app.categories.sub({id:content._id})"><i class="fa fa-edit"></i> <span>Edit</span></button><button class="btn btn-danger btn-rounded btn-ef btn-ef-5 btn-ef-5b" ng-if="options.permission.delete != false" ng-click="CCC.openDeleteModal(small, content, options)" ><i class="fa fa-trash"></i> <span>Delete</span></button>'}];tlc.table={},tlc.table.layout=layout,tlc.table.data=CategoryServiceResolve[0],tlc.table.count=CategoryServiceResolve[1]||0,tlc.table["delete"]={permission:tlc.permission,service:"/category/deletecategory",getData:function(currentPage,itemsPerPage,sort,status,search){if(currentPage>=1){var skip=(parseInt(currentPage)-1)*itemsPerPage;CategoryService.subCategoryList(itemsPerPage,skip,sort,status,search).then(function(respo){tlc.table.data=respo[0],tlc.table.count=respo[1]})}}}}function CategoryService($http,$q,Upload){function getCategoryList(limit,skip,sort,status,search){var deferred=$q.defer();return $http({method:"GET",url:"/categories/list/?sort="+sort+"&status="+status+"&search="+search+"&limit="+limit+"&skip="+skip}).success(function(data){deferred.resolve(data)}).error(function(err){deferred.reject(err)}),deferred.promise}function CategoryList(limit,skip,sort,search){var deferred=$q.defer(),data={};return data.sort=sort,data.search=search,data.limit=limit,data.skip=skip,$http({method:"POST",url:"/admin/categories/lists",data:data}).success(function(data){deferred.resolve(data)}).error(function(err){deferred.reject(err)}),deferred.promise}function getsubCategoryList(limit,skip,sort,status,search){var deferred=$q.defer();return $http({method:"GET",url:"/subcategories/list/?sort="+sort+"&status="+status+"&search="+search+"&limit="+limit+"&skip="+skip}).success(function(data){deferred.resolve(data)}).error(function(err){deferred.reject(err)}),deferred.promise}function subCategoryList(limit,skip,sort,search){var deferred=$q.defer(),data={};return data.sort=sort,data.search=search,data.limit=limit,data.skip=skip,$http({method:"POST",url:"/admin/subCategories/lists",data:data}).success(function(data){deferred.resolve(data)}).error(function(err){deferred.reject(err)}),deferred.promise}function getCategory(id){var data={id:id},deferred1=$q.defer();$http({method:"GET",url:"/categories/getcatlistdropdown"}).success(function(data){deferred1.resolve(data)}).error(function(err){deferred1.reject(err)});var promise1=deferred1.promise,deferred2=$q.defer();$http({method:"POST",url:"/categories/edit/",data:data}).success(function(data){deferred2.resolve(data)}).error(function(err){deferred2.reject(err)});var promise2=deferred2.promise;return $q.all([promise1,promise2])}function getsubCategory(id){var data={id:id},deferred1=$q.defer();$http({method:"GET",url:"/categories/getsubcatlistdropdown"}).success(function(data){deferred1.resolve(data)}).error(function(err){deferred1.reject(err)});var promise1=deferred1.promise,deferred2=$q.defer();$http({method:"POST",url:"/categories/edit/",data:data}).success(function(data){deferred2.resolve(data)}).error(function(err){deferred2.reject(err)});var promise2=deferred2.promise;return $q.all([promise1,promise2])}function savecategory(data){var deferred=$q.defer();return Upload.upload({url:"/categories/savecategory",data:data}).then(function(data){deferred.resolve(data)},function(err){deferred.reject(err)}),deferred.promise}function savesubcategory(data){var deferred=$q.defer();return Upload.upload({url:"/categories/savesubcategory",data:data}).then(function(data){deferred.resolve(data)},function(err){deferred.reject(err)}),deferred.promise}function getSetting(){var deferred=$q.defer();return $http({method:"GET",url:"/subcategories/getSetting"}).success(function(data){deferred.resolve(data)}).error(function(err){deferred.reject(err)}),deferred.promise}var CategoryService={getCategoryList:getCategoryList,CategoryList:CategoryList,getsubCategoryList:getsubCategoryList,subCategoryList:subCategoryList,getCategory:getCategory,getsubCategory:getsubCategory,savecategory:savecategory,savesubcategory:savesubcategory,getSetting:getSetting};return CategoryService}function editPostheaderCtrl(toastr,$state,PostheaderService,postheaderServiceResolve,$stateParams){var ephc=this;ephc.editpostheaderData=postheaderServiceResolve,$stateParams.id?(ephc.action="edit",ephc.breadcrumb="SubMenu.EDIT_POSTHEADER"):(ephc.action="add",ephc.breadcrumb="SubMenu.ADD_POSTHEADER"),PostheaderService.getPostHeaderList().then(function(respo){ephc.postHeaderListCount=respo[1],$stateParams.id?ephc.submit=function(isValid){isValid?PostheaderService.save(ephc.editpostheaderData).then(function(response){11e3==response.code?toastr.error("Postheader Not Added Successfully"):(toastr.success("Postheader Updated Successfully"),$state.go("app.postheader.viewpostheader"))},function(err){toastr.error("Your credentials are gone"+err[0].msg)}):toastr.error("form is invalid")}:ephc.postHeaderListCount>=3?(toastr.error("Maximum Count for Postheader is 3, More Postheader Cannot be Added"),$state.go("app.postheader.viewpostheader")):ephc.submit=function(isValid){isValid?PostheaderService.save(ephc.editpostheaderData).then(function(response){11e3==response.code?toastr.error("Postheader Not Added Successfully"):"wrong"==response.data?toastr.error("Your Credentials are gone please login again....."):(toastr.success("Postheader Added Successfully"),$state.go("app.postheader.viewpostheader"))},function(err){toastr.error("Your credentials are gone");for(var i=0;i<err.length;i++)toastr.error("Your credentials are gone"+err[i].msg+"--"+err[i].param)}):toastr.error("form is invalid")}})}function viewPostHeaderCtrl(PostHeaderViewServiceResolve,PostheaderService,$scope){var tlc=this;tlc.permission=$scope.privileges.filter(function(menu){return"postheader"===menu.alias}).map(function(menu){return menu.status})[0];var layout=[{name:"Title",variable:"title",template:"{{content.title}}",sort:1},{name:"Image",template:'<img ng-src="{{content.image}}" alt="" class="size-50x50" style="border-radius: 0%;">'},{name:"Status ",template:'<span ng-switch="content.status"><span  ng-switch-when="1">Publish</span><span  ng-switch-when="2">UnPublish</span></span>'},{name:"Actions",template:'<button class="btn btn-info btn-rounded btn-ef btn-ef-5 btn-ef-5b" ng-if="options.permission.edit != false" ui-sref=app.postheader.addpostheader({action:"edit",id:content._id})><i class="fa fa-edit"></i> <span>Edit</span></button><button class="btn btn-danger btn-rounded btn-ef btn-ef-5 btn-ef-5b" ng-if="options.permission.delete != false" ng-click="CCC.openDeleteModal(small, content, options)" ><i class="fa fa-trash"></i> <span>Delete</span></button>'}];tlc.table={},tlc.table.layout=layout,tlc.table.data=PostHeaderViewServiceResolve[0],tlc.table.count=PostHeaderViewServiceResolve[1]||0,tlc.table["delete"]={permission:tlc.permission,service:"/postheader/deletepostheader",getData:function(currentPage,itemsPerPage,sort,status,search){var skip=(parseInt(currentPage)-1)*itemsPerPage;PostheaderService.getPostHeaderList(itemsPerPage,skip,sort,status,search).then(function(respo){tlc.table.data=respo[0],tlc.table.count=respo[1]})}}}function PostheaderService($http,$q,Upload){function getPostHeaderList(limit,skip,sort,search){var deferred=$q.defer(),data={};return data.sort=sort,data.search=search,data.limit=limit,data.skip=skip,$http({method:"POST",url:"/postheader/list",data:data}).success(function(data){deferred.resolve(data)}).error(function(err){deferred.reject(err)}),deferred.promise}function getPostheader(id){var data={id:id},deferred=$q.defer();return $http({method:"POST",url:"/postheader/edit",data:data}).success(function(data){deferred.resolve(data)}).error(function(err){deferred.reject(err)}),deferred.promise}function save(data){var deferred=$q.defer();return Upload.upload({url:"/postheader/save",data:data}).then(function(data){deferred.resolve(data)},function(err){deferred.reject(err)}),deferred.promise}var PostheaderService={save:save,getPostheader:getPostheader,getPostHeaderList:getPostHeaderList};return PostheaderService}function editFaqCtrl(faqEditReslove,FaqService,toastr,$state,$stateParams){var efc=this;efc.editFaqData={},efc.editFaqData=faqEditReslove,$stateParams.id?(efc.action="edit",efc.breadcrumb="SubMenu.EDIT_FAQ"):(efc.action="add",efc.breadcrumb="SubMenu.ADD_FAQ"),efc.submit=function(isValid){isValid?FaqService.save(efc.editFaqData).then(function(response){toastr.success("Faq Added Successfully"),$state.go("app.faq.list")},function(err){toastr.error("Your credentials are gone"+err[0].msg+"--"+err[0].param)}):toastr.error("form is invalid")}}function faqListCtrl(FaqServiceResolve,FaqService,$scope){var tlc=this;tlc.permission=$scope.privileges.filter(function(menu){return"faq"===menu.alias}).map(function(menu){return menu.status})[0];var layout=[{name:"Name",variable:"question",template:"{{content.question}}",sort:1},{name:"Status ",template:'<span  ng-switch="content.status"><span  ng-switch-when="1">Publish</span><span  ng-switch-when="2">UnPublish</span><span  ng-switch-when="3">Pending</span></span>'},{name:"Date",template:"{{content.updatedAt | clock : options.date }}"},{name:"Actions",template:'<button class="btn btn-info btn-rounded btn-ef btn-ef-5 btn-ef-5b" ng-if="options.permission.edit != false" ui-sref="app.faq.edit({id:content._id})"><i class="fa fa-edit"></i> <span>Edit</span></button><button class="btn btn-danger btn-rounded btn-ef btn-ef-5 btn-ef-5b" ng-if="options.permission.delete != false" ng-click="CCC.openDeleteModal(small, content, options)" ><i class="fa fa-trash"></i> <span>Delete</span></button>'}];tlc.table={},tlc.table.layout=layout,tlc.table.data=FaqServiceResolve[0],tlc.table.count=FaqServiceResolve[1]||0,tlc.table["delete"]={permission:tlc.permission,date:$scope.date,service:"/faq/delete",getData:function(currentPage,itemsPerPage,sort,status,search){if(currentPage>=1){var skip=(parseInt(currentPage)-1)*itemsPerPage;FaqService.getFaqList(itemsPerPage,skip,sort,status,search).then(function(respo){tlc.table.data=respo[0],tlc.table.count=respo[1]})}}}}function FaqService($http,$q,Upload){function getFaqList(limit,skip,sort,search){var deferred=$q.defer(),data={};return data.sort=sort,data.search=search,data.limit=limit,data.skip=skip,$http({method:"POST",url:"/faq/list/",data:data}).success(function(data){deferred.resolve(data)}).error(function(err){deferred.reject(err)}),deferred.promise}function getFaq(id){var data={id:id},deferred=$q.defer();return $http({method:"POST",url:"/faq/edit/",data:data}).success(function(data){deferred.resolve(data)}).error(function(err){deferred.reject(err)}),deferred.promise}function save(data){var deferred=$q.defer();return $http({method:"POST",url:"/faq/save",data:data}).then(function(data){deferred.resolve(data)},function(err){deferred.reject(err)}),deferred.promise}var FaqService={getFaqList:getFaqList,getFaq:getFaq,save:save};return FaqService}function editExperienceCtrl(ExperienceService,toastr,ExperienceEditReslove,$state,$stateParams){var eec=this;eec.editExperienceData=ExperienceEditReslove,$stateParams.id?(eec.action="edit",eec.breadcrumb="SubMenu.EDIT_EXPERIENCE"):(eec.action="add",eec.breadcrumb="SubMenu.ADD_EXPERIENCE"),eec.submit=function(isValid){isValid?ExperienceService.save(eec.editExperienceData).then(function(response){if(11e3==response.code)toastr.error("Experience Not Added Successfully");else if("wrong"==response.data)toastr.error("Your Credentials are gone please login again.....");else{if("edit"==eec.action)var action="edited";else var action="added";toastr.success("Experience "+action+" Successfully"),$state.go("app.tasker_management.experience.list")}},function(err){for(var i=0;i<err.length;i++)toastr.error("Your credentials are gone"+err[i].msg+"--"+err[i].param)}):toastr.error("form is invalid")}}function experienceListCtrl(experienceServiceResolve,ExperienceService,$scope){var tlc=this;tlc.permission=$scope.privileges.filter(function(menu){return"experience"===menu.alias}).map(function(menu){return menu.status})[0];var layout=[{name:"Name",variable:"name",template:"{{content.name}}",sort:1},{name:"Status ",template:'<span  ng-switch="content.status"><span  ng-switch-when="1">Publish</span><span  ng-switch-when="2">UnPublish</span><span  ng-switch-when="3">Pending</span></span>'},{name:"Date",template:"{{content.updatedAt| clock : options.date }}"},{name:"Actions",template:'<button class="btn btn-info btn-rounded btn-ef btn-ef-5 btn-ef-5b" ng-if="options.permission.edit != false" ui-sref="app.tasker_management.experience.edit({id:content._id})"><i class="fa fa-edit"></i> <span>Edit</span></button><button class="btn btn-danger btn-rounded btn-ef btn-ef-5 btn-ef-5b" ng-if="options.permission.delete != false" ng-click="CCC.openDeleteModal(small, content, options)" ><i class="fa fa-trash"></i> <span>Delete</span></button>'}];tlc.table={},tlc.table.layout=layout,tlc.table.data=experienceServiceResolve[0],tlc.table.count=experienceServiceResolve[1]||0,tlc.table["delete"]={permission:tlc.permission,date:$scope.date,service:"/experience/delete",getData:function(currentPage,itemsPerPage,sort,status,search){if(currentPage>=1){var skip=(parseInt(currentPage)-1)*itemsPerPage;ExperienceService.getExperienceList(itemsPerPage,skip,sort,status,search).then(function(respo){tlc.table.data=respo[0],tlc.table.count=respo[1]})}}}}function ExperienceService($http,$q,Upload){function getExperienceList(limit,skip,sort,search){var deferred=$q.defer(),data={};return data.sort=sort,data.search=search,data.limit=limit,data.skip=skip,$http({method:"POST",url:"/experience/list",data:data}).success(function(data){deferred.resolve(data)}).error(function(err){deferred.reject(err)}),deferred.promise}function getExperience(id){var data={id:id},deferred=$q.defer();return $http({method:"POST",url:"/experience/edit/",data:data}).success(function(data){deferred.resolve(data)}).error(function(err){deferred.reject(err)}),deferred.promise}function save(data){var deferred=$q.defer();return $http({method:"POST",url:"/experience/save",data:data}).then(function(data){deferred.resolve(data)},function(err){deferred.reject(err)}),deferred.promise}var ExperienceService={getExperienceList:getExperienceList,getExperience:getExperience,save:save};return ExperienceService}function editQuestionerCtrl(QuestionEditReslove,QuestionService,toastr,$state,$stateParams){var edqc=this;edqc.editQuestionData=QuestionEditReslove[0],$stateParams.id?(edqc.action="edit",edqc.breadcrumb="SubMenu.EDIT_QUESTION"):(edqc.action="add",edqc.breadcrumb="SubMenu.ADD_QUESTION"),edqc.submit=function(isValid){isValid?QuestionService.save(edqc.editQuestionData).then(function(response){
11e3==response.code?toastr.error("Question Not Added Successfully"):"wrong"==response.data?toastr.error("Your Credentials are gone please login again....."):(toastr.success("Question Added Successfully"),$state.go("app.tasker_management.question.viewsQuestion"))},function(err){for(var i=0;i<err.length;i++)toastr.error("Your credentials are gone"+err[i].msg+"--"+err[i].param)}):toastr.error("form is invalid")}}function viewQuestionCtrl(QuestionServiceResolve,QuestionService,$scope){var tlc=this;tlc.permission=$scope.privileges.filter(function(menu){return"questionmanagement"===menu.alias}).map(function(menu){return menu.status})[0];var layout=[{name:"Question",variable:"question",template:"{{content.question}}",sort:1},{name:"Status ",template:'<span ng-switch="content.status"><span  ng-switch-when="1">Publish</span><span  ng-switch-when="2">UnPublish</span></span>'},{name:"Actions",template:'<button class="btn btn-info btn-rounded btn-ef btn-ef-5 btn-ef-5b" ng-if="options.permission.edit != false" ui-sref=app.tasker_management.question.add({action:"edit",id:content._id})><i class="fa fa-edit"></i> <span>Edit</span></button><button class="btn btn-danger btn-rounded btn-ef btn-ef-5 btn-ef-5b" ng-if="options.permission.delete != false" ng-click="CCC.openDeleteModal(small, content, options)" ><i class="fa fa-trash"></i> <span>Delete</span></button>'}];tlc.table={},tlc.table.layout=layout,tlc.table.data=QuestionServiceResolve[0],tlc.table.count=QuestionServiceResolve[1]||0,tlc.table["delete"]={permission:tlc.permission,service:"/question/deletequestion",getData:function(currentPage,itemsPerPage,sort,status,search){var skip=(parseInt(currentPage)-1)*itemsPerPage;QuestionService.getQuestionList(itemsPerPage,skip,sort,status,search).then(function(respo){tlc.table.data=respo[0],tlc.table.count=respo[1]})}}}function QuestionService($http,$q,Upload){function getQuestionList(limit,skip,sort,search){var deferred=$q.defer(),data={};return data.sort=sort,data.search=search,data.limit=limit,data.skip=skip,$http({method:"POST",url:"/question/list",data:data}).success(function(data){deferred.resolve(data)}).error(function(err){deferred.reject(err)}),deferred.promise}function getQuestion(id){var data={id:id},deferred=$q.defer();return $http({method:"POST",url:"/question/edit",data:data}).success(function(data){deferred.resolve(data)}).error(function(err){deferred.reject(err)}),deferred.promise}function save(data){var deferred=$q.defer();return $http({method:"POST",url:"/question/save",data:data}).then(function(data){deferred.resolve(data)},function(err){deferred.reject(err)}),deferred.promise}var QuestionService={getQuestionList:getQuestionList,getQuestion:getQuestion,save:save};return QuestionService}function editTasksCtrl(TasksEditReslove,TasksService,toastr,$state,$filter,$scope){var edttc=this;if(edttc.editTasksData=TasksEditReslove[0],edttc.editTasksData.billing_address){for(var addressline1=edttc.editTasksData.billing_address.line1,myarr=addressline1.split(","),addressone=[],addresstwo=[],i=0;i<myarr.length;i++)0==i||1==i?addressone.push(myarr[i]):addresstwo.push(myarr[i]);edttc.addressone=addressone.toString(),edttc.addresstwo=addresstwo.toString()}for(var useraddressline1=edttc.editTasksData.tasker[0].address.line1,umyarr=useraddressline1.split(","),uaddressone=[],uaddresstwo=[],i=0;i<umyarr.length;i++)0==i||1==i?uaddressone.push(umyarr[i]):uaddresstwo.push(umyarr[i]);edttc.uaddressone=uaddressone.toString(),edttc.uaddresstwo=uaddresstwo.toString(),edttc.submit=function(isValid){isValid?TasksService.save(edttc.editTasksData).then(function(response){toastr.success("Question Added Successfully"),$state.go("app.tasks.viewsTasks")},function(err){toastr.error(err[0].msg)}):toastr.error("form is invalid")},TasksService.getTransaction(edttc.editTasksData._id).then(function(response){edttc.getTransaction=response})}function viewTasksCtrl(TasksServiceResolve,TasksService,$scope,toastr){var tlc=this;tlc.permission=$scope.privileges.filter(function(menu){return"tasks"===menu.alias}).map(function(menu){return menu.status})[0],TasksServiceResolve[2]&&(tlc.allValue=TasksServiceResolve[2].allValue||0,tlc.onGoingValue=TasksServiceResolve[2].onGoingValue||0,tlc.comlpleteValue=TasksServiceResolve[2].completedValue||0,tlc.cancellValue=TasksServiceResolve[2].cancelValue||0),$scope.statusValue=0,tlc.statusPass=function(status,limit,skip){$scope.statusValue=status,1!=status&&7!=status&&8!=status&&0!=status||TasksService.getTasksList(status,limit,skip).then(function(respo){tlc.table.data=respo[0],tlc.table.count=respo[1]||0,respo[2]&&(tlc.allValue=respo[2].allValue||0,tlc.onGoingValue=respo[2].onGoingValue||0,tlc.comlpleteValue=respo[2].completedValue||0,tlc.cancellValue=respo[2].cancelValue||0)})},TasksService.getSettings().then(function(response){tlc.getsetting=response}),tlc.exportTask=function(){TasksService.exportData().then(function(response){response.error?toastr.error("No data found to export"):window.location.href=tlc.getsetting.site_url+"tools/taskexport"},function(err){toastr.error(err)})};var layout=[{name:"Task ID",template:"{{content.booking_id}}"},{name:"Task Category",template:"{{content.category[0].name}}",sort:1,variable:"category"},{name:"User",template:"{{content.user[0].username}}"},{name:"Tasker",template:"{{content.tasker[0].username}}"},{name:"Status ",template:'<div ng-if="content.status==0">Delete</div><div ng-if="content.status==1">Onprogress </div><div ng-if="content.status==2">Accepted </div><div ng-if="content.status==3">StartOff </div><div ng-if="content.status==4">Arrived </div><div ng-if="content.status==5">StartJob </div><div ng-if="content.status==6">Payment Pending</div><div ng-if="content.status==7">Completed</div><div ng-if="content.status==8">Cancelled</div><div ng-if="content.status==9">Dispute</div><div ng-if="content.status==10">Search</div>'},{name:"Actions",template:'<button class="btn btn-info btn-rounded btn-ef btn-ef-5 btn-ef-5b" ng-if="options.permission.edit != false" ui-sref=app.tasks.add({action:"edit",id:content._id})><i class="fa fa-eye"></i> <span>View</span></button><button class="btn btn-danger btn-rounded btn-ef btn-ef-5 btn-ef-5b" ng-if="options.permission.delete != false" ng-click="CCC.openDeleteModal(small, content, options)" ><i class="fa fa-trash"></i> <span>Delete</span></button>'}];tlc.table={},tlc.table.layout=layout,tlc.table.data=TasksServiceResolve[0],tlc.table.count=TasksServiceResolve[1]||0,tlc.table["delete"]={permission:tlc.permission,service:"/tasks/deletequestion",getData:function(currentPage,itemsPerPage,sort,status,search){var skip=(parseInt(currentPage)-1)*itemsPerPage;TasksService.getTasksList($scope.statusValue,itemsPerPage,skip,sort,status,search).then(function(respo){tlc.table.data=respo[0],tlc.table.count=respo[1]})}}}function exportTasksCtrl(TasksExportReslove,TasksService,toastr,$state,$window){var edttc=this;edttc.editTasksData=TasksExportReslove[0],$state.go("app.tasks.viewsTasks"),$window.location.href=TasksExportReslove}function deletedTasksCtrl(DeletedTasksServiceResolve,TasksService,$scope,toastr){var tlc=this;tlc.permission=$scope.privileges.filter(function(menu){return"tasks"===menu.alias}).map(function(menu){return menu.status})[0],tlc.exportTask=function(){TasksService.exportData().then(function(response){response.error?toastr.error("No data found to export"):window.location.href=tlc.getsetting.site_url+"tools/taskexport"},function(err){toastr.error(err)})};var layout=[{name:"Task ID",template:"{{content.booking_id}}"},{name:"Task Category",template:"{{content.category[0].name}}",sort:1,variable:"category"},{name:"User",template:"{{content.user[0].username}}"},{name:"Tasker",template:"{{content.tasker[0].username}}"},{name:"Status ",template:'<div ng-if="content.status==0">Delete</div><div ng-if="content.status==1">Onprogress </div><div ng-if="content.status==2">Accepted </div><div ng-if="content.status==3">StartOff </div><div ng-if="content.status==4">Arrived </div><div ng-if="content.status==5">StartJob </div><div ng-if="content.status==6">Payment Pending</div><div ng-if="content.status==7">Completed</div><div ng-if="content.status==8">Cancelled</div><div ng-if="content.status==9">Dispute</div><div ng-if="content.status==10">Search</div>'},{name:"Actions",template:'<button class="btn btn-info btn-rounded btn-ef btn-ef-5 btn-ef-5b" ng-if="options.permission.edit != false" ui-sref=app.tasks.add({action:"edit",id:content._id})><i class="fa fa-edit"></i> <span>View</span></button>'}];tlc.table={},tlc.table.layout=layout,tlc.table.data=DeletedTasksServiceResolve[0],tlc.table.count=DeletedTasksServiceResolve[1]||0,tlc.table["delete"]={permission:tlc.permission,service:"/tasks/deletequestion",getData:function(currentPage,itemsPerPage,sort,status,search){var skip=(parseInt(currentPage)-1)*itemsPerPage;TasksService.getDeletedTasksList($scope.statusValue,itemsPerPage,skip,sort,status,search).then(function(respo){tlc.table.data=respo[0],tlc.table.count=respo[1]})}}}function TasksService($http,$q,Upload){function getTasksExport(){var deferred=$q.defer();return $http({method:"GET",url:"/tasks/taskexport"}).success(function(data){deferred.resolve(data)}).error(function(err){deferred.reject(err)}),deferred.promise}function exportData(){var deferred=$q.defer();return $http({method:"POST",url:"/tools/taskexport"}).success(function(data){deferred.resolve(data)}).error(function(err){deferred.reject(err)}),deferred.promise}function getTasksList(status,limit,skip,sort,search){var deferred=$q.defer(),data={};return data.status=status,data.sort=sort,data.search=search,data.limit=limit,data.skip=skip,$http({method:"POST",url:"/tasks/list",data:data}).success(function(data){deferred.resolve(data)}).error(function(err){deferred.reject(err)}),deferred.promise}function getTasks(id){var data={id:id},deferred=$q.defer();return $http({method:"POST",url:"/tasks/edit",data:data}).success(function(data){deferred.resolve(data)}).error(function(err){deferred.reject(err)}),deferred.promise}function save(data){var deferred=$q.defer();return $http({method:"POST",url:"/tasks/save",data:data}).then(function(data){deferred.resolve(data)},function(err){deferred.reject(err)}),deferred.promise}function getTransaction(id){var deferred=$q.defer();return $http({method:"POST",url:"/tasks/getTransaction",data:{id:id}}).success(function(data){deferred.resolve(data)}).error(function(err){deferred.reject(err)}),deferred.promise}function getSettings(){var deferred=$q.defer();return $http({method:"GET",url:"/settings/general"}).success(function(data){deferred.resolve(data)}).error(function(err){deferred.reject(err)}),deferred.promise}function getDeletedTasksList(status,limit,skip,sort,search){var deferred=$q.defer(),data={};return data.status=status,data.sort=sort,data.search=search,data.limit=limit,data.skip=skip,$http({method:"POST",url:"/tasks/deletedList",data:data}).success(function(data){deferred.resolve(data)}).error(function(err){deferred.reject(err)}),deferred.promise}var TasksService={getTasksList:getTasksList,getDeletedTasksList:getDeletedTasksList,getTasks:getTasks,exportData:exportData,getTasksExport:getTasksExport,save:save,getTransaction:getTransaction,getSettings:getSettings};return TasksService}function toolsCtrl(toastr,ToolsService,$stateParams){var gsc=this;ToolsService.getSettings().then(function(response){gsc.getsetting=response}),gsc.exportData=function(data){"Tasks"==data?ToolsService.exportData().then(function(response){response.error?toastr.error("No data found to export"):window.location.href=gsc.getsetting.site_url+"tools/taskexport"},function(err){toastr.error(err)}):"User"==data?ToolsService.exportuserData(data).then(function(response){response.error?toastr.error("No data found to export"):window.location.href=gsc.getsetting.site_url+"tools/exportuser"},function(err){toastr.error(err)}):"Taskers"==data?ToolsService.exporttaskerData(data).then(function(response){response.error?toastr.error("No data found to export"):window.location.href=gsc.getsetting.site_url+"tools/exporttasker"},function(err){toastr.error(err)}):ToolsService.exportTransactionData(data).then(function(response){response.error?toastr.error("No data found to export"):window.location.href=gsc.getsetting.site_url+"tools/exportTransactionData"},function(err){toastr.error(err)})}}function ToolsService($http,$q,Upload){function exportData(){var deferred=$q.defer();return $http({method:"POST",url:"/tools/taskexport"}).success(function(data){deferred.resolve(data)}).error(function(err){deferred.reject(err)}),deferred.promise}function exportuserData(){var deferred=$q.defer();return $http({method:"POST",url:"/tools/exportuser"}).success(function(data){deferred.resolve(data)}).error(function(err){deferred.reject(err)}),deferred.promise}function exporttaskerData(){var deferred=$q.defer();return $http({method:"POST",url:"/tools/exporttasker"}).success(function(data){deferred.resolve(data)}).error(function(err){deferred.reject(err)}),deferred.promise}function exportTransactionData(){var deferred=$q.defer();return $http({method:"POST",url:"/tools/exportTransactionData"}).success(function(data){deferred.resolve(data)}).error(function(err){deferred.reject(err)}),deferred.promise}function getSettings(){var deferred=$q.defer();return $http({method:"GET",url:"/settings/general"}).success(function(data){deferred.resolve(data)}).error(function(err){deferred.reject(err)}),deferred.promise}var ToolsService={exportData:exportData,exportuserData:exportuserData,exporttaskerData:exporttaskerData,exportTransactionData:exportTransactionData,getSettings:getSettings};return ToolsService}function generalSettingsCtrl(GeneralSettingsServiceResolve,TimeZoneSettingsServiceResolve,toastr,SettingsService){var gsc=this;gsc.generalSettings=GeneralSettingsServiceResolve[0],gsc.generalSettings.timenow=(new Date).getTime(),gsc.timezone=TimeZoneSettingsServiceResolve,gsc.time_format=["hh:mm a","HH:mm"],gsc.date_format=["MMMM Do, YYYY","YYYY-MM-DD","MM/DD/YYYY","DD/MM/YYYY"],gsc.time_format.indexOf(gsc.generalSettings.time_format)<0&&(gsc.customtime=gsc.generalSettings.time_format),gsc.date_format.indexOf(gsc.generalSettings.date_format)<0&&(gsc.customdate=gsc.generalSettings.date_format),gsc.clockFunc=function(){gsc.generalSettings.timezone=gsc.generalSettings.time_zone,gsc.generalSettings.format=gsc.generalSettings.date_format},gsc.datekeyFunc=function(){gsc.generalSettings.datekeyformat=gsc.generalSettings.date_format},gsc.submitGeneralSettings=function(isValid,data){isValid?(console.log("settings",data),SettingsService.editGeneralSettings(gsc.generalSettings).then(function(response){11e3==response.code?toastr.error("Setting Not Added Successfully"):toastr.success("General Settings Saved Successfully")},function(err){toastr.error("Your credentials are gone"+err.data[0].msg+"--"+err.data[0].param)})):toastr.error("form is invalid")},gsc.walletStatus=GeneralSettingsServiceResolve[0].wallet.status,1==gsc.walletStatus?gsc.walletStatus=!0:gsc.walletStatus=!1,gsc.walletStatusChange=function(value){gsc.data={},0==value?gsc.data.status=0:gsc.data.status=1,SettingsService.walletStatusChange(gsc.data).then(function(response){toastr.success("Wallet Setting Updated successfully")},function(err){err.msg?$scope.addAlert("danger",err.msg):toastr.error("Unable to save Wallet Settting")}),SettingsService.getGeneralSettings().then(function(response){gsc.generalSettings=response[0]})},gsc.cashStatus=GeneralSettingsServiceResolve[0].pay_by_cash.status,1==gsc.cashStatus?gsc.cashStatus=!0:gsc.cashStatus=!1,gsc.cashStatusChange=function(value){gsc.data={},0==value?gsc.data.status=0:gsc.data.status=1,SettingsService.cashStatusChange(gsc.data).then(function(response){toastr.success("Cash Setting Updated Successfully")},function(err){err.msg?$scope.addAlert("danger",err.msg):toastr.error("Unable to save Cash Setting")}),SettingsService.getGeneralSettings().then(function(response){gsc.generalSettings=response[0]})},gsc.referralStatus=GeneralSettingsServiceResolve[0].referral.status,1==gsc.referralStatus?gsc.referralStatus=!0:gsc.referralStatus=!1,gsc.referralStatusChange=function(value){gsc.data={},0==value?gsc.data.status=0:gsc.data.status=1,SettingsService.referralStatusChange(gsc.data).then(function(response){toastr.success("Referral Setting Updated Successfully")},function(err){err.msg?$scope.addAlert("danger",err.msg):toastr.error("Unable to save Referral Settting")}),SettingsService.getGeneralSettings().then(function(response){gsc.generalSettings=response[0]})},GeneralSettingsServiceResolve[0].categorycommission&&1==GeneralSettingsServiceResolve[0].categorycommission.status?(gsc.categorycomStatus=1,gsc.categorycomStatus=!0):(gsc.categorycomStatus=0,gsc.categorycomStatus=!1),gsc.categoryStatusChange=function(value){console.log("value",value),gsc.data={},0==value?gsc.data.status=0:gsc.data.status=1,SettingsService.categoryStatusChange(gsc.data).then(function(response){toastr.success("Admin Commission Base Changed")},function(err){err.msg?$scope.addAlert("danger",err.msg):toastr.error("Unable to change Admin Commission Base")}),SettingsService.getGeneralSettings().then(function(response){gsc.generalSettings=response[0]})}}function seoSettingsCtrl(SeoSettingsServiceResolve,SettingsService,toastr){var ssc=this;ssc.seoSettings=SeoSettingsServiceResolve[0],ssc.saveSeoSettings=function(isValid,data){isValid?SettingsService.saveSeoSettings(data).then(function(response){toastr.success("SEO Settings Saved Successfully")},function(err){for(var i=0;i<err.length;i++)toastr.error("Your credentials are gone"+err[i].msg+"--"+err[i].param)}):toastr.error("form is invalid")}}function mobileContentCtrl(mobileSettingsServiceResolve,SettingsService,toastr){var mcc=this;mcc.mobilecontent=mobileSettingsServiceResolve[0],mcc.mobileSave=function(isValid,data){isValid?SettingsService.mobileSave(data).then(function(response){toastr.success("Saved Successfully")},function(err){}):SettingsService.mobileSave(data).then(function(response){toastr.success("Saved Successfully")},function(err){})}}function widgetsCtrl(WidgetsServiceResolve,SettingsService,toastr){var wsc=this;wsc.Widgets=WidgetsServiceResolve[0],wsc.saveWidgets=function(data){SettingsService.saveWidgets(data).then(function(response){toastr.success("Widget settings saved Successfully")},function(err){toastr.error("Sorry, Something went wrong")})},SettingsService.getGeneralSettings().then(function(response){wsc.site_title=response[0].site_title})}function smtpSettingsCtrl(SMTPSettingsServiceResolve,SettingsService,toastr){var smtpsc=this;smtpsc.smtpSettings=SMTPSettingsServiceResolve[0],smtpsc.saveSMTPSettings=function(isValid,data){isValid?SettingsService.saveSMTPSettings(data).then(function(response){toastr.success("SMTP Settings Saved Successfully")},function(err){for(var i=0;i<err.length;i++)toastr.error("Your credentials are gone"+err[i].msg+"--"+err[i].param)}):toastr.error("form is invalid")}}function smsSettingsCtrl(SMSSettingsServiceResolve,SettingsService,toastr){var smsc=this;smsc.smsSettings=SMSSettingsServiceResolve[0],smsc.savesmsSettings=function(isValid,data){isValid?SettingsService.savesmsSettings(data).then(function(response){toastr.success("SMS Settings Saved Successfully")},function(err){for(var i=0;i<err.length;i++)toastr.error("Your credentials are gone"+err[i].msg+"--"+err[i].param)}):toastr.error("form is invalid")}}function currencySettingsListCtrl(CurrencyServiceResolve,CurrencyService,toastr,$window,$modal,MainService,$scope){var tlc=this;tlc.permission=$scope.privileges.filter(function(menu){return"settings"===menu.alias}).map(function(menu){return menu.status})[0];var layout=[{name:"Currency Name",template:"{{content.name}}",sort:1,variable:"name"},{name:"Currency Code",template:"{{content.code}}"},{name:"Currency Symbol ",template:"{{content.symbol}}"},{name:"Default",type:"currency"},{name:"Status ",template:'<span ng-switch="content.status"><span ng-switch-when="2">Unpublish</span><span  ng-switch-when="1">Publish</span></span>'},{name:"Actions",template:'<button class="btn btn-info btn-rounded btn-ef btn-ef-5 btn-ef-5b" ng-if="options.permission.edit != false" ui-sref=app.settings.currencySettings.add({action:"edit",id:content._id})><i class="fa fa-edit"></i> <span>Edit</span></button><button class="btn btn-danger btn-rounded btn-ef btn-ef-5 btn-ef-5b" ng-if="options.permission.delete != false" ng-click="CCC.openDeleteModal(small, content, options)" ><i class="fa fa-trash"></i> <span>Delete</span></button>'}];tlc.table={},tlc.table.layout=layout,tlc.table.data=CurrencyServiceResolve[0],tlc.table.count=CurrencyServiceResolve[1]||0,tlc.table["delete"]={permission:tlc.permission,service:"/settings/currency/delete",getData:function(currentPage,itemsPerPage,sort,status,search){var skip=(parseInt(currentPage)-1)*itemsPerPage;CurrencyService.getProductList(itemsPerPage,skip,sort,status,search).then(function(respo){tlc.table.data=respo[0],tlc.table.count=respo[1]})},currency:{"default":$scope.defaultCurrency,change:function(id){CurrencyService.selectDefault(id).then(function(response){toastr.success("Default Currency Changed")},function(err){toastr.error("Unable to save your data")})}}}}function languageSettingsListCtrl(languageServiceListResolve,languageService,MainService,toastr,$window,$modal,$scope){var tlc=this;tlc.permission=$scope.privileges.filter(function(menu){return"settings"===menu.alias}).map(function(menu){return menu.status})[0];var layout=[{name:"Language Name",template:"{{content.name}}",variable:"name",sort:1},{name:"Language Code",template:"{{content.code}}"},{name:"Default",type:"language"},{name:"Status",template:'<span ng-switch="content.status"><span ng-switch-when="2">Unpublish</span><span  ng-switch-when="1">Publish</span></span>'},{name:"Actions",template:'<button class="btn btn-info btn-rounded btn-ef btn-ef-5 btn-ef-5b" ng-if="options.permission.edit != false" ui-sref="app.settings.languageSettings.action({id:content._id})"><i class="fa fa-edit"></i> <span>Edit</span></button><button class="btn btn-info btn-rounded btn-ef btn-ef-5 btn-ef-5b" ng-if="options.permission.edit != false" ui-sref="app.settings.languageSettings.manage({langId:content.code})"><i class="fa fa-edit"></i> <span>Manage</span></button><button class="btn btn-danger btn-rounded btn-ef btn-ef-5 btn-ef-5b" ng-if="options.permission.delete != false" ng-click="CCC.openDeleteModal(small, content, options)" ><i class="fa fa-trash"></i> <span>Delete</span></button>'}];tlc.table={},tlc.table.layout=layout,tlc.table.data=languageServiceListResolve[0],tlc.table.count=languageServiceListResolve[1]||0,tlc.table["delete"]={permission:tlc.permission,service:"/settings/language/delete",getData:function(currentPage,itemsPerPage,sort,status,search){var skip=(parseInt(currentPage)-1)*itemsPerPage;languageService.getLanguageList(itemsPerPage,skip,sort,status,search).then(function(respo){tlc.table.data=respo[0],tlc.table.count=respo[1]})},language:{"default":$scope.defaultLanguage,change:function(id){languageService.selectDefault(id).then(function(response){400==response.status?toastr.error(response.message):(toastr.success("Default Language Changed"),location.reload())},function(err){toastr.error(err)})}}}}function languageSettingsManageCtrl(languageServiceManageResolve,toastr,languageService,$state,$stateParams){var lsmc=this;lsmc.translationKey=languageServiceManageResolve.data,lsmc.translationValue=languageServiceManageResolve.data,lsmc.currentPage=1,lsmc.entryLimit=10,lsmc.pageSizes=[5,10,50,100],lsmc.maxPaginationSize=3,lsmc.data={},lsmc.data.count=languageServiceManageResolve.total,lsmc.pageChange=function(current,limit){languageService.managelanguage($stateParams.langId,current,limit).then(function(response){lsmc.translationKey=response.data,lsmc.translationValue=response.data},function(err){toastr.error("Unable to save your data")})},lsmc.submitlanguageData=function(){languageService.submitlanguageDataCall($stateParams.langId,lsmc.translationValue).then(function(response){toastr.success("Language Submitted Successfully"),$state.go("app.settings.languageSettings.list",{},{reload:!0})},function(err){toastr.error("Unable to save your data")})}}function SocialNetworksSettingsCtrl(SocialNetworksSettingsServiceResolve,SettingsService,toastr){var snsc=this;console.log("SocialNetworksSettingsServiceResolve//////////",SocialNetworksSettingsServiceResolve[0]),snsc.SocialNetworksSettings={},snsc.SocialNetworksSettings.link=[],snsc.SocialNetworksSettings.link.facebook={},snsc.SocialNetworksSettings.link.twitter={},snsc.SocialNetworksSettings.link.linkedin={},snsc.SocialNetworksSettings.link.pinterest={},snsc.SocialNetworksSettings.link.youtube={},snsc.SocialNetworksSettings.link.google={},snsc.SocialNetworksSettings.mobileapp=[],snsc.SocialNetworksSettings.mobileapp.googleplay={},snsc.SocialNetworksSettings.mobileapp.appstore={},snsc.SocialNetworksSettings.link.facebook.name=SocialNetworksSettingsServiceResolve[0].link[0].name,snsc.SocialNetworksSettings.link.facebook.url=SocialNetworksSettingsServiceResolve[0].link[0].url,snsc.SocialNetworksSettings.link.facebook.facebookimage=SocialNetworksSettingsServiceResolve[0].link[0].img,snsc.SocialNetworksSettings.link.facebook.status=SocialNetworksSettingsServiceResolve[0].link[0].status,snsc.SocialNetworksSettings.link.twitter.name=SocialNetworksSettingsServiceResolve[0].link[1].name,snsc.SocialNetworksSettings.link.twitter.url=SocialNetworksSettingsServiceResolve[0].link[1].url,snsc.SocialNetworksSettings.link.twitter.twitterimage=SocialNetworksSettingsServiceResolve[0].link[1].img,snsc.SocialNetworksSettings.link.twitter.status=SocialNetworksSettingsServiceResolve[0].link[1].status,snsc.SocialNetworksSettings.link.linkedin.name=SocialNetworksSettingsServiceResolve[0].link[2].name,snsc.SocialNetworksSettings.link.linkedin.url=SocialNetworksSettingsServiceResolve[0].link[2].url,snsc.SocialNetworksSettings.link.linkedin.linkedinimage=SocialNetworksSettingsServiceResolve[0].link[2].img,snsc.SocialNetworksSettings.link.linkedin.status=SocialNetworksSettingsServiceResolve[0].link[2].status,snsc.SocialNetworksSettings.link.pinterest.name=SocialNetworksSettingsServiceResolve[0].link[3].name,snsc.SocialNetworksSettings.link.pinterest.url=SocialNetworksSettingsServiceResolve[0].link[3].url,snsc.SocialNetworksSettings.link.pinterest.pinterestimage=SocialNetworksSettingsServiceResolve[0].link[3].img,snsc.SocialNetworksSettings.link.pinterest.status=SocialNetworksSettingsServiceResolve[0].link[3].status,snsc.SocialNetworksSettings.link.youtube.name=SocialNetworksSettingsServiceResolve[0].link[4].name,snsc.SocialNetworksSettings.link.youtube.url=SocialNetworksSettingsServiceResolve[0].link[4].url,snsc.SocialNetworksSettings.link.youtube.youtubeimage=SocialNetworksSettingsServiceResolve[0].link[4].img,snsc.SocialNetworksSettings.link.youtube.status=SocialNetworksSettingsServiceResolve[0].link[4].status,snsc.SocialNetworksSettings.link.google.name=SocialNetworksSettingsServiceResolve[0].link[5].name,snsc.SocialNetworksSettings.link.google.url=SocialNetworksSettingsServiceResolve[0].link[5].url,snsc.SocialNetworksSettings.link.google.googleimage=SocialNetworksSettingsServiceResolve[0].link[5].img,snsc.SocialNetworksSettings.link.google.status=SocialNetworksSettingsServiceResolve[0].link[5].status,snsc.SocialNetworksSettings.mobileapp.googleplay.name=SocialNetworksSettingsServiceResolve[0].mobileapp[0].name,snsc.SocialNetworksSettings.mobileapp.googleplay.url=SocialNetworksSettingsServiceResolve[0].mobileapp[0].url,snsc.SocialNetworksSettings.mobileapp.googleplay.googleplayimage=SocialNetworksSettingsServiceResolve[0].mobileapp[0].img,snsc.SocialNetworksSettings.mobileapp.googleplay.status=SocialNetworksSettingsServiceResolve[0].mobileapp[0].status,snsc.SocialNetworksSettings.mobileapp.appstore.name=SocialNetworksSettingsServiceResolve[0].mobileapp[1].name,snsc.SocialNetworksSettings.mobileapp.appstore.url=SocialNetworksSettingsServiceResolve[0].mobileapp[1].url,snsc.SocialNetworksSettings.mobileapp.appstore.appstoreimage=SocialNetworksSettingsServiceResolve[0].mobileapp[1].img,snsc.SocialNetworksSettings.mobileapp.appstore.status=SocialNetworksSettingsServiceResolve[0].mobileapp[1].status,snsc.saveSocialNetworksSettings=function(valid,data){if(0==valid)toastr.error("Check the values");else{var dataValue={};data.link.facebook&&(dataValue.facebookimage=data.link.facebook.facebookimage,dataValue.facebookname=data.link.facebook.name,dataValue.facebookurl=data.link.facebook.url,dataValue.facebookstatus=data.link.facebook.status),data.link.twitter&&(dataValue.twitterimage=data.link.twitter.twitterimage,dataValue.twittername=data.link.twitter.name,dataValue.twitterurl=data.link.twitter.url,dataValue.twitterstatus=data.link.twitter.status),data.link.linkedin&&(dataValue.linkedinimage=data.link.linkedin.linkedinimage,dataValue.linkedinname=data.link.linkedin.name,dataValue.linkedinurl=data.link.linkedin.url,dataValue.linkedinstatus=data.link.linkedin.status),data.link.pinterest&&(dataValue.pinterestimage=data.link.pinterest.pinterestimage,dataValue.pinterestname=data.link.pinterest.name,dataValue.pinteresturl=data.link.pinterest.url,dataValue.pintereststatus=data.link.pinterest.status),data.link.youtube&&(dataValue.youtubeimage=data.link.youtube.youtubeimage,dataValue.youtubename=data.link.youtube.name,dataValue.youtubeurl=data.link.youtube.url,dataValue.youtubestatus=data.link.youtube.status),data.link.google&&(dataValue.googleimage=data.link.google.googleimage,dataValue.googlename=data.link.google.name,dataValue.googleurl=data.link.google.url,dataValue.googlestatus=data.link.google.status),data.mobileapp.googleplay&&(dataValue.googleplayimage=data.mobileapp.googleplay.googleplayimage,dataValue.googleplayname=data.mobileapp.googleplay.name,dataValue.googleplayurl=data.mobileapp.googleplay.url,dataValue.googleplaystatus=data.mobileapp.googleplay.status),data.mobileapp.appstore&&(dataValue.appstoreimage=data.mobileapp.appstore.appstoreimage,dataValue.appstorename=data.mobileapp.appstore.name,dataValue.appstoreurl=data.mobileapp.appstore.url,dataValue.appstorestatus=data.mobileapp.appstore.status),SettingsService.saveSocialNetworksSettings(dataValue).then(function(response){toastr.success("Social Networks Settings Saved Successfully")},function(err){toastr.error("Sorry, Something went wrong")})}}}function SettingsService($http,$q,Upload){function getGeneralSettings(){var deferred=$q.defer();return $http({method:"GET",url:"/settings/general"}).success(function(data){deferred.resolve([data,data.length])}).error(function(err){deferred.reject(err)}),deferred.promise}function mobileSave(data){var deferred=$q.defer();return $http({method:"POST",url:"/settings/mobilecontent/save",data:data}).success(function(data){deferred.resolve(data)}).error(function(err){deferred.reject(err)}),deferred.promise}function getmobileSettings(){var deferred=$q.defer();return $http({method:"GET",url:"/settings/mobile/content"}).success(function(data){deferred.resolve([data,data.length])}).error(function(err){deferred.reject(err)}),deferred.promise}function getTimeZoneSettings(){var deferred=$q.defer();return $http({method:"GET",url:"/settings/general/timezones"}).success(function(data){deferred.resolve(data)}).error(function(err){deferred.reject(err)}),deferred.promise}function editGeneralSettings(value){var deferred=$q.defer();return Upload.upload({url:"/settings/general/save",arrayKey:"",data:value}).then(function(data){deferred.resolve(data)},function(err){deferred.reject(err)}),deferred.promise}function getSeoSettings(){var deferred=$q.defer();return $http({method:"GET",url:"/settings/seo"}).success(function(data){deferred.resolve([data,data.length])}).error(function(err){deferred.reject(err)}),deferred.promise}function saveSeoSettings(data){var deferred=$q.defer();return $http({method:"POST",url:"/settings/seo/save",data:data}).success(function(data){deferred.resolve(data)}).error(function(err){deferred.reject(err)}),
deferred.promise}function getWidgets(){var deferred=$q.defer();return $http({method:"GET",url:"/settings/widgets"}).success(function(data){deferred.resolve([data,data.length])}).error(function(err){deferred.reject(err)}),deferred.promise}function saveWidgets(data){var deferred=$q.defer();return $http({method:"POST",url:"/settings/widgets/save",data:data}).success(function(data){deferred.resolve(data)}).error(function(err){deferred.reject(err)}),deferred.promise}function getSMTPSettings(){var deferred=$q.defer();return $http({method:"GET",url:"/settings/smtp"}).success(function(data){deferred.resolve([data,data.length])}).error(function(err){deferred.reject(err)}),deferred.promise}function saveSMTPSettings(data){var deferred=$q.defer();return $http({method:"POST",url:"/settings/smtp/save",data:data}).success(function(data){deferred.resolve(data)}).error(function(err){deferred.reject(err)}),deferred.promise}function getSMSSettings(){var deferred=$q.defer();return $http({method:"GET",url:"/settings/sms"}).success(function(data){deferred.resolve([data,data.length])}).error(function(err){deferred.reject(err)}),deferred.promise}function savesmsSettings(data){var deferred=$q.defer();return $http({method:"POST",url:"/settings/sms/save",data:data}).success(function(data){deferred.resolve(data)}).error(function(err){deferred.reject(err)}),deferred.promise}function getSocialNetworksSettings(){var deferred=$q.defer();return $http({method:"GET",url:"/settings/social-networks"}).success(function(data){deferred.resolve([data,data.length])}).error(function(err){deferred.reject(err)}),deferred.promise}function saveSocialNetworksSettings(data){var deferred=$q.defer();return Upload.upload({url:"/settings/social-networks/save",data:data}).then(function(data){deferred.resolve(data)},function(err){deferred.reject(err)}),deferred.promise}function walletStatusChange(data){var deferred=$q.defer();return $http({method:"POST",url:"/settings/walletSetting",data:data}).success(function(data){deferred.resolve(data)}).error(function(err){deferred.reject(err)}),deferred.promise}function categoryStatusChange(data){var deferred=$q.defer();return $http({method:"POST",url:"/settings/categorySetting",data:data}).success(function(data){deferred.resolve(data)}).error(function(err){deferred.reject(err)}),deferred.promise}function cashStatusChange(data){var deferred=$q.defer();return $http({method:"POST",url:"/settings/cashSetting",data:data}).success(function(data){deferred.resolve(data)}).error(function(err){deferred.reject(err)}),deferred.promise}function referralStatusChange(data){var deferred=$q.defer();return $http({method:"POST",url:"/settings/referralStatus",data:data}).success(function(data){deferred.resolve(data)}).error(function(err){deferred.reject(err)}),deferred.promise}var SettingsService={getGeneralSettings:getGeneralSettings,getTimeZoneSettings:getTimeZoneSettings,editGeneralSettings:editGeneralSettings,getSeoSettings:getSeoSettings,saveSeoSettings:saveSeoSettings,getWidgets:getWidgets,saveWidgets:saveWidgets,getSMTPSettings:getSMTPSettings,saveSMTPSettings:saveSMTPSettings,getSMSSettings:getSMSSettings,savesmsSettings:savesmsSettings,getSocialNetworksSettings:getSocialNetworksSettings,saveSocialNetworksSettings:saveSocialNetworksSettings,walletStatusChange:walletStatusChange,categoryStatusChange:categoryStatusChange,cashStatusChange:cashStatusChange,referralStatusChange:referralStatusChange,mobileSave:mobileSave,getmobileSettings:getmobileSettings};return SettingsService}function CurrencyService($http,$q){function getProductList(limit,skip,sort,search){var deferred=$q.defer(),data={};return data.sort=sort,data.search=search,data.limit=limit,data.skip=skip,$http({method:"POST",url:"/settings/currency/list",data:data}).success(function(data){deferred.resolve(data)}).error(function(err){deferred.reject(err)}),deferred.promise}function getCurrency(id){var data={id:id},deferred=$q.defer();return $http({method:"POST",url:"/settings/currency/edit",data:data}).success(function(data){deferred.resolve(data)}).error(function(err){deferred.reject(err)}),deferred.promise}function save(data){var deferred=$q.defer();return $http({method:"POST",url:"/settings/currency/save",data:data}).success(function(data){deferred.resolve(data)}).error(function(err){deferred.reject(err)}),deferred.promise}function selectDefault(id){var data={id:id},deferred=$q.defer();return $http({method:"POST",url:"/settings/currency/default/save",data:data}).success(function(data){deferred.resolve(data)}).error(function(err){deferred.reject(err)}),deferred.promise}function getDefault(){var deferred=$q.defer();return $http({method:"GET",url:"/settings/currency/default"}).success(function(data){deferred.resolve(data)}).error(function(err){deferred.reject(err)}),deferred.promise}var CurrencyService={getProductList:getProductList,getCurrency:getCurrency,save:save,selectDefault:selectDefault,getDefault:getDefault};return CurrencyService}function languageService($http,$q){function getLanguageList(limit,skip,sort,search){var deferred=$q.defer(),data={};return data.sort=sort,data.search=search,data.limit=limit,data.skip=skip,$http({method:"POST",url:"/settings/language/list",data:data}).success(function(data){deferred.resolve(data)}).error(function(err){deferred.reject(err)}),deferred.promise}function getLanguage(id){var deferred=$q.defer();return $http({method:"GET",url:"/settings/language/getlanguage/"+id}).success(function(data){deferred.resolve([data,data.length])}).error(function(err){deferred.reject(err)}),deferred.promise}function editlanguage(value){var deferred=$q.defer();return $http({method:"POST",url:"/settings/language/edit",data:value}).success(function(data){deferred.resolve(data)}).error(function(err){deferred.reject(err)}),deferred.promise}function managelanguage(value,current,limit){var deferred=$q.defer();return $http({method:"POST",url:"/settings/language/manage",data:{code:value,current:current,limit:limit}}).success(function(data){deferred.resolve(data)}).error(function(err){deferred.reject(err)}),deferred.promise}function submitlanguageDataCall(id,data){var deferred=$q.defer();return $http({method:"POST",url:"/settings/language/translation/save",data:{id:id,data:data}}).success(function(data){deferred.resolve(data)}).error(function(err){deferred.reject(err)}),deferred.promise}function selectDefault(id){var data={id:id},deferred=$q.defer();return $http({method:"POST",url:"/settings/language/default/save",data:data}).success(function(data){deferred.resolve(data)}).error(function(err){deferred.reject(err)}),deferred.promise}function getDefault(){var deferred=$q.defer();return $http({method:"GET",url:"/settings/language/default"}).success(function(data){deferred.resolve(data)}).error(function(err){deferred.reject(err)}),deferred.promise}var languageService={getLanguageList:getLanguageList,getLanguage:getLanguage,editlanguage:editlanguage,managelanguage:managelanguage,submitlanguageDataCall:submitlanguageDataCall,selectDefault:selectDefault,getDefault:getDefault};return languageService}function SubscriberListCtrl(SubscriberServiceResolve,SubscriberService,MainService,SubscriberMail,$window,$modal,$scope){var tlc=this;tlc.permission=$scope.privileges.filter(function(menu){return"newsletter"===menu.alias}).map(function(menu){return menu.status})[0];var layout=[{name:"Subscriber",variable:"email",template:"{{content.email}}",sort:1},{name:"Date",variable:"createdAt",template:"{{content.createdAt | date}}",sort:1},{name:"Actions",template:'<button class="btn btn-danger btn-rounded btn-ef btn-ef-5 btn-ef-5b" ng-if="options.permission.delete != false" ng-click="CCC.openDeleteModal(small, content, options)" ><i class="fa fa-trash"></i> <span>Delete</span></button>'}];tlc.table={},tlc.table.SubscriberMail=SubscriberMail,tlc.table.layout=layout,tlc.table.data=SubscriberServiceResolve[0],tlc.table.count=SubscriberServiceResolve[1]||0,tlc.table["delete"]={permission:tlc.permission,service:"/newsletter/subscriber/delete",getData:function(currentPage,itemsPerPage,sort,status,search){var skip=(parseInt(currentPage)-1)*itemsPerPage;SubscriberService.getSubscriberList(itemsPerPage,skip,sort,status,search).then(function(respo){tlc.table.data=respo[0],tlc.table.count=respo[1]})}}}function SubscriberService($http,$q){function getSubscriberList(limit,skip,sort,search){var deferred=$q.defer(),data={};return data.sort=sort,data.search=search,data.limit=limit,data.skip=skip,$http({method:"POST",url:"/newsletter/subscriber/list",data:data}).success(function(data){deferred.resolve(data)}).error(function(err){deferred.reject(err)}),deferred.promise}function getsubscripermail(){var deferred=$q.defer();return $http({method:"GET",url:"/emailtemplate/getsubscripermail"}).success(function(data){deferred.resolve(data)}).error(function(err){deferred.reject(err)}),deferred.promise}var SubscriberService={getSubscriberList:getSubscriberList,getsubscripermail:getsubscripermail};return SubscriberService}function editPaymentCtrl(PaymentGatewayEditServiceResolve,PaymentGatewayService,toastr,$state){var epaygc=this;null!=PaymentGatewayEditServiceResolve[0]?(epaygc.editPaymentData=PaymentGatewayEditServiceResolve[0],epaygc.editPaymentData.status=epaygc.editPaymentData.status.toString()):$state.go("app.paymentgateway.list",{},{reload:!0}),epaygc.submitPaymetData=function(isValid,data){isValid?PaymentGatewayService.save(data).then(function(response){if(response.errors)for(i=0;i<response.errors.length;i++)toastr.error(response.errors[i].msg);else toastr.success("Payment Gateway Settings Saved Sucessfully"),$state.go("app.paymentgateway.list")},function(err){toastr.error("Sorry, Something went wrong")}):toastr.error("Validation errors occurred. Please confirm the fields and submit it again.")}}function paymentGatewayCtrl(PaymentGatewayServiceResolve,PaymentGatewayService,$window,$scope){var tlc=this;tlc.permission=$scope.privileges.filter(function(menu){return"payment"===menu.alias}).map(function(menu){return menu.status})[0];var layout=[{name:"Gateway Name",variable:"gateway_name",template:"{{content.gateway_name}}",sort:1},{name:"Status",template:'<span ng-switch="content.status"><span ng-switch-when="2">Disabled</span><span  ng-switch-when="1">Enabled</span></span>'},{name:"Actions",template:'<button class="btn btn-info btn-rounded btn-ef btn-ef-5 btn-ef-5b" ng-if="options.permission.edit != false" ui-sref="app.paymentgateway.edit({id:content._id})"><i class="fa fa-edit"></i> <span>Edit</span></button>'}];tlc.table={},tlc.table.layout=layout,tlc.table.module="earnings",tlc.table.data=PaymentGatewayServiceResolve[0],tlc.table.count=PaymentGatewayServiceResolve[1]||0,tlc.table["delete"]={permission:tlc.permission,service:"",getData:function(currentPage,itemsPerPage,sort,status,search){var skip=(parseInt(currentPage)-1)*itemsPerPage;PaymentGatewayService.list(itemsPerPage,skip,sort,status,search).then(function(respo){tlc.table.data=respo[0],tlc.table.count=respo[1]})}}}function PaymentGatewayService($http,$q){function list(limit,skip,sort,search){var deferred=$q.defer(),data={};return data.sort=sort,data.search=search,data.limit=limit,data.skip=skip,$http({method:"POST",url:"/paymentGateway/list",data:data}).success(function(data){deferred.resolve(data)}).error(function(err){deferred.reject(err)}),deferred.promise}function edit(id){var data={id:id},deferred=$q.defer();return $http({method:"POST",url:"/paymentGateway/edit",data:data}).success(function(data){deferred.resolve(data)}).error(function(err){deferred.reject(err)}),deferred.promise}function save(data){var deferred=$q.defer();return $http({method:"POST",url:"/paymentGateway/save",data:data}).success(function(data){deferred.resolve(data)}).error(function(err){deferred.reject(err)}),deferred.promise}var PaymentGatewayService={list:list,edit:edit,save:save};return PaymentGatewayService}function editReviewsCtrl(ReviewsEditReslove,ReviewsService,toastr,$state){var edrc=this;edrc.editReviewData=ReviewsEditReslove[0],edrc.submit=function(isValid){isValid?ReviewsService.save(edrc.editReviewData).then(function(response){toastr.success("Review Added Successfully"),$state.go("app.reviews.list")},function(err){}):toastr.error("form is invalid")}}function viewReviewsCtrl(ReviewsServiceResolve,ReviewsService,$scope){var tlc=this;tlc.permission=$scope.privileges.filter(function(menu){return"reviews"===menu.alias}).map(function(menu){return menu.status})[0],ReviewsServiceResolve[2]&&(tlc.allValue=ReviewsServiceResolve[2].allValue||0,tlc.userValue=ReviewsServiceResolve[2].userValue||0,tlc.taskerValue=ReviewsServiceResolve[2].taskerValue||0),$scope.statusValue="all",tlc.statusPass=function(type,limit,skip){$scope.statusValue=type,"all"!=type&&"user"!=type&&"tasker"!=type||ReviewsService.getReviewsList(type,limit,skip).then(function(respo){tlc.table.data=respo[0],tlc.table.count=respo[1]||0,respo[2]&&(tlc.allValue=respo[2].allValue||0,tlc.userValue=respo[2].userValue||0,tlc.taskerValue=respo[2].taskerValue||0)})};var layout=[{name:"Review",template:'<rating readonly="true" ng-model="content.rating" max="5"></rating>',sort:1,variable:"rating"},{name:"Reviewed By",template:"<span>{{content.usertasker.username}} </span>",sort:1,variable:"user"},{name:"Type",template:"{{content.type}}"},{name:"Task ID",template:"{{content.task[0].booking_id}}"},{name:"Actions",template:'<button class="btn btn-info btn-rounded btn-ef btn-ef-5 btn-ef-5b" ng-if="options.permission.edit != false" ui-sref=app.reviews.action({action:"edit",id:content._id})><i class="fa fa-edit"></i> <span>Edit</span></button><button class="btn btn-danger btn-rounded btn-ef btn-ef-5 btn-ef-5b" ng-if="options.permission.delete != false" ng-click="CCC.openDeleteModal(small, content, options)" ><i class="fa fa-trash"></i> <span>Delete</span></button>'}];tlc.table={},tlc.table.layout=layout,tlc.table.data=ReviewsServiceResolve[0],tlc.table.count=ReviewsServiceResolve[1]||0,tlc.table["delete"]={permission:tlc.permission,service:"/reviews/deletereviews",getData:function(currentPage,itemsPerPage,sort,status,search){var skip=(parseInt(currentPage)-1)*itemsPerPage;ReviewsService.getReviewsList($scope.statusValue,itemsPerPage,skip,sort,status,search).then(function(respo){tlc.table.data=respo[0],tlc.table.count=respo[1]})}}}function ReviewsService($http,$q,Upload){function getReviewsList(type,limit,skip,sort,search){var deferred=$q.defer(),data={};return data.type=type,data.sort=sort,data.search=search,data.limit=limit,data.skip=skip,$http({method:"POST",url:"/reviews/list",data:data}).success(function(data){deferred.resolve(data)}).error(function(err){deferred.reject(err)}),deferred.promise}function getReviews(id){var data={id:id},deferred=$q.defer();return $http({method:"POST",url:"/reviews/edit",data:data}).success(function(data){deferred.resolve(data)}).error(function(err){deferred.reject(err)}),deferred.promise}function save(data){var deferred=$q.defer();return $http({method:"POST",url:"/reviews/save",data:data}).then(function(data){deferred.resolve(data)},function(err){deferred.reject(err)}),deferred.promise}var ReviewsService={getReviewsList:getReviewsList,getReviews:getReviews,save:save};return ReviewsService}function earningsCtrl(FirstCycleServiceResolve,CycleServiceResolve,TasksServiceResolve,EarningsServiceResolve,EarningService,$scope){var enc=this;enc.permission=$scope.privileges.filter(function(menu){return"earnings"===menu.alias}).map(function(menu){return menu.status})[0],console.log("EarningsServiceResolve[0]",EarningsServiceResolve[0]);var layout=[{name:"Tasker Name",variable:"username",template:"{{content.tasker.username}}",sort:1},{name:"Total Task",template:"{{content.count}}"},{name:"Total",template:"{{content.total | money : options.currency}}"},{name:"Coupon Amt",template:"{{content.coupon | money : options.currency }}"},{name:"Service Tax",template:"{{content.servicetax | money : options.currency }}"},{name:"Grand Total",template:"{{content.grandtotal| money : options.currency}}"},{name:"Site Earnings",template:"{{content.admin_commission| money : options.currency}}"},{name:"M.Amount",template:"{{content.extra_amount | money : options.currency}}"},{name:"Tasker Earnings",template:"{{((content.total - content.admin_commission) + content.extra_amount )| money : options.currency}}"},{name:"Actions",template:'<button class="btn btn-info btn-rounded btn-ef btn-ef-5 btn-ef-5b" ng-if="options.permission.view != false" ui-sref=app.earnings.view({action:"edit",id:content._id,cycle:options.cycle})><i class="fa fa-edit"></i> <span>View</span></button>'}];if(enc.table={},enc.table.module="earnings",enc.table.layout=layout,enc.table.data=EarningsServiceResolve[0],enc.task=TasksServiceResolve,enc.firstcycledata=FirstCycleServiceResolve,enc.cycledata=CycleServiceResolve,enc.tillnow=moment.tz(new Date,$scope.date.timezone).format($scope.date.format),enc.cycledata.length<=0)enc.task.createdAt?enc.billcycledate=moment.tz(new Date(enc.task.createdAt),$scope.date.timezone).format($scope.date.format):enc.billcycledate="";else if(enc.firstcycledata){var myString=enc.firstcycledata.billingcycyle,myArray=myString.split("-");enc.billcycledate=moment.tz(new Date(myArray[1]),$scope.date.timezone).format($scope.date.format)}enc.currentdate=new Date,enc.cday=enc.currentdate.getDate(),enc.sday=enc.currentdate.getDate(),enc.smonthIndex=enc.currentdate.getMonth()+1,enc.syear=enc.currentdate.getFullYear(),enc.table.count=EarningsServiceResolve[1]||0,enc.table["delete"]={cycle:enc.selected,permission:enc.permission,currency:$scope.currency,service:"/tasks/deletequestion",getData:function(currentPage,itemsPerPage,sort,search){var skip=(parseInt(currentPage)-1)*itemsPerPage;EarningService.getEarningList(itemsPerPage,skip,sort,search).then(function(respo){enc.table.data=respo[0],enc.table.count=respo[1]})}},enc.replacelist=function(){enc.table.layout=layout,EarningService.getEarningList(10,0,0,void 0,enc.selected).then(function(response){enc.table.data=response[0],enc.table.count=response[1],enc.table["delete"].cycle=enc.selected})}}function viewearningsCtrl($scope,TaskerEarningReslove,toastr,EarningService,PaidEarningsServiceResolve,$stateParams){var encc=this;$scope.taskerId=$stateParams.id,encc.billingCycle=$stateParams.cycle,encc.eraninglist=TaskerEarningReslove[0],encc.payDetails=PaidEarningsServiceResolve,encc.payDetails.total.extra_amount?encc.payDetails.tasker_extra_amount=encc.payDetails.total.extra_amount:encc.payDetails.tasker_extra_amount=0,encc.amtWithTasker=encc.payDetails.cash.admin_commission+encc.payDetails.cash.servicetax,encc.amtWithAdmin=encc.payDetails.gateway.total-encc.payDetails.gateway.admin_commission+encc.payDetails.gateway.extra_amount;var amounttosettle={};encc.amtWithAdmin>encc.amtWithTasker?(amounttosettle.by="admin",amounttosettle.to="tasker",amounttosettle.amount=encc.amtWithAdmin-encc.amtWithTasker):(amounttosettle.by="tasker",amounttosettle.to="admin",amounttosettle.amount=encc.amtWithTasker-encc.amtWithAdmin),encc.amounttosettle=amounttosettle;var layout=[{name:"Task id",template:"{{content.booking_id}}"},{name:"Task",template:"{{content.booking_information.service_type }}"},{name:"Total",template:"{{content.invoice.amount.total| money : options.currency }}"},{name:"Service Tax",template:"{{content.invoice.amount.service_tax | money : options.currency}}"},{name:"Coupon Amount",template:'<span ng-if="content.invoice.amount.coupon"><span>{{content.invoice.amount.coupon | money : options.currency}}</span></span><span ng-if="!content.invoice.amount.coupon"><span> {{ 0| money : options.currency}}</span></span>'},{name:"M.Amount",template:'<span ng-if="content.invoice.amount.extra_amount"><span>{{content.invoice.amount.extra_amount | money : options.currency}}</span></span><span ng-if="!content.invoice.amount.extra_amount"><span> {{ 0| money : options.currency}}</span></span>'},{name:"Grand Total",template:"{{content.invoice.amount.grand_total | money : options.currency}}"},{name:"Admin Commission",template:"{{content.invoice.amount.admin_commission | money : options.currency}}"},{name:"Tasker Earnings",template:"{{((content.invoice.amount.total - content.invoice.amount.admin_commission) + content.invoice.amount.extra_amount) | money : options.currency}}"},{name:"Payment Type",template:"{{content.payment_type}}"},{name:"Paid",template:"{{content.payee_status == '1' ? 'Yes' : 'No' }}"}];encc.table={},encc.table.module="earnings",encc.table.layout=layout,encc.table.data=TaskerEarningReslove[0],encc.table.count=encc.table.data.length,encc.table["delete"]={date:$scope.date,permission:encc.permission,currency:$scope.currency,service:"/tasks/deletequestion",getData:function(currentPage,itemsPerPage,sort,search){var skip=(parseInt(currentPage)-1)*itemsPerPage,data={};data.tasker=$stateParams.id,data.cycle=$stateParams.cycle,EarningService.getTaskrearning(data,itemsPerPage,skip,sort,search).then(function(respo){encc.table.data=respo[0]})}},encc.paytasker=function(){var data={};data.tasker=encc.payDetails.tasker._id,data.billing_cycle=encc.billingCycle,data.invoice={},data.invoice.cash=encc.payDetails.cash,data.invoice.gateway=encc.payDetails.gateway,data.invoice.total=encc.payDetails.total,data.task_count=encc.payDetails.count,data.payment=encc.amounttosettle,EarningService.updatepayee(data).then(function(response){encc.payDetails.total.paid_count=encc.payDetails.total.paid_count+response.nModified,toastr.success("Payment Successfully Updated")},function(err){toastr.error("Unable to save your data")})}}function EarningService($http,$q){function getTaskrearning(sitedata,limit,skip,sort,search){var data={};data.data=sitedata,data.sort=sort,data.search=search,data.limit=limit,data.skip=skip;var deferred=$q.defer();return $http({method:"POST",url:"/tasker/edit/earning",data:data}).success(function(data){deferred.resolve(data)}).error(function(err){deferred.reject(err)}),deferred.promise}function getEarningList(limit,skip,sort,search,data){var dataValue={sort:sort,status:status,search:search,limit:limit,skip:skip,data:data},deferred=$q.defer();return $http({method:"POST",url:"/earnings/list",data:dataValue}).success(function(data){deferred.resolve(data)}).error(function(err){deferred.reject(err)}),deferred.promise}function updatepayee(data){var deferred=$q.defer();return $http({method:"POST",url:"/tasker/edit/updatepayee",data:data}).success(function(data){deferred.resolve(data)}).error(function(err){deferred.reject(err)}),deferred.promise}function paidserivce(data){var deferred=$q.defer();return $http({method:"POST",url:"/earnings/paidserivce",data:data}).success(function(data){deferred.resolve(data)}).error(function(err){deferred.reject(err)}),deferred.promise}function getfirsttask(){var deferred=$q.defer();return $http({method:"GET",url:"/tasks/firsttask"}).success(function(data){deferred.resolve(data)}).error(function(err){deferred.reject(err)}),deferred.promise}function getcyclelist(){var deferred=$q.defer();return $http({method:"GET",url:"/earnings/cyclelist"}).success(function(data){deferred.resolve(data)}).error(function(err){deferred.reject(err)}),deferred.promise}function getcyclefirst(){var deferred=$q.defer();return $http({method:"GET",url:"/earnings/getcyclefirst"}).success(function(data){deferred.resolve(data)}).error(function(err){deferred.reject(err)}),deferred.promise}var EarningService={getEarningList:getEarningList,getTaskrearning:getTaskrearning,updatepayee:updatepayee,paidserivce:paidserivce,getfirsttask:getfirsttask,getcyclelist:getcyclelist,getcyclefirst:getcyclefirst};return EarningService}function customContentCtrl($scope,$modal,toastr){var ccc=this;ccc.openDeleteModal=function(size,data,options){var modalInstance=$modal.open({templateUrl:"app/admin/modules/common/views/modal/delete_confirm.html",controller:"DeleteTestCtrl",size:size,resolve:{DataVariable:function(){return data},OptionsVariable:function(){return options}}});modalInstance.result.then(function(selectedItem){$scope.predicate||($scope.predicate="createdAt");var sort={field:$scope.predicate,order:$scope.reverse};options.getData($scope.currentpage,$scope.entrylimit,sort,$scope.usertablesearch)},function(){})}}function customTableCtrl($modal,toastr,$scope,$attrs,MainService){var ctc=this;if(ctc.predicate="",ctc.reverse=-1,ctc.filterDataArray){ctc.temp={data:{},alias:{}};for(var k=0;k<ctc.filterDataArray.length;k++)ctc.temp.data[ctc.filterDataArray[k].name]=0,ctc.temp.alias[ctc.filterDataArray[k].name]=ctc.filterDataArray[k].alias;for(var j=0;j<ctc.dataLength;j++){ctc.data[j].selected=!1;for(var i=0;i<ctc.filterDataArray.length;i++)ctc.data[j][ctc.filterDataArray[i].variable]==ctc.filterDataArray[i].name&&ctc.temp.data[ctc.filterDataArray[i].name]++,"all"==ctc.filterDataArray[i].name&&ctc.temp.data[ctc.filterDataArray[i].name]++}}if(ctc.order=function(predicate){ctc.unSelectAll(),ctc.predicate=predicate,ctc.reverse=1==ctc.reverse?-1:1,ctc.sort={field:predicate,order:ctc.reverse},ctc.data["delete"].getData(ctc.currentPage,ctc.entryLimit,ctc.sort)},ctc.totalItems=parseInt(ctc.data.count)||0,ctc.currentPage=1,ctc.entryLimit=10,ctc.pageSizes=[5,10,50,100],ctc.maxPaginationSize=3,ctc.maxSize=Math.ceil(ctc.totalItems/ctc.entryLimit),ctc.selectAll=function(el,cp){angular.forEach(ctc.data.data,function(user,key){user.selected=ctc.selectedAll})},ctc.selectCheck=function(data){0==data.selected&&(ctc.selectedAll=!1)},ctc.unSelectAll=function(){angular.forEach(ctc.data.data,function(data){1==data.selected&&(ctc.selectedAll=!1,data.selected=!1)})},ctc.pageChange=function(currentPage,entryLimit,search){ctc.data["delete"].getData(currentPage,entryLimit,ctc.sort,search)},MainService.getmessagetemplate().then(function(response){ctc.messagetemplate=response}),MainService.getmailtemplate().then(function(response){ctc.mailtemplate=response}),ctc.sendbulkmail=function(value,value1,value2,template){for(var delvalue=[],i=0;i<value1.length;i++)1==value1[i].selected&&delvalue.push(value1[i]._id);""==delvalue?toastr.error("Please select atleast one user"):void 0==template?toastr.error("Please select one template to send"):MainService.sendbulkmail(delvalue,template).then(function(response){response&&toastr.success("Success")},function(error){toastr.error("Deleted Failed")})},ctc.openDeleteModal=function(action,data,options){if("delete"==action){var modalInstance=$modal.open({templateUrl:"app/admin/modules/common/views/modal/delete_confirm.html",controller:"DeleteTestCtrl",resolve:{DataVariable:function(){return data},OptionsVariable:function(){return options}}});modalInstance.result.then(function(selectedItem){ctc.predicate||(ctc.predicate="createdAt");var sort={field:ctc.predicate,order:ctc.reverse};options.getData(ctc.currentPage,ctc.entryLimit,sort,ctc.userTableSearch)},function(){})}},ctc.sendmail=function(data,type){if(ctc.toastrValue=!1,data.filter(function(value){value.selected&&1==value.selected&&(ctc.toastrValue=!0)}),1==ctc.toastrValue){$modal.open({templateUrl:"app/admin/modules/common/views/modal/mail.html",controller:"SendMailCtrl",resolve:{DataVariable:function(){return data},Type:function(){return type},Email:function(){return ctc.mailtemplate}}})}else toastr.error("Please select Mail Id To Send")},ctc.sendnotification=function(data,type){if(ctc.toastrValue=!1,data.filter(function(value){value.selected&&1==value.selected&&(ctc.toastrValue=!0)}),1==ctc.toastrValue){$modal.open({templateUrl:"app/admin/modules/common/views/modal/message.html",controller:"SendMessageCtrl",resolve:{DataVariable:function(){return data},Type:function(){return type},Message:function(){return ctc.messagetemplate}}})}else toastr.error("Please select Mail Id To Send")},ctc.filterDataArray){ctc.temp={data:{},alias:{},count:{}};for(var k=0;k<ctc.filterDataArray.length;k++)ctc.temp.data[ctc.filterDataArray[k].name]=0,ctc.temp.alias[ctc.filterDataArray[k].name]=ctc.filterDataArray[k].alias,ctc.temp.count[ctc.filterDataArray[k].name]=ctc.filterDataArray[k].count;for(var j=0;j<ctc.data.length;j++){ctc.data[j].selected=!1;for(var i=0;i<ctc.filterDataArray.length;i++)ctc.temp.data[ctc.filterDataArray[i].name]=ctc.filterDataArray[i].count}}}function DeleteTestCtrl($scope,MainService,$modalInstance,DataVariable,OptionsVariable,toastr){$scope.data=DataVariable,$scope.deleteData=function(){if(DataVariable.constructor===Array)for(var delvalue=[],i=0;i<$scope.data.length;i++)1==$scope.data[i].selected&&delvalue.push($scope.data[i]._id);else if($scope.data._id)var delvalue=$scope.data._id;else var delvalue=$scope.data.name;MainService.deleteDataCall(OptionsVariable.service,delvalue).then(function(response){toastr.success("Deleted successfully"),$modalInstance.close()},function(error){error.message?(toastr.error(error.message),$modalInstance.close()):(toastr.error("Select Option to Delete"),$modalInstance.close())})},$scope.cancel=function(){$modalInstance.close()}}function SendMailCtrl($scope,MainService,$modalInstance,toastr,Email,DataVariable,Type){$scope.emailtemplate=Email,$scope.cancel=function(){$modalInstance.close()},$scope.sendtemplatemail=function(template){for(var delvalue=[],i=0;i<DataVariable.length;i++)1==DataVariable[i].selected&&delvalue.push(DataVariable[i]._id);0==delvalue.length&&toastr.error("Please select one user"),void 0==template?toastr.error("Please select one template to send"):MainService.sendmessagemail(delvalue,template,Type).then(function(response){response&&(toastr.success("Success"),$modalInstance.close())},function(error){toastr.error("Deleted Failed")})}}function SendMessageCtrl($scope,MainService,$modalInstance,toastr,Message,DataVariable,Type){$scope.emailtemplate=Message,$scope.cancel=function(){$modalInstance.close()},$scope.sendmessagemail=function(template){for(var delvalue=[],i=0;i<DataVariable.length;i++)1==DataVariable[i].selected&&delvalue.push(DataVariable[i]._id);0==delvalue.length&&toastr.error("Please select one user"),void 0==template?toastr.error("Please select one template to send"):MainService.sendmessage(delvalue,template,Type).then(function(response){response&&(toastr.success("Success"),$modalInstance.close())},function(error){toastr.error("Deleted Failed")})}}function cancellationService($http,$q,Upload){function getCancellationList(limit,skip,sort,search){var deferred=$q.defer(),data={};return data.sort=sort,data.search=search,data.limit=limit,data.skip=skip,$http({method:"POST",url:"/cancellation/list",data:data}).success(function(data){deferred.resolve(data)}).error(function(err){deferred.reject(err)}),deferred.promise}function getCancellation(id){var data={id:id},deferred=$q.defer();return $http({method:"POST",url:"/cancellation/edit",data:data}).success(function(data){deferred.resolve(data)}).error(function(err){deferred.reject(err)}),deferred.promise}function save(data){var deferred=$q.defer();return $http({method:"POST",url:"/cancellation/save",data:data}).then(function(data){deferred.resolve(data)},function(err){deferred.reject(err)}),deferred.promise}var cancellationService={getCancellationList:getCancellationList,getCancellation:getCancellation,save:save};return cancellationService}function cancellationCtrl(cancellationResolve,cancellationService,$scope){var cal=this;cal.permission=$scope.privileges.filter(function(menu){return"cancellation"===menu.alias}).map(function(menu){return menu.status})[0];var layout=[{name:"Reason",template:"{{content.reason}}"},{name:"Type",template:"{{content.type}}",variable:"type",sort:1},{name:"Status ",template:'<div ng-if="content.status==2">Inactive</div> <div ng-if="content.status==1">Active </div>'},{name:"Actions",template:'<button class="btn btn-info btn-rounded btn-ef btn-ef-5 btn-ef-5b" ng-if="options.permission.edit != false" ui-sref=app.cancellation.edit({action:"edit",id:content._id})><i class="fa fa-edit"></i> <span>Edit</span></button><button class="btn btn-danger btn-rounded btn-ef btn-ef-5 btn-ef-5b" ng-if="options.permission.delete != false" ng-click="CCC.openDeleteModal(small, content, options)" ><i class="fa fa-trash"></i> <span>Delete</span></button>'
}];cal.table={},cal.table.layout=layout,cal.table.data=cancellationResolve[0],cal.table.count=cancellationResolve[1]||0,cal.table["delete"]={permission:cal.permission,service:"/cancellation/deletecancellation",getData:function(currentPage,itemsPerPage,sort,status,search){var skip=(parseInt(currentPage)-1)*itemsPerPage;cancellationService.getCancellationList(itemsPerPage,skip,sort,status,search).then(function(respo){cal.table.data=respo[0],cal.table.count=respo[1]})}}}function editCancellationCtrl(editcancellationResolve,cancellationService,$scope,toastr,$state,$stateParams){var ecal=this;ecal.editData=editcancellationResolve[0],$stateParams.id?(ecal.action="Edit",ecal.breadcrumb="SubMenu.CANCELLATION"):(ecal.action="Add",ecal.breadcrumb="SubMenu.CANCELLATION"),ecal.submit=function(isValid){isValid?cancellationService.save(ecal.editData).then(function(response){if(11e3==response.code)toastr.error("Coupon Code Not Added Successfully");else if("wrong"==response.data)toastr.error("Your Credentials are gone please login again.....");else{if("edit"==ecal.action)var action="edited";else var action="added";toastr.success("Cancellation reason "+action+" Successfully"),$state.go("app.cancellation.list")}},function(err){for(var i=0;i<err.length;i++)toastr.error("Your credentials are gone"+err[i].msg+"--"+err[i].param)}):toastr.error("form is invalid")}}function NotificationemailCtrl(emailEditReslove,toastr,emailService,$state,$stateParams){var nelc=this;nelc.templateData=emailEditReslove[0],$stateParams.id?(nelc.action="edit",nelc.breadcrumb="SubMenu.EMAILTEMPLATE_EDIT"):(nelc.action="add",nelc.breadcrumb="SubMenu.EMAILTEMPLATE_ADD"),nelc.submitTemplateEditData=function(isValid,data){isValid?emailService.editnotificationTemplate(data).then(function(response){11e3==response.code?toastr.error("Notification Not Added Successfully"):(toastr.success("Notification Updated Successfully"),$state.go("app.pushnotifications.templates"))},function(err){toastr.error("Your credentials are gone"+err[0].msg)}):toastr.error("Please fill all mandatory fields")}}function NotificationListCtrl($scope,NotificationListServiceResolve,notificationListService){var nlc=this;nlc.permission=$scope.privileges.filter(function(menu){return"notification"===menu.alias}).map(function(menu){return menu.status})[0];var layout=[{name:"Name",variable:"name",template:"{{content.name}}",sort:1},{name:"Type",variable:"type",template:"{{content.notificationtype}}",sort:1},{name:"Actions",template:'<button class="btn btn-info btn-rounded btn-ef btn-ef-5 btn-ef-5b" ng-if="options.permission.edit != false " ui-sref="app.pushnotifications.email({id:content._id})"><i class="fa fa-edit"></i> <span>Edit</span></button><button class="btn btn-danger btn-rounded btn-ef btn-ef-5 btn-ef-5b" ng-if="options.permission.delete != false" ng-click="CCC.openDeleteModal(small, content, options)" ><i class="fa fa-trash"></i> <span>Delete</span></button>'}];nlc.table={},nlc.table.layout=layout,nlc.table.data=NotificationListServiceResolve[0],nlc.table.count=NotificationListServiceResolve[1]||[0],nlc.table["delete"]={permission:nlc.permission,service:"/notification/deletenotification",getData:function(currentPage,itemsPerPage,sort,status,search){if(currentPage>=1){var skip=(parseInt(currentPage)-1)*itemsPerPage;notificationListService.getNotificationsList(itemsPerPage,skip,sort,status,search).then(function(respo){nlc.table.data=respo[0],nlc.table.count=respo[1]})}}}}function UserListCtrl(UsernotificationServiceResolve,UsernotificationService,emailEditReslove,emailService,messageEditReslove,$window,$modal,$scope){var ulc=this;ulc.permission=$scope.privileges.filter(function(menu){return"notification"===menu.alias}).map(function(menu){return menu.status})[0];var layout=[{name:"User",variable:"email",template:"{{content.email}}",sort:1}],ulc=this;ulc.table={},ulc.table.layout=layout,ulc.table.module="earnings",ulc.table.maildata=emailEditReslove[0],ulc.table.messagedata=messageEditReslove[0],ulc.table.data=UsernotificationServiceResolve[0],ulc.table.count=UsernotificationServiceResolve[1]||0,ulc.table["delete"]={permission:ulc.permission,service:"/newsletter/subscriber/delete",getData:function(currentPage,itemsPerPage,sort,status,search){var skip=(parseInt(currentPage)-1)*itemsPerPage;UsernotificationService.getUserList(itemsPerPage,skip,sort,status,search).then(function(respo){ulc.table.data=respo[0],ulc.table.count=respo[1]})}}}function TaskerListCtrl(TaskernotificationServiceResolve,TaskernotificationService,$window,$modal,$scope){var tlc=this;tlc.permission=$scope.privileges.filter(function(menu){return"notification"===menu.alias}).map(function(menu){return menu.status})[0];var layout=[{name:"Tasker",variable:"email",template:"{{content.email}}",sort:1}],tlc=this;tlc.table={},tlc.table.module="earnings",tlc.table.layout=layout,tlc.table.data=TaskernotificationServiceResolve[0],tlc.table.count=TaskernotificationServiceResolve[1]||0,tlc.table["delete"]={permission:tlc.permission,service:"/newsletter/subscriber/delete",getData:function(currentPage,itemsPerPage,sort,status,search){var skip=(parseInt(currentPage)-1)*itemsPerPage;TaskernotificationService.getTaskerList(itemsPerPage,skip,sort,status,search).then(function(respo){tlc.table.data=respo[0],tlc.table.count=respo[1]})}}}function notificationListService($http,$q){function getNotificationsList(limit,skip,sort,search){var deferred=$q.defer(),data={};return data.sort=sort,data.search=search,data.limit=limit,data.skip=skip,$http({method:"POST",url:"/notification/email-template/list",data:data}).success(function(data){deferred.resolve(data)}).error(function(err){deferred.reject(err)}),deferred.promise}function getNotificationemail(id){var data={id:id},deferred=$q.defer();return $http({method:"POST",url:"/notification/email-template/edit",data:data}).success(function(data){deferred.resolve([data])}).error(function(err){deferred.reject(err)}),deferred.promise}var notificationListService={getNotificationsList:getNotificationsList,getNotificationemail:getNotificationemail};return notificationListService}function emailService($http,$q){function getTemplateList(limit,skip,sort,search){var deferred=$q.defer(),data={};return data.sort=sort,data.search=search,data.limit=limit,data.skip=skip,$http({method:"POST",url:"/email-template/list",data:data}).success(function(data){deferred.resolve(data)}).error(function(err){deferred.reject(err)}),deferred.promise}function getNotificationemail(id){var data={id:id},deferred=$q.defer();return $http({method:"POST",url:"/notification/email-template/edit",data:data}).success(function(data){deferred.resolve([data])}).error(function(err){deferred.reject(err)}),deferred.promise}function editnotificationTemplate(data){var deferred=$q.defer();return $http({method:"POST",url:"/notification/email-template/save",data:data}).success(function(data){deferred.resolve(data)}).error(function(err){deferred.reject(err)}),deferred.promise}function getmailtemplate(){var deferred=$q.defer();return $http({method:"GET",url:"/notification/email-template/getmailtemplate"}).success(function(data){deferred.resolve(data)}).error(function(err){deferred.reject(err)}),deferred.promise}function getmessagetemplate(){var deferred=$q.defer();return $http({method:"GET",url:"/notification/email-template/getmessagetemplate"}).success(function(data){deferred.resolve(data)}).error(function(err){deferred.reject(err)}),deferred.promise}var emailService={getTemplateList:getTemplateList,editnotificationTemplate:editnotificationTemplate,getNotificationemail:getNotificationemail,getmessagetemplate:getmessagetemplate,getmailtemplate:getmailtemplate};return emailService}function UsernotificationService($http,$q){function getUserList(limit,skip,sort,search){var deferred=$q.defer(),data={};return data.sort=sort,data.search=search,data.limit=limit,data.skip=skip,$http({method:"POST",url:"/notification/user/list/",data:data}).success(function(data){deferred.resolve(data)}).error(function(err){deferred.reject(err)}),deferred.promise}var UsernotificationService={getUserList:getUserList};return UsernotificationService}function TaskernotificationService($http,$q){function getTaskerList(limit,skip,sort,search){var deferred=$q.defer(),data={};return data.sort=sort,data.search=search,data.limit=limit,data.skip=skip,$http({method:"POST",url:"/notification/tasker/list/",data:data}).success(function(data){deferred.resolve(data)}).error(function(err){deferred.reject(err)}),deferred.promise}var TaskernotificationService={getTaskerList:getTaskerList};return TaskernotificationService}angular.module("Authentication",[]),angular.module("quickRabbit.administrator",[]),angular.module("quickRabbit.users",[]),angular.module("quickRabbit.taskers",[]),angular.module("quickRabbit.dashboard",[]),angular.module("quickRabbit.pages",[]),angular.module("quickRabbit.sliders",[]),angular.module("quickRabbit.coupons",[]),angular.module("quickRabbit.emailTemplate",[]),angular.module("quickRabbit.categories",[]),angular.module("quickRabbit.faq",[]),angular.module("quickRabbit.experience",[]),angular.module("quickRabbit.question",[]),angular.module("quickRabbit.reviews",[]),angular.module("quickRabbit.settings",[]),angular.module("quickRabbit.languages",[]),angular.module("quickRabbit.currencies",[]),angular.module("quickRabbit.tools",[]),angular.module("quickRabbit.newsletter",[]),angular.module("quickRabbit.pushnotification",[]),angular.module("quickRabbit.postheader",[]),angular.module("quickRabbit.paymentGateway",[]),angular.module("quickRabbit.postfooter",[]),angular.module("quickRabbit.images",[]),angular.module("quickRabbit.contactus",[]),angular.module("quickRabbit.tasks",[]),angular.module("quickRabbit.earnings",[]),angular.module("quickRabbit.cancellation",[]),angular.module("quickRabbit.admin",["Authentication","angular-loading-bar","ngAnimate","ngCookies","ngSanitize","ui.bootstrap","ui.router","ui.utils","ui.tinymce","toastr","pascalprecht.translate","picardy.fontawesome","ui.select","ui.tree","ngImgCrop","ngMap","ngIntlTelInput","ngTagsInput","ngFileUpload","slugifier","angular-flot","easypiechart","checklist-model","quickRabbit.dashboard","quickRabbit.administrator","quickRabbit.users","quickRabbit.taskers","quickRabbit.pages","quickRabbit.sliders","quickRabbit.coupons","quickRabbit.emailTemplate","quickRabbit.categories","quickRabbit.faq","quickRabbit.experience","quickRabbit.question","quickRabbit.reviews","quickRabbit.settings","quickRabbit.languages","quickRabbit.currencies","quickRabbit.tools","quickRabbit.newsletter","quickRabbit.pushnotification","quickRabbit.postheader","quickRabbit.paymentGateway","quickRabbit.postfooter","quickRabbit.images","quickRabbit.contactus","quickRabbit.tasks","quickRabbit.earnings","quickRabbit.cancellation"]),angular.module("quickRabbit.admin").run(["$rootScope","$state","$location","$cookieStore","$http","$stateParams","MainService","AuthenticationService","$modalStack",function($rootScope,$state,$location,$cookieStore,$http,$stateParams,MainService,AuthenticationService,$modalStack){$rootScope.globals=$cookieStore.get("globals")||{},$rootScope.globals.currentUser?($http.defaults.headers.common.Authorization=$rootScope.globals.currentUser.authdata,$rootScope.$on("$stateChangeStart",function(event,toState,toParams,fromState,fromParams){if($rootScope.toState=toState,$rootScope.toStateParams=toParams,$rootScope.userPrivilages=MainService.getCurrentUserValue(),$rootScope.userPrivilages&&$rootScope.userPrivilages.privileges&&"admin"!=$rootScope.userPrivilages.role&&"app.dashboard"!=toState.name){var path=toState.name.split("."),parent=path[0]+"."+path[1];toState.action;$rootScope.userPrivilages.privileges.filter(function(childs){childs.state!=parent&&childs.state!=toState.name||0!=childs.status[toState.action]&&("all"!=toState.action||0!=childs.status["delete"]||0!=childs.status.edit||0!=childs.status.add||0!=childs.status.view)?childs.state==parent&&0==childs.status["delete"]&&0==childs.status.edit&&0==childs.status.add&&0==childs.status.view&&(event.preventDefault(),$state.go("app.dashboard")):path[2]?childs.childs?childs.childs.filter(function(menu,index,arr){menu.state==toState.name&&(menu.action==toState.action||"all"==toState.action&&0==childs.status["delete"]&&0==childs.status.edit&&0==childs.status.add&&0==childs.status.view)?(event.preventDefault(),$state.go("app.dashboard")):childs.state==parent&&(menu.action==toState.action||0==childs.status["delete"]&&0==childs.status.edit&&0==childs.status.add&&0==childs.status.view)&&(event.preventDefault(),$state.go("app.dashboard"))}):childs.state==toState.name&&(childs.action==toState.action||"all"==toState.action&&0==childs.status["delete"]&&0==childs.status.edit&&0==childs.status.add&&0==childs.status.view)?(event.preventDefault(),$state.go("app.dashboard")):childs.state==parent&&(childs.action==toState.action||0==childs.status["delete"]&&0==childs.status.edit&&0==childs.status.add&&0==childs.status.view)&&(event.preventDefault(),$state.go("app.dashboard")):childs.state==toState.name&&(event.preventDefault(),$state.go("app.dashboard"))})}})):$location.path("/login"),$rootScope.$stateParams=$stateParams,$rootScope.$on("$stateChangeStart",function(event,toState,toParams,fromState,fromParams){"login"===toState.name||"forgotpwdadmin"===toState.name||"forgotpwdadminmail"===toState.name||$rootScope.globals.currentUser||(AuthenticationService.ClearCredentials(),$location.path("/login"))}),$rootScope.$state=$state,$rootScope.$stateParams=$stateParams,$rootScope.$on("$stateChangeSuccess",function(event,toState){$modalStack.dismissAll(),event.targetScope.$watch("$viewContentLoaded",function(){angular.element("html, body, #content").animate({scrollTop:0},200),setTimeout(function(){angular.element("#wrap").css("visibility","visible"),angular.element(".dropdown").hasClass("open")||angular.element(".dropdown").find(">ul")},200)}),$rootScope.containerClass=toState.containerClass})}]).factory("myHttpInterceptor",function($location,$rootScope){var timestampMarker={response:function(response){return $rootScope.imgSrc=!1,"wrong"==response.data&&$location.path("/login"),404==response.status&&$location.path("/404"),response},request:function(config){return $rootScope.imgSrc=!0,config||$q.when(config)}};return timestampMarker}).config(function($provide){$provide.provider("menuProvider",function(){this.$get=function($http,$q,$rootScope){return{menu:function(user){var deferred=$q.defer();return $http.get("app/admin/public/asserts/json/menu.json").success(function(data){if(user&&("admin"==user.role&&($rootScope.userVisiblevalue=!0,$rootScope.taskerVisiblevalue=!0,$rootScope.taskVisiblevalue=!0,$rootScope.earningsVisiblevalue=!0,$rootScope.categoriesVisiblevalue=!0,$rootScope.couponsVisiblevalue=!0,$rootScope.newsletterVisiblevalue=!0),"admin"!=user.role&&user.privileges.filter(function(data){"users"==data.alias&&1==data.status.view&&($rootScope.userVisiblevalue=!0),"tasker"==data.alias&&1==data.status.view&&($rootScope.taskerVisiblevalue=!0),"tasks"==data.alias&&1==data.status.view&&($rootScope.taskVisiblevalue=!0),"earnings"==data.alias&&1==data.status.view&&($rootScope.earningsVisiblevalue=!0),"categories"==data.alias&&1==data.status.view&&($rootScope.categoriesVisiblevalue=!0),"coupons"==data.alias&&1==data.status.view&&($rootScope.couponsVisiblevalue=!0),"newsletter"==data.alias&&1==data.status.view&&($rootScope.newsletterVisiblevalue=!0)}),console.log("user///////////////",user),user.privileges&&"admin"!=user.role))for(var j=0;j<data.length;j++)user.privileges.filter(function(childs){childs.state==data[j].state&&(0==childs.status.view&&0==childs.status.add&&0==childs.status.edit&&0==childs.status["delete"]?data.splice(j,1):data[j].childs&&data[j].childs.filter(function(menu,index,arr){0==childs.status.view&&"view"==menu.action?data[j].childs[index].state==menu.state&&data[j].childs.splice(index,1):0==childs.status.add&&"add"==menu.action?data[j].childs[index].state==menu.state&&data[j].childs.splice(index,1):0==childs.status.edit&&"edit"==menu.action?data[j].childs[index].state==menu.state&&data[j].childs.splice(index,1):0==childs.status["delete"]&&"delete"==menu.action&&data[j].childs[index].state==menu.state&&data[j].childs.splice(index,1)}))});user.menu=data,deferred.resolve(user)}).error(function(err){deferred.reject(err)}),deferred.promise}}}})}).config(["$translateProvider","$urlMatcherFactoryProvider",function($translateProvider,$urlMatcherFactoryProvider){$translateProvider.useStaticFilesLoader({prefix:"/app/admin/public/asserts/languages/",suffix:".json"}),$translateProvider.preferredLanguage("en"),$translateProvider.useSanitizeValueStrategy(null),$urlMatcherFactoryProvider.caseInsensitive(!1),$urlMatcherFactoryProvider.strictMode(!0)}]).config(function($provide){$provide.decorator("$state",function($delegate){var state=$delegate;state.baseGo=state.go;var go=function(to,params,options){options=options||{},options.inherit=!1,this.baseGo(to,params,options)};return state.go=go,$delegate})}).config(function(ngIntlTelInputProvider){ngIntlTelInputProvider.set({defaultCountry:"us"})}).config(function(toastrConfig){angular.extend(toastrConfig,{autoDismiss:!0,maxOpened:1,tapToDismiss:!0,closeButton:!0,closeHtml:'<i class="fa fa-times"></i>'})}).config(["$stateProvider","$urlRouterProvider","$httpProvider","$urlMatcherFactoryProvider",function($stateProvider,$urlRouterProvider,$httpProvider,$urlMatcherFactoryProvider){$httpProvider.interceptors.push("myHttpInterceptor"),$urlMatcherFactoryProvider.defaultSquashPolicy(!0),$urlRouterProvider.rule(function($injector,$location){var path=$location.path(),hasTrailingSlash="/"===path[path.length-1];if(hasTrailingSlash){var newPath=path.substr(0,path.length-1);return newPath}}),$urlRouterProvider.otherwise("/app/dashboard"),$stateProvider.state("login",{url:"/login",controller:"LoginController",templateUrl:"app/admin/modules/users/views/login.html"}).state("logout",{url:"/logout",controller:"LogoutController"}).state("forgotpwdadmin",{url:"/forget-admin",controller:"adminsforgtCtrl",controllerAs:"AFC",templateUrl:"app/admin/modules/users/views/forgetpwd.html"}).state("forgotpwdadminmail",{url:"/forgotpwdadminmail/:userid",controller:"adminsmailforgtCtrl",controllerAs:"AFMC",templateUrl:"app/admin/modules/users/views/mailforgetpwd.html"}).state("app",{"abstract":!0,url:"/app",controller:"MainCtrl",controllerAs:"MAC",templateUrl:"app/admin/modules/common/views/app.html",resolve:{MainResolve:function(MainService,menuProvider,$cookieStore){var cookieStore=$cookieStore.get("globals");return!!cookieStore&&MainService.getCurrentUsers(cookieStore.currentUser.username).then(function(data){return MainService.setCurrentUserValue(data[0]),menuProvider.menu(data[0])})}}}).state("app.dashboard",{url:"/dashboard",action:"all",controller:"DashboardCtrl",controllerAs:"DLC",templateUrl:"app/admin/modules/dashboard/views/dashboard.html",resolve:{userCountServiceResolve:function(DashboardService){return DashboardService.getAllUsers(0,10,0)},getRecentTaskersResolve:function(DashboardService){return DashboardService.getRecentTaskers()},getRecentTasksResolve:function(DashboardService){return DashboardService.getRecentTasks(10,0)},getRecentUsersResolve:function(DashboardService){return DashboardService.getRecentUsers()},TasksServiceResolve:function(TasksService){return TasksService.getTasksList(0)},earningsServiceResolve:function(DashboardService){return DashboardService.earningsDetails()}}}).state("app.admins",{url:"/admins",action:"all",template:"<div ui-view></div>"}).state("app.admins.list",{url:"/list-admin",action:"all",controller:"adminsListCtrl",controllerAs:"ALC",templateUrl:"app/admin/modules/administrators/views/list_admin.html",resolve:{adminsServiceResolve:function(AdminsService){return AdminsService.getAllAdmins()}}}).state("app.admins.sub",{url:"/sub",action:"all",controller:"subAdminsListCtrl",controllerAs:"SALC",templateUrl:"app/admin/modules/administrators/views/sub-admin-list.html",resolve:{subAdminsServiceResolve:function(AdminsService){return AdminsService.getAllSubAdmins()}}}).state("app.admins.add",{url:"/add-admin/:id",action:"add",controller:"adminAddCtrl",controllerAs:"ADAC",templateUrl:"app/admin/modules/administrators/views/add_admin.html",resolve:{adminsEditServiceResolve:function(AdminsService,$stateParams){return AdminsService.edit($stateParams.id)}}}).state("app.admins.subadd",{url:"/add-sub/:id",action:"add",controller:"subAdminCtrl",controllerAs:"ROMC",templateUrl:"app/admin/modules/administrators/views/role_manager.html",resolve:{roleManagerResolve:function(RoleManagerService){return RoleManagerService.getMenuList()},userRoleResolve:function(RoleManagerService,$stateParams){return RoleManagerService.getAllUsersRole($stateParams.id)}}}).state("app.users",{url:"/users",action:"all",template:"<div ui-view></div>"}).state("app.users.add",{url:"/add-user/:id",action:"add",controller:"userAddCtrl",controllerAs:"USAC",templateUrl:"app/admin/modules/users/views/add_user.html",resolve:{usersEditServiceResolve:function(UsersService,$stateParams){return UsersService.edit($stateParams.id)}}}).state("app.users.list",{url:"/list-user",action:"all",controller:"usersListCtrl",controllerAs:"USLC",templateUrl:"app/admin/modules/users/views/list_user.html",resolve:{usersServiceResolve:function(UsersService){return UsersService.getAllUsers(0,10,0)}}}).state("app.users.transactionslist",{url:"/transactionlist-user/:id",action:"all",controller:"transactionListCtrl",controllerAs:"TRLC",templateUrl:"app/admin/modules/users/views/transactionlist_user.html",resolve:{usersTransactionServiceResolve:function(UsersService,$stateParams){return UsersService.transactionsList($stateParams.id,10,0)}}}).state("app.users.deleteduser",{url:"/deleteduser",action:"all",controller:"trashUserListCtrl",controllerAs:"TULC",templateUrl:"app/admin/modules/users/views/deleted_user.html",resolve:{trashUserServiceResolve:function(UsersService){return UsersService.deleteuserList(10,0)}}}).state("app.taskers",{url:"/taskers",action:"all",template:"<div ui-view></div>"}).state("app.taskers.list",{url:"/list-tasker",action:"all",controller:"taskersListCtrl",controllerAs:"TSLC",templateUrl:"app/admin/modules/taskers/views/list_tasker.html",resolve:{taskersServiceResolve:function(TaskersService){return TaskersService.getAllTaskers(0,10,0)}}}).state("app.taskers.add",{url:"/add-new-tasker/:id",action:"add",controller:"addNewTaskerCtrl",controllerAs:"ANTSC",templateUrl:"app/admin/modules/taskers/views/add_new_tasker.html",resolve:{taskerAddServiceResolve:function(TaskersService,$stateParams){return TaskersService.edit($stateParams.id)},CategoryServiceResolve:function(CategoryService){return CategoryService.getCategoryList()}}}).state("app.taskers.edit",{url:"/add-tasker/:id",action:"add",controller:"addTaskerCtrl",controllerAs:"ATSC",templateUrl:"app/admin/modules/taskers/views/edit_tasker.html",resolve:{taskerAddServiceResolve:function(TaskersService,$stateParams){return TaskersService.edit($stateParams.id)},CategoryServiceResolve:function(CategoryService){return CategoryService.getCategoryList()}}}).state("app.taskers.delete",{url:"/deleted-taskers",action:"all",controller:"deletedTaskerCtrl",controllerAs:"DTSL",templateUrl:"app/admin/modules/taskers/views/deletedTasker_list.html",resolve:{deletedtaskersServiceResolve:function(TaskersService){return TaskersService.getDeletedTaskers(0,10,0)}}}).state("app.pages",{url:"/pages",action:"all",template:"<div ui-view></div>"}).state("app.pages.list",{url:"/list",action:"all",controller:"pagesListCtrl",controllerAs:"PLC",templateUrl:"app/admin/modules/pages/views/pages_list.html",resolve:{PageListServiceResolve:function(PageService){return PageService.getPageList(10,0)}}}).state("app.pages.action",{url:"/edit?id",action:"add",controller:"editPageCtrl",controllerAs:"EDPC",templateUrl:"app/admin/modules/pages/views/edit_page.html",resolve:{PageServiceResolve:function(PageService,$stateParams){return PageService.editPageCall($stateParams.id)},PageCategoryResolve:function(PageService){return PageService.getPageSetting()}}}).state("app.pages.edittranslate",{url:"/edittranslate?id",action:"list",controller:"editPageLanguageCtrl",controllerAs:"EDPLC",templateUrl:"app/admin/modules/pages/views/edit_translate_page.html",resolve:{PageTranslateServiceResolve:function(PageService){return PageService.translatelanguage()},SubPageServiceResolve:function(PageService,$stateParams){return PageService.editPageCall($stateParams.id)}}}).state("app.pages.categoryPageList",{url:"/categoryPageList",action:"categoryPageList",controller:"categoryPageListCtrl",controllerAs:"CPLC",templateUrl:"app/admin/modules/pages/views/category_list.html",resolve:{PageCategoryResolve:function(PageService){return PageService.getPageSetting()}}}).state("app.pages.categoryPage",{url:"/categoryPage/:name",action:"categoryPage",controller:"categoryPageCtrl",controllerAs:"CPC",templateUrl:"app/admin/modules/pages/views/category_page.html",resolve:{PageCategoryResolve:function(PageService){return PageService.getPageSetting()},PageCategoryEditResolve:function(PageService,$stateParams){return PageService.getEditPageData($stateParams.name)}}}).state("app.pages.subpageslist",{url:"/sublist/:id",action:"add",controller:"subPagesListCtrl",controllerAs:"SPLC",templateUrl:"app/admin/modules/pages/views/sub_page_list.html",resolve:{SubPageListServiceResolve:function(PageService,$stateParams){return PageService.getSubPageList($stateParams.id,10,0)}}}).state("app.sliders",{url:"/slider",action:"all",template:"<div ui-view></div>"}).state("app.sliders.viewsSlider",{url:"/view-slider",action:"all",controller:"viewSliderCtrl",controllerAs:"VSC",templateUrl:"app/admin/modules/slider/views/viewSlider.html",resolve:{SliderServiceResolve:function(MainService,SliderService){return SliderService.getSliderList(10,0)}}}).state("app.sliders.add",{url:"/add/:id",action:"add",controller:"editSliderCtrl",controllerAs:"EDSC",templateUrl:"app/admin/modules/slider/views/editSlider.html",resolve:{sliderEditReslove:function($stateParams,SliderService){return SliderService.getSlider($stateParams.id)}}}).state("app.contact",{url:"/contact",action:"all",template:"<div ui-view></div>"}).state("app.contact.view",{url:"/view-contact",action:"all",controller:"viewContactCtrl",controllerAs:"VSCC",templateUrl:"app/admin/modules/contact-us/views/viewContactUs.html",resolve:{ContactServiceResolve:function(MainService,ContactService){return ContactService.getContactList(10,0)}}}).state("app.contact.add",{url:"/add/:id",action:"add",controller:"editContactCtrl",controllerAs:"EDCC",templateUrl:"app/admin/modules/contact-us/views/editContactUs.html",resolve:{contactEditReslove:function($stateParams,ContactService){return ContactService.getContact($stateParams.id)}}}).state("app.images",{url:"/images",action:"all",template:"<div ui-view></div>"}).state("app.images.imagelist",{url:"/imagelist",action:"all",controller:"viewImagesCtrl",controllerAs:"VIC",templateUrl:"app/admin/modules/images/views/viewImages.html",resolve:{ImagesServiceResolve:function(MainService,ImagesService){return ImagesService.getImagesList(10,0)}}}).state("app.images.addimage",{url:"/addimage/:id",controller:"editImagesCtrl",controllerAs:"EDIC",templateUrl:"app/admin/modules/images/views/editImages.html",resolve:{imagesEditReslove:function($stateParams,ImagesService){return ImagesService.getImage($stateParams.id)}}}).state("app.emailtemplate",{url:"/email-template",action:"all",template:"<div ui-view></div>"}).state("app.emailtemplate.list",{url:"/list",action:"all",controller:"emailTemplateListCtrl",controllerAs:"ETL",templateUrl:"app/admin/modules/email-template/views/email_template_list.html",resolve:{emailTemplateListResolve:function(EmailTemplateService){return EmailTemplateService.getTemplateList(10,0)}}}).state("app.emailtemplate.action",{url:"/:action/:id",action:"add",controller:"emailTemplateSaveCtrl",controllerAs:"EETC",templateUrl:"app/admin/modules/email-template/views/email_template_add_edit.html",resolve:{emailTemplateEditResolve:function(EmailTemplateService,$stateParams){return $stateParams.id?EmailTemplateService.getTemplate($stateParams.id):EmailTemplateService.getTemplate()}}}).state("app.categories",{url:"/category",action:"all",template:"<div ui-view></div>"}).state("app.categories.list",{url:"/category-list",action:"all",controller:"categoryListCtrl",controllerAs:"VCL",templateUrl:"/app/admin/modules/categories/views/categoryList.html",resolve:{CategoryServiceResolve:function(MainService,CategoryService){return CategoryService.getCategoryList(15,0)}}}).state("app.categories.edit",{url:"/edit/:id",action:"add",controller:"editCategoryCtrl",controllerAs:"ECATC",templateUrl:"app/admin/modules/categories/views/addEditCategory.html",resolve:{categoryEditReslove:function(CategoryService,$stateParams){return $stateParams.id?CategoryService.getCategory($stateParams.id):CategoryService.getCategory()}}}).state("app.categories.subcategorylist",{url:"/subcategory-list",action:"all",controller:"subcategoryListCtrl",controllerAs:"VSCL",templateUrl:"app/admin/modules/categories/views/subcategoryList.html",resolve:{CategoryServiceResolve:function(MainService,CategoryService){return CategoryService.getsubCategoryList(15,0)}}}).state("app.categories.sub",{url:"/subedit/:id",action:"add",controller:"editsubCategoryCtrl",controllerAs:"ESCATC",templateUrl:"app/admin/modules/categories/views/addEditsubCategory.html",resolve:{categoryEditReslove:function(CategoryService,$stateParams){return $stateParams.id?CategoryService.getsubCategory($stateParams.id):CategoryService.getsubCategory()}}}).state("app.faq",{url:"/faq",action:"all",template:"<div ui-view></div>"}).state("app.faq.list",{url:"/faq-list",action:"all",controller:"faqListCtrl",controllerAs:"FLC",templateUrl:"app/admin/modules/faq/views/faqList.html",resolve:{FaqServiceResolve:function(MainService,FaqService){return FaqService.getFaqList(10,0)}}}).state("app.faq.edit",{url:"/edit/:id",action:"add",controller:"editFaqCtrl",controllerAs:"EFC",templateUrl:"app/admin/modules/faq/views/addEditFaq.html",resolve:{faqEditReslove:function(FaqService,$stateParams){return FaqService.getFaq($stateParams.id)}}}).state("app.tasker_management",{url:"/tasker_management",action:"all",template:"<div ui-view></div>"}).state("app.tasker_management.experience",{url:"/experience",action:"all",template:"<div ui-view></div>"}).state("app.tasker_management.experience.list",{url:"/list",action:"all",controller:"experienceListCtrl",controllerAs:"EPL",templateUrl:"app/admin/modules/experience/views/experience-list.html",resolve:{experienceServiceResolve:function(ExperienceService){return ExperienceService.getExperienceList(10,0)}}}).state("app.tasker_management.experience.edit",{url:"/edit/:id",action:"add",controller:"editExperienceCtrl",controllerAs:"EEC",templateUrl:"app/admin/modules/experience/views/add-edit-experience.html",resolve:{ExperienceEditReslove:function(ExperienceService,$stateParams){return $stateParams.id?ExperienceService.getExperience($stateParams.id):ExperienceService.getExperience()}}}).state("app.tasker_management.question",{url:"/question",action:"all",template:"<div ui-view></div>"}).state("app.tasker_management.question.viewsQuestion",{url:"/view-question",action:"all",controller:"viewQuestionCtrl",controllerAs:"VQC",templateUrl:"app/admin/modules/question-management/views/viewQuestionManagement.html",resolve:{QuestionServiceResolve:function(QuestionService){return QuestionService.getQuestionList(10,0)}}}).state("app.tasker_management.question.add",{url:"/add/:id",action:"add",controller:"editQuestionerCtrl",controllerAs:"EDQC",templateUrl:"app/admin/modules/question-management/views/editQuestionManagement.html",resolve:{QuestionEditReslove:function($stateParams,QuestionService){return QuestionService.getQuestion($stateParams.id)}}}).state("app.reviews",{url:"/reviews",action:"all",template:"<div ui-view></div>"
}).state("app.reviews.list",{url:"/view-reviews",action:"all",controller:"viewReviewsCtrl",controllerAs:"VRC",templateUrl:"app/admin/modules/reviews/views/viewReviews.html",resolve:{ReviewsServiceResolve:function(ReviewsService){return ReviewsService.getReviewsList("all",10,0)}}}).state("app.reviews.action",{url:"/add/:id",action:"add",controller:"editReviewsCtrl",controllerAs:"EDRC",templateUrl:"app/admin/modules/reviews/views/editReviews.html",resolve:{ReviewsEditReslove:function($stateParams,ReviewsService){return ReviewsService.getReviews($stateParams.id)}}}).state("app.tasks",{url:"/tasks",action:"all",template:"<div ui-view></div>"}).state("app.tasks.viewsTasks",{url:"/view-tasks",action:"all",controller:"viewTasksCtrl",controllerAs:"VTC",templateUrl:"app/admin/modules/tasks/views/viewTasks.html",resolve:{TasksServiceResolve:function(TasksService){return TasksService.getTasksList(0,10,0)}}}).state("app.tasks.add",{url:"/add/:id",action:"add",controller:"editTasksCtrl",controllerAs:"EDTTC",templateUrl:"app/admin/modules/tasks/views/editTasks.html",resolve:{TasksEditReslove:function($stateParams,TasksService){return TasksService.getTasks($stateParams.id)}}}).state("app.tasks.delete",{url:"/deleteTasks",action:"add",controller:"deletedTasksCtrl",controllerAs:"DTTC",templateUrl:"app/admin/modules/tasks/views/deletedTasks.html",resolve:{DeletedTasksServiceResolve:function(TasksService){return TasksService.getDeletedTasksList(0,10,0)}}}).state("app.tasks.export",{action:"all",controller:"exportTasksCtrl",resolve:{TasksExportReslove:function(TasksService){return TasksService.getTasksExport()}}}).state("app.cancellation",{url:"/cancellation",action:"all",template:"<div ui-view></div>"}).state("app.cancellation.list",{url:"/list",action:"all",controller:"cancellationCtrl",controllerAs:"CAL",templateUrl:"app/admin/modules/cancellation/views/cancellation.html",resolve:{cancellationResolve:function(cancellationService){return cancellationService.getCancellationList(10,0)}}}).state("app.cancellation.edit",{url:"/edit/:id",action:"add",controller:"editCancellationCtrl",controllerAs:"ECAL",templateUrl:"app/admin/modules/cancellation/views/editcancellation.html",resolve:{editcancellationResolve:function($stateParams,cancellationService){return cancellationService.getCancellation($stateParams.id)}}}).state("app.earnings",{url:"/earnings",action:"all",template:"<div ui-view></div>"}).state("app.earnings.list",{url:"/list",action:"all",controller:"earningsCtrl",controllerAs:"ENC",templateUrl:"app/admin/modules/earnings/views/earnings.html",resolve:{EarningsServiceResolve:function(EarningService){return EarningService.getEarningList(10,0,"undefined","undefined")},TasksServiceResolve:function(EarningService){return EarningService.getfirsttask()},CycleServiceResolve:function(EarningService){return EarningService.getcyclelist()},FirstCycleServiceResolve:function(EarningService){return EarningService.getcyclefirst()}}}).state("app.settings.mobileContent",{url:"/mobile-content",action:"all",controller:"mobileContentCtrl",controllerAs:"MCC",templateUrl:"app/admin/modules/settings/views/mobileContent.html",resolve:{mobileSettingsServiceResolve:function(SettingsService){return SettingsService.getmobileSettings()}}}).state("app.earnings.view",{url:"/view/:id/:cycle",action:"add",controller:"viewearningsCtrl",controllerAs:"ENCC",templateUrl:"app/admin/modules/earnings/views/editearning.html",resolve:{TaskerEarningReslove:function($stateParams,EarningService){var data={};return data.tasker=$stateParams.id,data.cycle=$stateParams.cycle,EarningService.getTaskrearning(data,10,0)},PaidEarningsServiceResolve:function($stateParams,EarningService){var data={};return data.tasker=$stateParams.id,data.cycle=$stateParams.cycle,EarningService.paidserivce(data)}}}).state("app.tools",{url:"/tools",action:"all",controller:"toolsCtrl",controllerAs:"TSC",templateUrl:"app/admin/modules/tools/views/tools.html"}).state("app.settings",{url:"/settings",action:"all",template:"<div ui-view></div>"}).state("app.settings.generalSettings",{url:"/general-settings",controller:"generalSettingsCtrl",controllerAs:"GSC",templateUrl:"app/admin/modules/settings/views/general_settings.html",resolve:{GeneralSettingsServiceResolve:function(SettingsService){return SettingsService.getGeneralSettings()},TimeZoneSettingsServiceResolve:function(SettingsService){return SettingsService.getTimeZoneSettings()}}}).state("app.settings.seoSettings",{url:"/seo-settings",action:"all",controller:"seoSettingsCtrl",controllerAs:"SSC",templateUrl:"app/admin/modules/settings/views/seo_settings.html",resolve:{SeoSettingsServiceResolve:function(SettingsService){return SettingsService.getSeoSettings()}}}).state("app.settings.widgets",{url:"/widgets",action:"all",controller:"widgetsCtrl",controllerAs:"WSC",templateUrl:"app/admin/modules/settings/views/widgets.html",resolve:{WidgetsServiceResolve:function(SettingsService){return SettingsService.getWidgets()}}}).state("app.settings.smtpSettings",{url:"/smtp-settings",action:"all",controller:"smtpSettingsCtrl",controllerAs:"SMTPSC",templateUrl:"app/admin/modules/settings/views/smtp_settings.html",resolve:{SMTPSettingsServiceResolve:function(SettingsService){return SettingsService.getSMTPSettings()}}}).state("app.settings.SocialNetworksSettings",{url:"/social-networks",action:"all",controller:"SocialNetworksSettingsCtrl",controllerAs:"SNSC",templateUrl:"app/admin/modules/settings/views/new_social_networks.html",resolve:{SocialNetworksSettingsServiceResolve:function(SettingsService){return SettingsService.getSocialNetworksSettings()}}}).state("app.settings.currencySettings",{url:"/currency-settings",action:"all",template:"<div ui-view></div>"}).state("app.settings.currencySettings.list",{url:"/list",action:"all",controller:"currencySettingsListCtrl",controllerAs:"CSLC",templateUrl:"app/admin/modules/settings/views/currency/currency_list.html",resolve:{CurrencyServiceResolve:function(CurrencyService){return CurrencyService.getProductList()}}}).state("app.settings.currencySettings.add",{url:"/add/:id",action:"add",controller:"currencySettingsAddCtrl",controllerAs:"CSAC",templateUrl:"app/admin/modules/settings/views/currency/currency_add.html",resolve:{currencyServiceResolve:function($stateParams,CurrencyService){if($stateParams.id)return CurrencyService.getCurrency($stateParams.id)}}}).state("app.settings.languageSettings",{url:"/language-settings",action:"all",template:"<div ui-view></div>"}).state("app.settings.languageSettings.list",{url:"/list",action:"all",controller:"languageSettingsListCtrl",controllerAs:"LSLC",templateUrl:"app/admin/modules/settings/views/language/language_list.html",resolve:{languageServiceListResolve:function(languageService){return languageService.getLanguageList(10,0)}}}).state("app.settings.languageSettings.manage",{url:"/manage/:langId",action:"all",controller:"languageSettingsManageCtrl",controllerAs:"LSMC",templateUrl:"app/admin/modules/settings/views/language/language_manage.html",resolve:{languageServiceManageResolve:function(languageService,$stateParams){return languageService.managelanguage($stateParams.langId,1,10)}}}).state("app.settings.languageSettings.action",{url:"/edit/:id",action:"add",controller:"languageSettingsEditCtrl",controllerAs:"LSEC",templateUrl:"app/admin/modules/settings/views/language/language_edit.html",resolve:{languageServiceResolve:function(languageService,$stateParams){return $stateParams.id?languageService.getLanguage($stateParams.id):languageService.getLanguage()}}}).state("app.settings.smssettings",{url:"/sms-settings",action:"all",controller:"smsSettingsCtrl",controllerAs:"SMSC",templateUrl:"app/admin/modules/settings/views/sms_settings.html",resolve:{SMSSettingsServiceResolve:function(SettingsService){return SettingsService.getSMSSettings()}}}).state("app.settings.cancellation",{url:"/cancellation",action:"all",template:"<div ui-view></div>"}).state("app.settings.cancellation.list",{url:"/list",action:"all",controller:"cancellationCtrl",controllerAs:"CAL",templateUrl:"app/admin/modules/cancellation/views/cancellation.html",resolve:{cancellationResolve:function(cancellationService){return cancellationService.getCancellationList(10,0)}}}).state("app.settings.cancellation.edit",{url:"/edit/:id",action:"add",controller:"editCancellationCtrl",controllerAs:"ECAL",templateUrl:"app/admin/modules/cancellation/views/editcancellation.html",resolve:{editcancellationResolve:function($stateParams,cancellationService){return cancellationService.getCancellation($stateParams.id)}}}).state("app.settings.images",{url:"/images",action:"all",template:"<div ui-view></div>"}).state("app.settings.images.imagelist",{url:"/imagelist",action:"all",controller:"viewImagesCtrl",controllerAs:"VIC",templateUrl:"app/admin/modules/images/views/viewImages.html",resolve:{ImagesServiceResolve:function(MainService,ImagesService){return ImagesService.getImagesList(10,0)}}}).state("app.settings.images.addimage",{url:"/addimage/:id",controller:"editImagesCtrl",controllerAs:"EDIC",templateUrl:"app/admin/modules/images/views/editImages.html",resolve:{imagesEditReslove:function($stateParams,ImagesService){return ImagesService.getImage($stateParams.id)}}}).state("app.newsletter",{url:"/newsletter",action:"all",template:"<div ui-view></div>"}).state("app.newsletter.subscriber",{url:"/list",action:"all",controller:"SubscriberListCtrl",controllerAs:"ETLC",templateUrl:"app/admin/modules/newsletter/views/subscriber_list.html",resolve:{SubscriberServiceResolve:function(SubscriberService){return SubscriberService.getSubscriberList()},SubscriberMail:function(SubscriberService){return SubscriberService.getsubscripermail()}}}).state("app.pushnotifications",{url:"/pushnotifications",action:"all",template:"<div ui-view></div>"}).state("app.pushnotifications.user",{url:"/user",action:"all",controller:"UserListCtrl",controllerAs:"ULC",templateUrl:"app/admin/modules/pushnotification/views/user_list.html",resolve:{UsernotificationServiceResolve:function(UsernotificationService){return UsernotificationService.getUserList()},emailEditReslove:function(emailService){return emailService.getmailtemplate()},messageEditReslove:function(emailService){return emailService.getmessagetemplate()}}}).state("app.pushnotifications.tasker",{url:"/tasker",action:"all",controller:"TaskerListCtrl",controllerAs:"TLC",templateUrl:"app/admin/modules/pushnotification/views/tasker_list.html",resolve:{TaskernotificationServiceResolve:function(TaskernotificationService){return TaskernotificationService.getTaskerList()}}}).state("app.pushnotifications.templates",{url:"/templates",controller:"NotificationListCtrl",controllerAs:"NLC",templateUrl:"app/admin/modules/pushnotification/views/push-notification-list.html",resolve:{NotificationListServiceResolve:function(notificationListService){return notificationListService.getNotificationsList()}}}).state("app.pushnotifications.email",{url:"/add-email/:id",controller:"NotificationemailCtrl",controllerAs:"NELC",templateUrl:"app/admin/modules/pushnotification/views/addEmailnotification.html",resolve:{emailEditReslove:function(emailService,$stateParams){return $stateParams.id?emailService.getNotificationemail($stateParams.id):emailService.getNotificationemail()}}}).state("app.postheader",{url:"/postheader",action:"all",template:"<div ui-view></div>"}).state("app.postheader.viewpostheader",{url:"/list-postheader",action:"all",controller:"viewPostHeaderCtrl",controllerAs:"VPHC",templateUrl:"app/admin/modules/postheader/views/viewPostHeader.html",resolve:{PostHeaderViewServiceResolve:function(PostheaderService){return PostheaderService.getPostHeaderList(10,0)}}}).state("app.postheader.addpostheader",{url:"/add-postheader/:id",action:"add",controller:"editPostheaderCtrl",controllerAs:"EPHC",templateUrl:"app/admin/modules/postheader/views/editAddPostHeader.html",resolve:{postheaderServiceResolve:function($stateParams,PostheaderService){return $stateParams.id?PostheaderService.getPostheader($stateParams.id):PostheaderService.getPostheader()}}}).state("app.locations",{url:"/locations",action:"all",template:"<div ui-view></div>"}).state("app.locations.list",{url:"/list-locations",action:"all",controller:"viewLocationsCtrl",controllerAs:"VPLC",templateUrl:"app/admin/modules/location/views/viewLocation.html",resolve:{LocationsViewServiceResolve:function(LocationsService){return LocationsService.getLocationList(10,0)}}}).state("app.locations.action",{url:"/add-location/:id",action:"add",controller:"editlocationCtrl",controllerAs:"EPLC",templateUrl:"app/admin/modules/location/views/editAddLocation.html",resolve:{locationServiceResolve:function($stateParams,LocationsService){return $stateParams.id?LocationsService.getLocation($stateParams.id):LocationsService.getLocation()}}}).state("app.postfooter",{url:"/postfooter",action:"all",template:"<div ui-view></div>"}).state("app.postfooter.viewpostfooter",{url:"/list-postfooter",action:"all",controller:"viewPostfooterCtrl",controllerAs:"VPFC",templateUrl:"app/admin/modules/postfooter/views/viewpostfooter.html",resolve:{PostFooterViewServiceResolve:function(PostfooterService){return PostfooterService.getPostFooterList(10,0)}}}).state("app.postfooter.addpostfooter",{url:"/add-postfooter/:id",action:"add",controller:"editPostfooterCtrl",controllerAs:"EPFC",templateUrl:"app/admin/modules/postfooter/views/editaddpostfooter.html",resolve:{postfooterServiceResolve:function($stateParams,PostfooterService){return $stateParams.id?PostfooterService.getPostfooter($stateParams.id):{}}}}).state("app.coupons",{url:"/coupons",action:"all",template:"<div ui-view></div>"}).state("app.coupons.list",{url:"/coupon-list",action:"all",controller:"couponsListCtrl",controllerAs:"CLC",templateUrl:"app/admin/modules/coupons/views/coupon_list.html",resolve:{CouponServiceResolve:function(CouponService){return CouponService.list()}}}).state("app.coupons.action",{url:"/edit/:id",action:"add",controller:"editCouponCtrl",controllerAs:"ECC",templateUrl:"app/admin/modules/coupons/views/add_coupon.html",resolve:{CouponEditServiceResolve:function(CouponService,$stateParams){return $stateParams.id?CouponService.edit($stateParams.id):CouponService.edit()},CouponAvailableUserServiceResolve:function(CouponService){return CouponService.userGet()}}}).state("app.paymentgateway",{url:"/payment-gateway",action:"all",template:"<div ui-view></div>"}).state("app.paymentgateway.list",{url:"/list",action:"all",controller:"paymentGatewayCtrl",controllerAs:"PAYGC",templateUrl:"app/admin/modules/payment-gateway/views/payment_gateway_list.html",resolve:{PaymentGatewayServiceResolve:function(PaymentGatewayService){return PaymentGatewayService.list(10,0)}}}).state("app.paymentgateway.edit",{url:"/edit/:id",action:"add",controller:"editPaymentCtrl",controllerAs:"EPAYGC",templateUrl:"app/admin/modules/payment-gateway/views/payment_gateway_edit.html",resolve:{PaymentGatewayEditServiceResolve:function($stateParams,PaymentGatewayService){return PaymentGatewayService.edit($stateParams.id)}}}).state("app.country",{url:"/country",template:"<div ui-view></div>"}).state("app.country.viewsCountry",{url:"/view-country",controller:"viewCountryCtrl",controllerAs:"VCC",templateUrl:"app/admin/modules/manage-country/views/viewManageCountry.html",resolve:{CountryServiceResolve:function(CountryService){return CountryService.getCountryList(10,0)}}}).state("app.country.add",{url:"/add/:id",controller:"editCountryCtrl",controllerAs:"EDCC",templateUrl:"app/admin/modules/manage-country/views/editManageCountry.html",resolve:{CountryEditReslove:function($stateParams,CountryService){return CountryService.getCountry($stateParams.id)}}})}]).filter("timeago",function(){return function(input,p_allowFuture){var words,substitute=function(stringOrFunction,number,strings){var string=$.isFunction(stringOrFunction)?stringOrFunction(number,dateDifference):stringOrFunction,value=strings.numbers&&strings.numbers[number]||number;return string.replace(/%d/i,value)},nowTime=(new Date).getTime(),date=new Date(input).getTime(),allowFuture=p_allowFuture||!1,strings={prefixAgo:null,prefixFromNow:null,suffixAgo:"ago",suffixFromNow:"from now",seconds:"less than a minute",minute:"about a minute",minutes:"%d minutes",hour:"about an hour",hours:"about %d hours",day:"a day",days:"%d days",month:"about a month",months:"%d months",year:"about a year",years:"%d years"},dateDifference=nowTime-date,seconds=Math.abs(dateDifference)/1e3,minutes=seconds/60,hours=minutes/60,days=hours/24,years=days/365,separator=void 0===strings.wordSeparator?" ":strings.wordSeparator,prefix=strings.prefixAgo,suffix=strings.suffixAgo;return allowFuture&&dateDifference<0&&(prefix=strings.prefixFromNow,suffix=strings.suffixFromNow),words=seconds<45&&substitute(strings.seconds,Math.round(seconds),strings)||seconds<90&&substitute(strings.minute,1,strings)||minutes<45&&substitute(strings.minutes,Math.round(minutes),strings)||minutes<90&&substitute(strings.hour,1,strings)||hours<24&&substitute(strings.hours,Math.round(hours),strings)||hours<42&&substitute(strings.day,1,strings)||days<30&&substitute(strings.days,Math.round(days),strings)||days<45&&substitute(strings.month,1,strings)||days<365&&substitute(strings.months,Math.round(days/30),strings)||years<1.5&&substitute(strings.year,1,strings)||substitute(strings.years,Math.round(years),strings),$.trim([prefix,words,suffix].join(separator))}}).controller("MainCtrl",function(MainResolve,$scope,$rootScope,$cookies,MainService,toastr){MainResolve&&($scope.username=MainResolve.username,$scope.menus=MainResolve.menu,$scope.presentUser=MainResolve,$scope.privileges=MainResolve.privileges),$scope.changeLanguage=function(langKey){$scope.currentLanguage=langKey},$rootScope.CurrentUser=MainService.getCurrentUserValue(),MainService.getTaskerPendingList().then(function(response){$scope.pendingTaskers=response[0],$scope.pendingTaskerLength=response[1]}),$scope.presentUser&&($scope.settingdata=$scope.presentUser.privileges.filter(function(menu){return"settings"===menu.alias}).map(function(menu){return menu.status})[0],$scope.Profiledata=$scope.presentUser.privileges.filter(function(menu){return"administrators"===menu.alias}).map(function(menu){return menu.status})[0])}).controller("DatepickerDemoCtrl",function($scope){$scope.today=function(){$scope.dt=new Date},$scope.mindate=new Date,$scope.today(),$scope.clear=function(){$scope.dt=null},$scope.disabled=function(date,mode){return"day"===mode&&(0===date.getDay()||6===date.getDay())},$scope.toggleMin=function(){$scope.minDate=$scope.minDate?null:new Date},$scope.toggleMin(),$scope.open=function($event){$event.preventDefault(),$event.stopPropagation(),$scope.opened=!0},$scope.dateOptions={formatYear:"yy",startingDay:0,"class":"datepicker"},$scope.formats=["dd-MMMM-yyyy","yyyy/MM/dd","dd.MM.yyyy","shortDate"],$scope.format=$scope.formats[0]}).controller("RootCtrl",function($scope,MainService){var rc=this;MainService.settings().then(function(data){rc.title="Admin Panel | "+data.site_title,rc.favicon=data.site_url+data.favicon,rc.logo=data.site_url+data.logo,$scope.date={format:data.date_format,timezone:data.time_zone},$scope.siteUrl=data.site_url}),MainService.getImage().then(function(data){$scope.getImage=data.filter(function(image){if("adminlogin"==image.imagefor)return image})}),MainService.themecolor().then(function(data){$scope.main={title:data.site_title,settings:{navbarHeaderColor:data.admin.colors.header,sidebarColor:data.admin.colors.sidebar,brandingColor:data.admin.colors.branding,activeColor:data.admin.colors.active,headerFixed:"true"==data.admin.fixed_header,asideFixed:"true"==data.admin.fixed_aside}}}),MainService.language().then(function(data){$scope.defaultLanguage=data._id}),MainService.currency().then(function(data){$scope.defaultCurrency=data._id,$scope.currency={},$scope.currency.value=data.value,$scope.currency.symbol=data.symbol}),$scope.tinymceOptions={plugins:"link image code",toolbar:"undo redo | bold italic | alignleft aligncenter alignright | code"}}).filter("money",["$filter",function(filter){var currencyFilter=filter("currency");return function(amount,data){var calAmount=amount*data.value,fractionSize=2;return currencyFilter(calAmount,data.symbol,fractionSize)}}]).filter("clock",function(){return function(timestamp,date){return moment.tz(timestamp,date.timezone).format(date.format)}}).filter("clocksettings",function(){return function(timestamp,format,timezone){return moment.tz(timestamp,timezone).format(format)}}).filter("capitalize",function(){return function(input){return input?input.charAt(0).toUpperCase()+input.substr(1).toLowerCase():""}}).filter("exactFilter",function(){return function(input,key,value){if(void 0==value||""==value)return input;var array=[];return input.forEach(function(objkey){return"all"==value?array.push(objkey):objkey[key]===value?array.push(objkey):void 0}),array}}).directive("googleplace",function(){return{require:"ngModel",link:function(scope,element,attrs,model){var options={types:[],componentRestrictions:{country:"in"}};scope.gPlace=new google.maps.places.Autocomplete(element[0],options),console.log(scope.gPlace),google.maps.event.addListener(scope.gPlace,"place_changed",function(){scope.$apply(function(){model.$setViewValue(element.val())})})}}}).directive("errSrc",function(){return{link:function(scope,element,attrs){element.bind("error",function(){attrs.src!=attrs.errSrc&&(attrs.errSrc="uploads/default/default.jpg",attrs.$set("src",attrs.errSrc))})}}}).directive("convertToNumber",function(){return{require:"ngModel",link:function(scope,element,attrs,ngModel){ngModel.$parsers.push(function(val){return val?parseInt(val,10):null}),ngModel.$formatters.push(function(val){return val?""+val:null})}}}).directive("dateValidator",function(){return{require:"ngModel",link:function(scope,elem,attr,ngModel){function validate(value){value&&ngModel.$setValidity("date",!0)}scope.$watch(function(){return ngModel.$viewValue},validate)}}}).directive("date",function(dateFilter){return{require:"ngModel",link:function(scope,elm,attrs,ctrl){var dateFormat=attrs.date||"yyyy-MM-dd hh:mm";ctrl.$formatters.unshift(function(modelValue){return dateFilter(modelValue,dateFormat)})}}}).directive("allowOnlyNumbers",function(){return{restrict:"A",link:function(scope,elm,attrs,ctrl){elm.on("keydown",function(event){return 64!=event.which&&16!=event.which&&(9==event.which||(event.which>=48&&event.which<=57||(event.which>=96&&event.which<=105||([8,13,27,37,38,39,40].indexOf(event.which)>-1||(event.preventDefault(),!1)))))})}}}).directive("disallowSpaces",function(){return{restrict:"A",link:function($scope,$element){$element.bind("input",function(){$(this).val($(this).val().replace(/ /g,""))})}}});var app=angular.module("quickRabbit.admin");app.factory("MainService",MainService),angular.module("Authentication").controller("LoginController",["$scope","$state","AuthenticationService","MainService",function($scope,$state,AuthenticationService,MainService){$scope.remember=!1,$scope.login=function(){$scope.dataLoading=!0,AuthenticationService.Login($scope.username,$scope.password,function(response){response.user==$scope.username?(AuthenticationService.SetCredentials(response.user,$scope.password,response.token),$state.go("app.dashboard")):($scope.error=response[response.length-1],$scope.dataLoading=!1)})}}]).controller("LogoutController",["AuthenticationService","$state","$rootScope",function(AuthenticationService,$state,$rootScope){AuthenticationService.ClearCredentials(),AuthenticationService.Logout().then(function(data){"Success"==data.retStatus?($rootScope.userVisiblevalue=!1,$rootScope.taskerVisiblevalue=!1,$rootScope.taskVisiblevalue=!1,$rootScope.earningsVisiblevalue=!1,$rootScope.categoriesVisiblevalue=!1,$rootScope.couponsVisiblevalue=!1,$rootScope.newsletterVisiblevalue=!1,$state.go("login")):$state.go("app.dashboard")})}]),angular.module("Authentication").factory("AuthenticationService",["$http","$cookieStore","$rootScope","$timeout","$q","toastr",function($http,$cookieStore,$rootScope,$timeout,$q,toastr){var service={};return service.Login=function(username,password,callback){$http.post("/admin",{username:username,password:password}).success(function(response){callback(response)}).error(function(err){toastr.error("login error")})},service.Logout=function(){var deferred=$q.defer();return $http({method:"get",url:"/admin-logout"}).success(function(data){deferred.resolve(data)}).error(function(err){deferred.reject(err)}),deferred.promise},service.SetCredentials=function(username,password,token){var authdata=token;$rootScope.globals={currentUser:{username:username,authdata:authdata}},$http.defaults.headers.common.Authorization=authdata,$cookieStore.put("globals",$rootScope.globals)},service.GetCredentials=function(){return $rootScope.globals},service.ClearCredentials=function(){$rootScope.globals={},$cookieStore.remove("globals")},service}]),angular.module("quickRabbit.users").controller("userAddCtrl",userAddCtrl),userAddCtrl.$inject=["usersEditServiceResolve","$scope","toastr","UsersService","$state","$stateParams","$modal","$location"],angular.module("quickRabbit.taskers").controller("AddAddress",function($modalInstance,toastr,user,$location,$state,$scope){var ata=this;ata.editaddressdata=user,$scope.location={},ata.addressList={},ata.addressList.location={lat:"",lng:""},ata.placeChanged=function(){ata.place=this.getPlace(),ata.addressList.location.lat=ata.place.geometry.location.lat(),ata.addressList.location.lng=ata.place.geometry.location.lng(),ata.availability=2;var locationa=ata.place;ata.editaddressdata.line1="",ata.editaddressdata.street="",locationa.name&&(ata.editaddressdata.line1=locationa.name);for(var i=0;i<locationa.address_components.length;i++)for(var j=0;j<locationa.address_components[i].types.length;j++)"neighborhood"==locationa.address_components[i].types[j]&&ata.editaddressdata.line1!=locationa.address_components[i].long_name&&(""!=ata.editaddressdata.line1?ata.editaddressdata.line1=ata.editaddressdata.line1+","+locationa.address_components[i].long_name:ata.editaddressdata.line1=locationa.address_components[i].long_name),"route"==locationa.address_components[i].types[j]&&ata.editaddressdata.line1!=locationa.address_components[i].long_name&&(""!=ata.editaddressdata.street?ata.editaddressdata.street=ata.editaddressdata.street+","+locationa.address_components[i].long_name:ata.editaddressdata.street=locationa.address_components[i].long_name),"street_number"==locationa.address_components[i].types[j]&&(""!=ata.editaddressdata.street?ata.editaddressdata.street=ata.editaddressdata.street+","+locationa.address_components[i].long_name:ata.editaddressdata.street=locationa.address_components[i].long_name),"sublocality_level_1"==locationa.address_components[i].types[j]&&(""!=ata.editaddressdata.street?ata.editaddressdata.street=ata.editaddressdata.street+","+locationa.address_components[i].long_name:ata.editaddressdata.street=locationa.address_components[i].long_name),"locality"==locationa.address_components[i].types[j]&&(ata.editaddressdata.city=locationa.address_components[i].long_name),"country"==locationa.address_components[i].types[j]&&(ata.editaddressdata.country=locationa.address_components[i].long_name),"postal_code"==locationa.address_components[i].types[j]&&(ata.editaddressdata.zipcode=locationa.address_components[i].long_name),"administrative_area_level_1"!=locationa.address_components[i].types[j]&&"administrative_area_level_2"!=locationa.address_components[i].types[j]||(ata.editaddressdata.state=locationa.address_components[i].long_name)},ata.ok=function(valid){1==valid?$modalInstance.close(ata):toastr.error("Invalid Form")},ata.cancel=function(){$modalInstance.dismiss("cancel")}}),angular.module("quickRabbit.users").directive("cropImgChange",function(){return{restrict:"A",link:function(scope,element,attrs){var onChangeHandler=scope.$eval(attrs.cropImgChange);element.bind("change",onChangeHandler)}}}),angular.module("quickRabbit.users").controller("usersListCtrl",usersListCtrl),usersListCtrl.$inject=["usersServiceResolve","UsersService","$scope","MainService","toastr"],angular.module("quickRabbit.users").controller("trashUserListCtrl",trashUserListCtrl),trashUserListCtrl.$inject=["trashUserServiceResolve","$scope","UsersService"],angular.module("quickRabbit.users").controller("usersExportCtrl",usersExportCtrl),usersExportCtrl.$inject=["usersExport","UsersService","$scope","MainService"],angular.module("quickRabbit.users").controller("transactionListCtrl",transactionListCtrl),transactionListCtrl.$inject=["usersTransactionServiceResolve","UsersService","$scope","MainService","$stateParams"],angular.module("quickRabbit.users").controller("adminsforgtCtrl",adminsforgtCtrl),adminsforgtCtrl.$inject=["$scope","UsersService","toastr"],angular.module("quickRabbit.users").controller("adminsmailforgtCtrl",adminsmailforgtCtrl),adminsmailforgtCtrl.$inject=["$scope","toastr","$stateParams","UsersService"];var app=angular.module("quickRabbit.users");app.factory("UsersService",UsersService),UsersService.$inject=["$http","$q","Upload"],angular.module("quickRabbit.dashboard").controller("DashboardCtrl",DashboardCtrl),DashboardCtrl.$inject=["UsersService","toastr","TasksService","TaskersService","userCountServiceResolve","getRecentUsersResolve","getRecentTaskersResolve","getRecentTasksResolve","DashboardService","$scope","$modal","$state","$stateParams","TasksServiceResolve","earningsServiceResolve","$filter","$rootScope"],angular.module("quickRabbit.taskers").controller("DeleteUserModalInstanceCtrl",function($modalInstance,user){var dcmic=this;dcmic.userid=user,dcmic.ok=function(){$modalInstance.close(dcmic.userid)},dcmic.cancel=function(){$modalInstance.dismiss("cancel")}});var app=angular.module("quickRabbit.dashboard");app.factory("DashboardService",DashboardService),DashboardService.$inject=["$http","$q"],angular.module("quickRabbit.taskers").controller("taskersListCtrl",taskersListCtrl),taskersListCtrl.$inject=["taskersServiceResolve","TaskersService","$scope","toastr"],angular.module("quickRabbit.taskers").controller("deletedTaskerCtrl",deletedTaskerCtrl),deletedTaskerCtrl.$inject=["deletedtaskersServiceResolve","TaskersService","$scope"],angular.module("quickRabbit.taskers").controller("addNewTaskerCtrl",addNewTaskerCtrl),addNewTaskerCtrl.$inject=["$filter","$state","$scope","$modal","toastr","$timeout","TaskersService","taskerAddServiceResolve","CategoryServiceResolve","NgMap"],angular.module("quickRabbit.taskers").controller("AvailabilityModalInstanceCtrl",function($modalInstance,data,workingDays){var aam=this;aam.day=data.days[data.day],aam.index=data.day,aam.working_day=workingDays[data.day],aam.ok=function(working_day,index){1==aam.working_day.hour.morning||1==aam.working_day.hour.afternoon||1==aam.working_day.hour.evening?aam.working_day.not_working=!1:aam.working_day.not_working=!0;var data={working_day:working_day,index:index};$modalInstance.close(data)},aam.cancel=function(){$modalInstance.dismiss("cancel")}}),angular.module("quickRabbit.taskers").controller("AvailabilityModalInstanceCtrl",function($modalInstance,data,workingDays){var aam=this;aam.day=data.days[data.day],aam.index=data.day,aam.working_day=workingDays[data.day],aam.ok=function(working_day,index){1==aam.working_day.hour.morning||1==aam.working_day.hour.afternoon||1==aam.working_day.hour.evening?aam.working_day.not_working=!1:aam.working_day.not_working=!0;var data={working_day:working_day,index:index};$modalInstance.close(data)},aam.cancel=function(){$modalInstance.dismiss("cancel")}}),angular.module("quickRabbit.taskers").controller("ModalInstanceWorkingDayCtrl",function($scope,$modalInstance,WorkingDays,selectedIndex){$scope.totalData={WorkingDays:{},selectedIndex:0},$scope.WorkingDays=WorkingDays[selectedIndex],$scope.ok=function(){1==$scope.WorkingDays.hour.morning||1==$scope.WorkingDays.hour.afternoon||1==$scope.WorkingDays.hour.evening?$scope.WorkingDays.not_working=!1:$scope.WorkingDays.not_working=!0,$scope.totalData.WorkingDays=$scope.WorkingDays,
$scope.totalData.selectedIndex=selectedIndex,$modalInstance.close($scope.totalData)},$scope.cancel=function(){$modalInstance.dismiss("cancel")}}),angular.module("quickRabbit.taskers").controller("DeleteCategoriesModalInstanceCtrl",function($modalInstance,user,category){var dcmic=this;dcmic.category=category,dcmic.user=user;var categoryinfo={};categoryinfo.userid=user._id,categoryinfo.categoryid=category,dcmic.ok=function(){$modalInstance.close(categoryinfo)},dcmic.cancel=function(){$modalInstance.dismiss("cancel")}}),angular.module("quickRabbit.taskers").controller("NewCategoriesModalInstanceCtrl",function(TaskersService,experiences,user,categories,category,toastr,$modalInstance,$scope,defaultCurrency){var nacm=this;nacm.user=user,nacm.categories=categories,nacm.defaultcurrency=defaultCurrency,nacm.experiences=experiences,nacm.category=nacm.categories.filter(function(obj){return obj._id===category})[0],nacm.selectedCategoryData={},nacm.selectedCategoryData.skills=[],nacm.category?nacm.mode="Edit":nacm.mode="Add";for(var i=0;i<nacm.user.taskerskills;i++)nacm.user.taskerskills[i].categoryid==category&&(nacm.selectedCategoryData=nacm.user.taskerskills[i]);nacm.selectedCategoryData.userid=nacm.user._id,nacm.selectedCategoryData.categoryid=nacm.user.categoryid,nacm.onChangeCategory=function(category){nacm.category=nacm.categories.filter(function(obj){return obj._id===category})[0]},nacm.onChangeCategoryChild=function(category){TaskersService.getChild(category).then(function(response){nacm.MinimumAmount=response.commision}),nacm.category=nacm.user.taskerskills.filter(function(obj){obj.childid===category&&toastr.error("Already the Category is Exists")})[0]},nacm.ok=function(valid,data){valid?(toastr.success("Category  Added To tle list Successfully"),$modalInstance.close(nacm.selectedCategoryData)):toastr.error("form is invalid")},nacm.cancel=function(){$modalInstance.dismiss("cancel")}}),angular.module("quickRabbit.taskers").controller("addTaskerCtrl",addTaskerCtrl),addTaskerCtrl.$inject=["taskerAddServiceResolve","$filter","$state","TaskersService","$scope","$modal","toastr","CategoryServiceResolve","$timeout","$http","$stateParams","NgMap"],angular.module("quickRabbit.taskers").controller("AvailabilityModalCtrl",function($modalInstance,data,workingDays){var aam=this;aam.day=data.days[data.day],aam.index=data.day,aam.working_day=workingDays[data.day],aam.ok=function(working_day,index){1==aam.working_day.hour.morning||1==aam.working_day.hour.afternoon||1==aam.working_day.hour.evening?aam.working_day.not_working=!1:aam.working_day.not_working=!0;var data={working_day:working_day,index:index};$modalInstance.close(data)},aam.cancel=function(){$modalInstance.dismiss("cancel")}}),angular.module("quickRabbit.taskers").controller("DeleteCategoriesModalInstanceCtrl",function($modalInstance,user,category){var dcmic=this;dcmic.category=category,dcmic.user=user;var categoryinfo={};categoryinfo.userid=user._id,categoryinfo.categoryid=category,dcmic.ok=function(){$modalInstance.close(categoryinfo)},dcmic.cancel=function(){$modalInstance.dismiss("cancel")}}),angular.module("quickRabbit.taskers").controller("ModalInstanceWorkingDayCtrl",function($scope,$modalInstance,WorkingDays,selectedIndex){$scope.totalData={WorkingDays:{},selectedIndex:0},$scope.WorkingDays=WorkingDays[selectedIndex],$scope.ok=function(){1==$scope.WorkingDays.hour.morning||1==$scope.WorkingDays.hour.afternoon||1==$scope.WorkingDays.hour.evening?$scope.WorkingDays.not_working=!1:$scope.WorkingDays.not_working=!0,$scope.totalData.WorkingDays=$scope.WorkingDays,$scope.totalData.selectedIndex=selectedIndex,$modalInstance.close($scope.totalData)},$scope.cancel=function(){$modalInstance.dismiss("cancel")}}),angular.module("quickRabbit.taskers").controller("CategoriesModalInstanceCtrl",function(TaskersService,experiences,user,categories,category,toastr,$modalInstance,defaultCurrency){var acm=this;category?acm.role="edit":acm.role="new",acm.user=user,acm.categories=categories,acm.experiences=experiences,acm.defaultcurrency=defaultCurrency,acm.category=acm.categories.filter(function(obj){return obj._id===category})[0],acm.selectedCategoryData={},acm.selectedCategoryData.skills=[],acm.category?acm.mode="Edit":acm.mode="Add";for(var i=0;i<acm.user.taskerskills.length;i++)acm.user.taskerskills[i].childid==category&&(acm.selectedCategoryData=acm.user.taskerskills[i]);acm.selectedCategoryData.userid=acm.user._id,acm.onChangeCategory=function(category){acm.category=acm.categories.filter(function(obj){return obj._id===category})[0]},acm.onChangeCategoryChild=function(category){TaskersService.getChild(category).then(function(response){acm.MinimumAmount=response.commision}),acm.category=acm.user.taskerskills.filter(function(obj){obj.childid===category&&toastr.error("Already the Category is Exists")})[0]},acm.selectedCategoryData.childid&&TaskersService.getChild(acm.selectedCategoryData.childid).then(function(response){acm.MinimumAmount=response.commision}),acm.ok=function(valid){valid?$modalInstance.close(acm.selectedCategoryData):toastr.error("Form is Invalid")},acm.cancel=function(){$modalInstance.dismiss("cancel")}});var app=angular.module("quickRabbit.taskers");app.factory("TaskersService",TaskersService),TaskersService.$inject=["$http","$q","Upload"],angular.module("quickRabbit.administrator").controller("adminsListCtrl",adminsListCtrl),adminsListCtrl.$inject=["adminsServiceResolve","AdminsService","$scope"],angular.module("quickRabbit.administrator").controller("adminAddCtrl",adminAddCtrl),adminAddCtrl.$inject=["adminsEditServiceResolve","$scope","toastr","AdminsService","$state","$stateParams"],angular.module("quickRabbit.administrator").controller("subAdminsListCtrl",subAdminsListCtrl),subAdminsListCtrl.$inject=["subAdminsServiceResolve","AdminsService","$scope"],angular.module("quickRabbit.administrator").controller("subAdminCtrl",subAdminCtrl),subAdminCtrl.$inject=["roleManagerResolve","RoleManagerService","userRoleResolve","toastr","$stateParams","$state"];var app=angular.module("quickRabbit.administrator");app.factory("AdminsService",AdminsService),AdminsService.$inject=["$http","$q","Upload"];var app=angular.module("quickRabbit.administrator");app.factory("RoleManagerService",RoleManagerService),RoleManagerService.$inject=["$http","$q"],angular.module("quickRabbit.sliders").controller("editSliderCtrl",editSliderCtrl),editSliderCtrl.$inject=["sliderEditReslove","SliderService","toastr","$state","$stateParams"],angular.module("quickRabbit.sliders").controller("viewSliderCtrl",viewSliderCtrl),viewSliderCtrl.$inject=["SliderServiceResolve","SliderService","$scope"];var app=angular.module("quickRabbit.sliders");app.factory("SliderService",SliderService),SliderService.$inject=["$http","$q","Upload"],angular.module("quickRabbit.contactus").controller("editContactCtrl",editContactCtrl),editContactCtrl.$inject=["contactEditReslove","ContactService","toastr","$state","$filter"],angular.module("quickRabbit.contactus").controller("viewContactCtrl",viewContactCtrl),viewContactCtrl.$inject=["ContactServiceResolve","ContactService","$scope"];var app=angular.module("quickRabbit.contactus");app.factory("ContactService",ContactService),ContactService.$inject=["$http","$q","Upload"],angular.module("quickRabbit.images").controller("viewImagesCtrl",viewImagesCtrl),viewImagesCtrl.$inject=["ImagesServiceResolve","ImagesService","$scope","toastr"];var app=angular.module("quickRabbit.images");app.factory("ImagesService",ImagesService),ImagesService.$inject=["$http","$q","Upload"],angular.module("quickRabbit.pages").controller("editPageCtrl",editPageCtrl),editPageCtrl.$inject=["PageServiceResolve","toastr","PageService","Slug","$state","$stateParams","PageCategoryResolve"],angular.module("quickRabbit.pages").controller("pagesListCtrl",pagesListCtrl),pagesListCtrl.$inject=["PageListServiceResolve","PageService","$modal","$scope"],angular.module("quickRabbit.pages").controller("subPagesListCtrl",subPagesListCtrl),subPagesListCtrl.$inject=["SubPageListServiceResolve","PageService","$modal","$scope"],angular.module("quickRabbit.pages").controller("editPageLanguageCtrl",editPageLanguageCtrl),editPageLanguageCtrl.$inject=["SubPageServiceResolve","PageTranslateServiceResolve","toastr","PageService","Slug","$state","$stateParams"];var app=angular.module("quickRabbit.pages");app.factory("PageService",PageService),PageService.$inject=["$http","$q"],angular.module("quickRabbit.coupons").controller("editCouponCtrl",editCouponCtrl),editCouponCtrl.$inject=["toastr","CouponService","CouponEditServiceResolve","$state","$stateParams","CouponAvailableUserServiceResolve"],angular.module("quickRabbit.coupons").controller("couponsListCtrl",couponsListCtrl),couponsListCtrl.$inject=["CouponService","CouponServiceResolve","$scope"];var app=angular.module("quickRabbit.pages");app.factory("CouponService",CouponService),CouponService.$inject=["$http","$q"],angular.module("quickRabbit.emailTemplate").controller("emailTemplateSaveCtrl",emailTemplateSaveCtrl),emailTemplateSaveCtrl.$inject=["emailTemplateEditResolve","toastr","EmailTemplateService","$state","$stateParams"],angular.module("quickRabbit.emailTemplate").controller("emailTemplateListCtrl",emailTemplateListCtrl),emailTemplateListCtrl.$inject=["emailTemplateListResolve","EmailTemplateService","$modal","$scope"];var app=angular.module("quickRabbit.emailTemplate");app.factory("EmailTemplateService",EmailTemplateService),EmailTemplateService.$inject=["$http","$q"],angular.module("quickRabbit.categories").controller("editCategoryCtrl",editCategoryCtrl),editCategoryCtrl.$inject=["categoryEditReslove","CategoryService","toastr","$state","$stateParams","Slug"],angular.module("quickRabbit.categories").controller("editsubCategoryCtrl",editsubCategoryCtrl),editsubCategoryCtrl.$inject=["categoryEditReslove","CategoryService","toastr","$state","$stateParams","$location","Slug"],angular.module("quickRabbit.categories").controller("categoryListCtrl",categoryListCtrl),categoryListCtrl.$inject=["CategoryServiceResolve","CategoryService","$scope"],angular.module("quickRabbit.categories").controller("subcategoryListCtrl",subcategoryListCtrl),subcategoryListCtrl.$inject=["CategoryServiceResolve","CategoryService","$scope"];var app=angular.module("quickRabbit.categories");app.factory("CategoryService",CategoryService),CategoryService.$inject=["$http","$q","Upload"],angular.module("quickRabbit.postheader").controller("editPostheaderCtrl",editPostheaderCtrl),editPostheaderCtrl.$inject=["toastr","$state","PostheaderService","postheaderServiceResolve","$stateParams"],angular.module("quickRabbit.postheader").controller("viewPostHeaderCtrl",viewPostHeaderCtrl),viewPostHeaderCtrl.$inject=["PostHeaderViewServiceResolve","PostheaderService","$scope"];var app=angular.module("quickRabbit.postheader");app.factory("PostheaderService",PostheaderService),PostheaderService.$inject=["$http","$q","Upload"],angular.module("quickRabbit.faq").controller("editFaqCtrl",editFaqCtrl),editFaqCtrl.$inject=["faqEditReslove","FaqService","toastr","$state","$stateParams"],angular.module("quickRabbit.categories").controller("faqListCtrl",faqListCtrl),faqListCtrl.$inject=["FaqServiceResolve","FaqService","$scope"];var app=angular.module("quickRabbit.faq");app.factory("FaqService",FaqService),FaqService.$inject=["$http","$q","Upload"],angular.module("quickRabbit.experience").controller("editExperienceCtrl",editExperienceCtrl),editExperienceCtrl.$inject=["ExperienceService","toastr","ExperienceEditReslove","$state","$stateParams"],angular.module("quickRabbit.experience").controller("experienceListCtrl",experienceListCtrl),experienceListCtrl.$inject=["experienceServiceResolve","ExperienceService","$scope"];var app=angular.module("quickRabbit.experience");app.factory("ExperienceService",ExperienceService),ExperienceService.$inject=["$http","$q","Upload"],angular.module("quickRabbit.question").controller("editQuestionerCtrl",editQuestionerCtrl),editQuestionerCtrl.$inject=["QuestionEditReslove","QuestionService","toastr","$state","$stateParams"],angular.module("quickRabbit.sliders").controller("viewQuestionCtrl",viewQuestionCtrl),viewQuestionCtrl.$inject=["QuestionServiceResolve","QuestionService","$scope"];var app=angular.module("quickRabbit.question");app.factory("QuestionService",QuestionService),QuestionService.$inject=["$http","$q","Upload"],angular.module("quickRabbit.tasks").controller("editTasksCtrl",editTasksCtrl),editTasksCtrl.$inject=["TasksEditReslove","TasksService","toastr","$state","$filter","$scope"],angular.module("quickRabbit.tasks").controller("viewTasksCtrl",viewTasksCtrl),viewTasksCtrl.$inject=["TasksServiceResolve","TasksService","$scope","toastr"],angular.module("quickRabbit.tasks").controller("exportTasksCtrl",exportTasksCtrl),exportTasksCtrl.$inject=["TasksExportReslove","TasksService","toastr","$state","$window"],angular.module("quickRabbit.tasks").controller("deletedTasksCtrl",deletedTasksCtrl),deletedTasksCtrl.$inject=["DeletedTasksServiceResolve","TasksService","$scope","toastr"];var app=angular.module("quickRabbit.tasks");app.factory("TasksService",TasksService),TasksService.$inject=["$http","$q","Upload"],angular.module("quickRabbit.tools").controller("toolsCtrl",toolsCtrl),toolsCtrl.$inject=["toastr","ToolsService","$stateParams"];var app=angular.module("quickRabbit.tools");app.factory("ToolsService",ToolsService),ToolsService.$inject=["$http","$q"],angular.module("quickRabbit.settings").controller("generalSettingsCtrl",generalSettingsCtrl),generalSettingsCtrl.$inject=["GeneralSettingsServiceResolve","TimeZoneSettingsServiceResolve","toastr","SettingsService"],angular.module("quickRabbit.settings").controller("seoSettingsCtrl",seoSettingsCtrl),seoSettingsCtrl.$inject=["SeoSettingsServiceResolve","SettingsService","toastr"],angular.module("quickRabbit.settings").controller("mobileContentCtrl",mobileContentCtrl),mobileContentCtrl.$inject=["mobileSettingsServiceResolve","SettingsService","toastr"],angular.module("quickRabbit.settings").controller("widgetsCtrl",widgetsCtrl),widgetsCtrl.$inject=["WidgetsServiceResolve","SettingsService","toastr"],angular.module("quickRabbit.settings").controller("smtpSettingsCtrl",smtpSettingsCtrl),smtpSettingsCtrl.$inject=["SMTPSettingsServiceResolve","SettingsService","toastr"],angular.module("quickRabbit.settings").controller("smsSettingsCtrl",smsSettingsCtrl),smsSettingsCtrl.$inject=["SMSSettingsServiceResolve","SettingsService","toastr"],function(){function currencySettingsAddCtrl(currencyServiceResolve,CurrencyService,toastr,$state,$stateParams){var csac=this;$stateParams.id?(csac.action="edit",csac.breadcrumb="SubMenu.CURRENCY_EDITSETTINGS",csac.msg="Edited"):(csac.action="add",csac.breadcrumb="SubMenu.CURRENCY_ADDSETTINGS",csac.msg="Added"),currencyServiceResolve&&(csac.currencyData=currencyServiceResolve[0]),csac.submitCurrency=function(isValid,data){isValid?2==data.status&&1==csac.currencyData["default"]?toastr.error("Please chnage your Default Currency to some other Currency then only You can able to Unselect this Currency....."):CurrencyService.save(data).then(function(response){"edit"==response.method?($state.go("app.settings.currencySettings.list"),toastr.success("Currency "+csac.msg+" Successfully")):"wrong"==response.data?toastr.error("Your Credentials are gone please login again....."):($state.go("app.settings.currencySettings.list"),toastr.success("Currency "+csac.msg+" Successfully"))},function(err){toastr.error("Your credentials are gone"+err[0].msg+"--"+err[0].param)}):toastr.error("form is invalid")}}angular.module("quickRabbit.currencies",[]).controller("currencySettingsAddCtrl",currencySettingsAddCtrl),currencySettingsAddCtrl.$inject=["currencyServiceResolve","CurrencyService","toastr","$state","$stateParams"]}();var app=angular.module("quickRabbit.currencies");app.controller("currencySettingsListCtrl",currencySettingsListCtrl),currencySettingsListCtrl.$inject=["CurrencyServiceResolve","CurrencyService","toastr","$window","$modal","MainService","$scope"],function(){function languageSettingsEditCtrl(languageServiceResolve,toastr,languageService,$state,$stateParams){var lsec=this;lsec.languageData={},lsec.languageData=languageServiceResolve[0][0],$stateParams.id?(lsec.action="edit",lsec.breadcrumb="SubMenu.LANGUAGE_EDITSETTINGS",lsec.msg="Edited"):(lsec.action="add",lsec.breadcrumb="SubMenu.LANGUAGE_ADDSETTINGS",lsec.msg="Added"),lsec.submitlanguage=function(data,isValid){isValid?2==data.status?1==lsec.languageData["default"]?toastr.error("Please chnage your Default language to some other language then only You can able to Unselect this language....."):languageService.editlanguage(data).then(function(response){"wrong"==response.data?toastr.error("Your Credentials are gone please login again....."):0==response.nModified?($state.go("app.settings.languageSettings.list",{},{reload:!0}),toastr.error("Sorry, Unable to update your datas")):($state.go("app.settings.languageSettings.list",{},{reload:!0}),toastr.success("Template "+lsec.msg+" successfully"))},function(err){for(var i=0;i<err.length;i++)toastr.error("Your credentials are gone"+err[i].msg+"--"+err[i].param)}):languageService.editlanguage(data).then(function(response){"wrong"==response.data?toastr.error("Your Credentials are gone please login again....."):0==response.nModified?($state.go("app.settings.languageSettings.list",{},{reload:!0}),toastr.error("Sorry, Unable to update your datas")):($state.go("app.settings.languageSettings.list",{},{reload:!0}),toastr.success("Template "+lsec.msg+" successfully"))},function(err){toastr.error(err.message)}):toastr.error("Form is invalid")}}angular.module("quickRabbit.languages",[]).controller("languageSettingsEditCtrl",languageSettingsEditCtrl),languageSettingsEditCtrl.$inject=["languageServiceResolve","toastr","languageService","$state","$stateParams"]}(),angular.module("quickRabbit.languages").controller("languageSettingsListCtrl",languageSettingsListCtrl),languageSettingsListCtrl.$inject=["languageServiceListResolve","languageService","MainService","toastr","$window","$modal","$scope"],angular.module("quickRabbit.languages").controller("languageSettingsManageCtrl",languageSettingsManageCtrl),languageSettingsManageCtrl.$inject=["languageServiceManageResolve","toastr","languageService","$state","$stateParams"],angular.module("quickRabbit.settings").controller("SocialNetworksSettingsCtrl",SocialNetworksSettingsCtrl),SocialNetworksSettingsCtrl.$inject=["SocialNetworksSettingsServiceResolve","SettingsService","toastr"];var app=angular.module("quickRabbit.settings");app.factory("SettingsService",SettingsService),SettingsService.$inject=["$http","$q","Upload"];var app=angular.module("quickRabbit.currencies");app.factory("CurrencyService",CurrencyService),CurrencyService.$inject=["$http","$q"];var app=angular.module("quickRabbit.languages");app.factory("languageService",languageService),languageService.$inject=["$http","$q"],angular.module("quickRabbit.newsletter").controller("SubscriberListCtrl",SubscriberListCtrl),SubscriberListCtrl.$inject=["SubscriberServiceResolve","SubscriberService","MainService","SubscriberMail","$window","$modal","$scope"];var app=angular.module("quickRabbit.newsletter");app.factory("SubscriberService",SubscriberService),SubscriberService.$inject=["$http","$q"],angular.module("quickRabbit.paymentGateway").controller("editPaymentCtrl",editPaymentCtrl),editPaymentCtrl.$inject=["PaymentGatewayEditServiceResolve","PaymentGatewayService","toastr","$state"],angular.module("quickRabbit.paymentGateway").controller("paymentGatewayCtrl",paymentGatewayCtrl),paymentGatewayCtrl.$inject=["PaymentGatewayServiceResolve","PaymentGatewayService","$window","$scope"];var app=angular.module("quickRabbit.paymentGateway");app.factory("PaymentGatewayService",PaymentGatewayService),PaymentGatewayService.$inject=["$http","$q"],angular.module("quickRabbit.reviews").controller("editReviewsCtrl",editReviewsCtrl),editReviewsCtrl.$inject=["ReviewsEditReslove","ReviewsService","toastr","$state"],angular.module("quickRabbit.reviews").controller("viewReviewsCtrl",viewReviewsCtrl),viewReviewsCtrl.$inject=["ReviewsServiceResolve","ReviewsService","$scope"];var app=angular.module("quickRabbit.reviews");app.factory("ReviewsService",ReviewsService),ReviewsService.$inject=["$http","$q","Upload"],angular.module("quickRabbit.earnings").controller("earningsCtrl",earningsCtrl),earningsCtrl.$inject=["FirstCycleServiceResolve","CycleServiceResolve","TasksServiceResolve","EarningsServiceResolve","EarningService","$scope"],angular.module("quickRabbit.earnings").controller("viewearningsCtrl",viewearningsCtrl),viewearningsCtrl.$inject=["$scope","TaskerEarningReslove","toastr","EarningService","PaidEarningsServiceResolve","$stateParams"];var app=angular.module("quickRabbit.earnings");app.factory("EarningService",EarningService),EarningService.$inject=["$http","$q"],angular.module("quickRabbit.admin").directive("navCollapse",function($timeout){return{restrict:"A",link:function($scope,$el){$timeout(function(){var $dropdowns=$el.find("ul").parent("li"),$a=$dropdowns.children("a"),$notDropdowns=$el.children("li").not($dropdowns),$notDropdownsLinks=$notDropdowns.children("a"),app=angular.element(".appWrapper"),sidebar=angular.element("#sidebar"),controls=angular.element("#controls");$dropdowns.addClass("dropdown");var $submenus=$dropdowns.find("ul >.dropdown");$submenus.addClass("submenu"),$a.append('<i class="fa fa-plus"></i>'),$a.on("click",function(event){if(app.hasClass("sidebar-sm")||app.hasClass("sidebar-xs")||app.hasClass("hz-menu"))return!1;var $this=angular.element(this),$parent=$this.parent("li"),$openSubmenu=angular.element(".submenu.open");$parent.hasClass("submenu")||$dropdowns.not($parent).removeClass("open").find("ul").slideUp(),$openSubmenu.not($this.parents(".submenu")).removeClass("open").find("ul").slideUp(),$parent.toggleClass("open").find(">ul").stop().slideToggle(),event.preventDefault()}),$dropdowns.on("mouseenter",function(){sidebar.addClass("dropdown-open"),controls.addClass("dropdown-open")}),$dropdowns.on("mouseleave",function(){sidebar.removeClass("dropdown-open"),controls.removeClass("dropdown-open")}),$notDropdownsLinks.on("click",function(){$dropdowns.removeClass("open").find("ul").slideUp()});var $activeDropdown=angular.element(".dropdown>ul>.active").parent();$activeDropdown.css("display","block")})}}}),angular.module("quickRabbit.admin").directive("collapseSidebar",function($rootScope){return{restrict:"A",link:function(scope,element){var app=angular.element(".appWrapper"),$window=angular.element(window),width=$window.width(),removeRipple=function(){angular.element("#sidebar").find(".ink").remove()},collapse=function(){width=$window.width(),width<992?app.addClass("sidebar-sm"):app.removeClass("sidebar-sm sidebar-xs"),width<768?app.removeClass("sidebar-sm").addClass("sidebar-xs"):width>992?app.removeClass("sidebar-sm sidebar-xs"):app.removeClass("sidebar-xs").addClass("sidebar-sm"),app.hasClass("sidebar-sm-forced")&&app.addClass("sidebar-sm"),app.hasClass("sidebar-xs-forced")&&app.addClass("sidebar-xs")};collapse(),$window.resize(function(){if(width!==$window.width()){var t;clearTimeout(t),t=setTimeout(collapse,300),removeRipple()}}),element.on("click",function(e){app.hasClass("sidebar-sm")?app.removeClass("sidebar-sm").addClass("sidebar-xs"):app.hasClass("sidebar-xs")?app.removeClass("sidebar-xs"):app.addClass("sidebar-sm"),app.removeClass("sidebar-sm-forced sidebar-xs-forced"),app.parent().removeClass("sidebar-sm sidebar-xs"),removeRipple(),e.preventDefault()})}}}),angular.module("quickRabbit.admin").directive("slimscroll",function(){return{restrict:"A",link:function($scope,$elem,$attr){var off=[],option={},refresh=function(){$attr.slimscroll?option=$scope.$eval($attr.slimscroll):$attr.slimscrollOption&&(option=$scope.$eval($attr.slimscrollOption)),angular.element($elem).slimScroll({destroy:!0}),angular.element($elem).slimScroll(option)},registerWatch=function(){$attr.slimscroll&&!option.noWatch&&off.push($scope.$watchCollection($attr.slimscroll,refresh)),$attr.slimscrollWatch&&off.push($scope.$watchCollection($attr.slimscrollWatch,refresh)),$attr.slimscrolllistento&&off.push($scope.$on($attr.slimscrolllistento,refresh))},destructor=function(){angular.element($elem).slimScroll({destroy:!0}),off.forEach(function(unbind){unbind()}),off=null};off.push($scope.$on("$destroy",destructor)),registerWatch()}}}),angular.module("quickRabbit.admin").directive("onBlurValidation",function(){return{restrict:"A",require:"?ngModel",link:function(scope,elm,attr,ctrl){ctrl&&(elm.on("focus",function(){elm.addClass("has-focus"),scope.$apply(function(){ctrl.hasFocus=!0})}),elm.on("blur",function(){elm.removeClass("has-focus"),elm.addClass("has-visited"),scope.$apply(function(){ctrl.hasFocus=!1,ctrl.hasVisited=!0})}),elm.closest("form").on("submit",function(){elm.addClass("has-visited"),scope.$apply(function(){ctrl.hasFocus=!1,ctrl.hasVisited=!0})}))}}}),angular.module("quickRabbit.admin").directive("submitValidate",function(){return{require:"form",restrict:"A",link:function(scope,element,attributes){var $element=angular.element(element);$element.on("submit",function(e){$element.find(".ng-pristine").removeClass("ng-pristine").addClass("ng-dirty");var form=scope[attributes.name];angular.forEach(form,function(formElement,fieldName){"$"!==fieldName[0]&&(formElement.$pristine=!1,formElement.$dirty=!0)},this),form.$setDirty(),scope.$apply()})}}}),angular.module("quickRabbit.admin").directive("customTable",function($compile){return{restrict:"E",templateUrl:"app/admin/modules/common/views/custom_table.html",scope:{data:"=data"},controller:customTableCtrl,controllerAs:"CTC",bindToController:!0}}).directive("contentItem",function($compile){return{restrict:"EA",controller:customContentCtrl,controllerAs:"CCC",link:function(scope,element,attrs){element.html(scope.template),$compile(element.contents())(scope)},scope:{content:"=content",options:"=options",template:"=template",currentpage:"=currentpage",filterDataArray:"=filterData",entrylimit:"=entrylimit",predicate:"=predicate",reverse:"=reverse",usertablesearch:"=usertablesearch"}}}),angular.module("quickRabbit.admin").controller("DeleteTestCtrl",DeleteTestCtrl),DeleteTestCtrl.$inject=["$scope","MainService","$modalInstance","DataVariable","OptionsVariable","toastr"],angular.module("quickRabbit.admin").controller("SendMailCtrl",SendMailCtrl),SendMailCtrl.$inject=["$scope","MainService","$modalInstance","toastr","Email","DataVariable","Type"],angular.module("quickRabbit.admin").controller("SendMessageCtrl",SendMessageCtrl),SendMessageCtrl.$inject=["$scope","MainService","$modalInstance","toastr","Message","DataVariable","Type"],angular.module("checklist-model",[]).directive("checklistModel",["$parse","$compile",function($parse,$compile){function contains(arr,item,comparator){if(angular.isArray(arr))for(var i=arr.length;i--;)if(comparator(arr[i],item))return!0;return!1}function add(arr,item,comparator){return arr=angular.isArray(arr)?arr:[],contains(arr,item,comparator)||arr.push(item),arr}function remove(arr,item,comparator){if(angular.isArray(arr))for(var i=arr.length;i--;)if(comparator(arr[i],item)){arr.splice(i,1);break}return arr}function postLinkFn(scope,elem,attrs){function setValueInChecklistModel(value,checked){var current=getter(scope.$parent);angular.isFunction(setter)&&(checked===!0?setter(scope.$parent,add(current,value,comparator)):setter(scope.$parent,remove(current,value,comparator)))}function setChecked(newArr,oldArr){return checklistBeforeChange&&checklistBeforeChange(scope)===!1?void setValueInChecklistModel(value,scope[attrs.ngModel]):void(scope[attrs.ngModel]=contains(newArr,value,comparator))}var checklistModel=attrs.checklistModel;attrs.$set("checklistModel",null),$compile(elem)(scope),attrs.$set("checklistModel",checklistModel);var getter=$parse(checklistModel),setter=getter.assign,checklistChange=$parse(attrs.checklistChange),checklistBeforeChange=$parse(attrs.checklistBeforeChange),value=attrs.checklistValue?$parse(attrs.checklistValue)(scope.$parent):attrs.value,comparator=angular.equals;if(attrs.hasOwnProperty("checklistComparator"))if("."==attrs.checklistComparator[0]){var comparatorExpression=attrs.checklistComparator.substring(1);comparator=function(a,b){return a[comparatorExpression]===b[comparatorExpression]}}else comparator=$parse(attrs.checklistComparator)(scope.$parent);scope.$watch(attrs.ngModel,function(newValue,oldValue){if(newValue!==oldValue){if(checklistBeforeChange&&checklistBeforeChange(scope)===!1)return void(scope[attrs.ngModel]=contains(getter(scope.$parent),value,comparator));setValueInChecklistModel(value,newValue),checklistChange&&checklistChange(scope)}}),angular.isFunction(scope.$parent.$watchCollection)?scope.$parent.$watchCollection(checklistModel,setChecked):scope.$parent.$watch(checklistModel,setChecked,!0)}return{restrict:"A",priority:1e3,terminal:!0,scope:!0,compile:function(tElement,tAttrs){if(("INPUT"!==tElement[0].tagName||"checkbox"!==tAttrs.type)&&"MD-CHECKBOX"!==tElement[0].tagName&&!tAttrs.btnCheckbox)throw'checklist-model should be applied to `input[type="checkbox"]` or `md-checkbox`.';if(!tAttrs.checklistValue&&!tAttrs.value)throw"You should provide `value` or `checklist-value`.";return tAttrs.ngModel||tAttrs.$set("ngModel","checked"),postLinkFn}}}]),angular.module("ngIntlTelInput",[]),angular.module("ngIntlTelInput").provider("ngIntlTelInput",function(){var me=this,props={},setFn=function(obj){if("object"==typeof obj)for(var key in obj)props[key]=obj[key]};me.set=setFn,me.$get=["$log",function($log){return Object.create(me,{init:{value:function(elm){window.intlTelInputUtils||$log.warn("intlTelInputUtils is not defined. Formatting and validation will not work."),elm.intlTelInput(props)}}})}]}),angular.module("ngIntlTelInput").directive("ngIntlTelInput",["ngIntlTelInput","$log","$http",function(ngIntlTelInput,$log,$http){return{restrict:"A",require:"ngModel",scope:{country:"@"},link:function(scope,elm,attr,ctrl){return attr.type&&"text"!==attr.type&&"tel"!==attr.type||"INPUT"!==elm[0].tagName?void $log.warn("ng-intl-tel-input can only be applied to a *text* or *tel* input"):(ctrl.$validators.ngIntlTelInput=function(value){return!(value||elm[0].value.length>0)||elm.intlTelInput("isValidNumber")},ctrl.$parsers.push(function(value){var phone={};return phone.code="+"+elm.intlTelInput("getSelectedCountryData").dialCode,phone.number=elm.intlTelInput("getNumber"),phone.number=phone.number.replace(phone.code,""),phone}),void ctrl.$formatters.push(function(phone){return $http.get("//ipinfo.io").then(function(response){var countryCode=response&&response.data.country?response.data.country:"";return ngIntlTelInput.set({defaultCountry:countryCode}),ngIntlTelInput.init(elm),phone?(elm.intlTelInput("setNumber",phone.code+phone.number),phone.number):void 0})}))}}}]);var app=angular.module("quickRabbit.cancellation");app.factory("cancellationService",cancellationService),cancellationService.$inject=["$http","$q","Upload"],angular.module("quickRabbit.cancellation").controller("cancellationCtrl",cancellationCtrl),cancellationCtrl.$inject=["cancellationResolve","cancellationService","$scope"],angular.module("quickRabbit.cancellation").controller("editCancellationCtrl",editCancellationCtrl),editCancellationCtrl.$inject=["editcancellationResolve","cancellationService","$scope","toastr","$state","$stateParams"],angular.module("quickRabbit.pushnotification").controller("NotificationemailCtrl",NotificationemailCtrl),NotificationemailCtrl.$inject=["emailEditReslove","toastr","emailService","$state","$stateParams"],angular.module("quickRabbit.pushnotification").controller("NotificationListCtrl",NotificationListCtrl),NotificationListCtrl.$inject=["$scope","NotificationListServiceResolve","notificationListService"],angular.module("quickRabbit.pushnotification").controller("UserListCtrl",UserListCtrl),UserListCtrl.$inject=["UsernotificationServiceResolve","UsernotificationService","emailEditReslove","emailService","messageEditReslove","$window","$modal","$scope"],
angular.module("quickRabbit.pushnotification").controller("TaskerListCtrl",TaskerListCtrl),TaskerListCtrl.$inject=["TaskernotificationServiceResolve","TaskernotificationService","$window","$modal","$scope"];var app=angular.module("quickRabbit.pushnotification");app.factory("notificationListService",notificationListService),notificationListService.$inject=["$http","$q"];var app=angular.module("quickRabbit.pushnotification");app.factory("emailService",emailService),emailService.$inject=["$http","$q"];var app=angular.module("quickRabbit.pushnotification");app.factory("UsernotificationService",UsernotificationService),UsernotificationService.$inject=["$http","$q"];var app=angular.module("quickRabbit.pushnotification");app.factory("TaskernotificationService",TaskernotificationService),TaskernotificationService.$inject=["$http","$q"];